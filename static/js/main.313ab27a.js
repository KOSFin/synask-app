/*! For license information please see main.313ab27a.js.LICENSE.txt */
(()=>{var t={630:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Headers:()=>o,Request:()=>s,Response:()=>l,default:()=>a,fetch:()=>r});var i=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const r=i.fetch,a=i.fetch.bind(i),o=i.Headers,s=i.Request,l=i.Response},406:function(t){t.exports=function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=n(t,"string");return"symbol"==typeof e?e:e+""}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return u(t)||h(t)||f(t)||p()}function u(t){if(Array.isArray(t))return d(t)}function h(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t,e){if(t){if("string"===typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g="undefined"!==typeof window&&"undefined"!==typeof window.document,m=g?window:{},v=!(!g||!m.document.documentElement)&&"ontouchstart"in m.document.documentElement,y=!!g&&"PointerEvent"in m,b="cropper",x="all",_="crop",w="move",C="zoom",S="e",k="w",T="s",O="n",j="ne",E="nw",P="se",A="sw",M="".concat(b,"-crop"),D="".concat(b,"-disabled"),I="".concat(b,"-hidden"),L="".concat(b,"-hide"),R="".concat(b,"-invisible"),F="".concat(b,"-modal"),N="".concat(b,"-move"),z="".concat(b,"Action"),B="".concat(b,"Preview"),U="crop",W="move",H="none",Y="crop",X="cropend",V="cropmove",G="cropstart",q="dblclick",K=v?"touchstart":"mousedown",J=v?"touchmove":"mousemove",$=v?"touchend touchcancel":"mouseup",Q=y?"pointerdown":K,Z=y?"pointermove":J,tt=y?"pointerup pointercancel":$,et="ready",nt="resize",it="wheel",rt="zoom",at="image/jpeg",ot=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,st=/^data:/,lt=/^data:image\/jpeg;base64,/,ct=/^img|canvas$/i,ut=200,ht=100,ft={viewMode:0,dragMode:U,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ut,minContainerHeight:ht,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},dt='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',pt=Number.isNaN||m.isNaN;function gt(t){return"number"===typeof t&&!pt(t)}var mt=function(t){return t>0&&t<1/0};function vt(t){return"undefined"===typeof t}function yt(t){return"object"===r(t)&&null!==t}var bt=Object.prototype.hasOwnProperty;function xt(t){if(!yt(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&bt.call(n,"isPrototypeOf")}catch(i){return!1}}function _t(t){return"function"===typeof t}var wt=Array.prototype.slice;function Ct(t){return Array.from?Array.from(t):wt.call(t)}function St(t,e){return t&&_t(e)&&(Array.isArray(t)||gt(t.length)?Ct(t).forEach((function(n,i){e.call(t,n,i,t)})):yt(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var kt=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return yt(t)&&n.length>0&&n.forEach((function(e){yt(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},Tt=/\.\d*(?:0|9){12}\d*$/;function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Tt.test(t)?Math.round(t*e)/e:t}var jt=/^width|height|left|top|marginLeft|marginTop$/;function Et(t,e){var n=t.style;St(e,(function(t,e){jt.test(e)&&gt(t)&&(t="".concat(t,"px")),n[e]=t}))}function Pt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function At(t,e){if(e)if(gt(t.length))St(t,(function(t){At(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Mt(t,e){e&&(gt(t.length)?St(t,(function(t){Mt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Dt(t,e,n){e&&(gt(t.length)?St(t,(function(t){Dt(t,e,n)})):n?At(t,e):Mt(t,e))}var It=/([a-z\d])([A-Z])/g;function Lt(t){return t.replace(It,"$1-$2").toLowerCase()}function Rt(t,e){return yt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Lt(e)))}function Ft(t,e,n){yt(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Lt(e)),n)}function Nt(t,e){if(yt(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Lt(e)))}var zt=/\s\s*/,Bt=function(){var t=!1;if(g){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});m.addEventListener("test",n,i),m.removeEventListener("test",n,i)}return t}();function Ut(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(zt).forEach((function(e){if(!Bt){var a=t.listeners;a&&a[e]&&a[e][n]&&(r=a[e][n],delete a[e][n],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,r,i)}))}function Wt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=n;e.trim().split(zt).forEach((function(e){if(i.once&&!Bt){var a=t.listeners,o=void 0===a?{}:a;r=function(){delete o[e][n],t.removeEventListener(e,r,i);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];n.apply(t,s)},o[e]||(o[e]={}),o[e][n]&&t.removeEventListener(e,o[e][n],i),o[e][n]=r,t.listeners=o}t.addEventListener(e,r,i)}))}function Ht(t,e,n){var i;return _t(Event)&&_t(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(i)}function Yt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Xt=m.location,Vt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Gt(t){var e=t.match(Vt);return null!==e&&(e[1]!==Xt.protocol||e[2]!==Xt.hostname||e[3]!==Xt.port)}function qt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Kt(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,r=t.translateX,a=t.translateY,o=[];gt(r)&&0!==r&&o.push("translateX(".concat(r,"px)")),gt(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),gt(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),gt(n)&&1!==n&&o.push("scaleX(".concat(n,")")),gt(i)&&1!==i&&o.push("scaleY(".concat(i,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Jt(t){var n=e({},t),i=0;return St(t,(function(t,e){delete n[e],St(n,(function(e){var n=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),s=Math.sqrt(n*n+r*r),l=(Math.sqrt(a*a+o*o)-s)/s;Math.abs(l)>Math.abs(i)&&(i=l)}))})),i}function $t(t,n){var i=t.pageX,r=t.pageY,a={endX:i,endY:r};return n?a:e({startX:i,startY:r},a)}function Qt(t){var e=0,n=0,i=0;return St(t,(function(t){var r=t.startX,a=t.startY;e+=r,n+=a,i+=1})),{pageX:e/=i,pageY:n/=i}}function Zt(t){var e=t.aspectRatio,n=t.height,i=t.width,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=mt(i),o=mt(n);if(a&&o){var s=n*e;"contain"===r&&s>i||"cover"===r&&s<i?n=i/e:i=n*e}else a?n=i/e:o&&(i=n*e);return{width:i,height:n}}function te(t){var e=t.width,n=t.height,i=t.degree;if(90===(i=Math.abs(i)%180))return{width:n,height:e};var r=i%90*Math.PI/180,a=Math.sin(r),o=Math.cos(r),s=e*o+n*a,l=e*a+n*o;return i>90?{width:l,height:s}:{width:s,height:l}}function ee(t,e,n,i){var r=e.aspectRatio,a=e.naturalWidth,o=e.naturalHeight,s=e.rotate,l=void 0===s?0:s,u=e.scaleX,h=void 0===u?1:u,f=e.scaleY,d=void 0===f?1:f,p=n.aspectRatio,g=n.naturalWidth,m=n.naturalHeight,v=i.fillColor,y=void 0===v?"transparent":v,b=i.imageSmoothingEnabled,x=void 0===b||b,_=i.imageSmoothingQuality,w=void 0===_?"low":_,C=i.maxWidth,S=void 0===C?1/0:C,k=i.maxHeight,T=void 0===k?1/0:k,O=i.minWidth,j=void 0===O?0:O,E=i.minHeight,P=void 0===E?0:E,A=document.createElement("canvas"),M=A.getContext("2d"),D=Zt({aspectRatio:p,width:S,height:T}),I=Zt({aspectRatio:p,width:j,height:P},"cover"),L=Math.min(D.width,Math.max(I.width,g)),R=Math.min(D.height,Math.max(I.height,m)),F=Zt({aspectRatio:r,width:S,height:T}),N=Zt({aspectRatio:r,width:j,height:P},"cover"),z=Math.min(F.width,Math.max(N.width,a)),B=Math.min(F.height,Math.max(N.height,o)),U=[-z/2,-B/2,z,B];return A.width=Ot(L),A.height=Ot(R),M.fillStyle=y,M.fillRect(0,0,L,R),M.save(),M.translate(L/2,R/2),M.rotate(l*Math.PI/180),M.scale(h,d),M.imageSmoothingEnabled=x,M.imageSmoothingQuality=w,M.drawImage.apply(M,[t].concat(c(U.map((function(t){return Math.floor(Ot(t))}))))),M.restore(),A}var ne=String.fromCharCode;function ie(t,e,n){var i="";n+=e;for(var r=e;r<n;r+=1)i+=ne(t.getUint8(r));return i}var re=/^data:.*,/;function ae(t){var e=t.replace(re,""),n=atob(e),i=new ArrayBuffer(n.length),r=new Uint8Array(i);return St(r,(function(t,e){r[e]=n.charCodeAt(e)})),i}function oe(t,e){for(var n=[],i=8192,r=new Uint8Array(t);r.length>0;)n.push(ne.apply(null,Ct(r.subarray(0,i)))),r=r.subarray(i);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}function se(t){var e,n=new DataView(t);try{var i,r,a;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var o=n.byteLength,s=2;s+1<o;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){r=s;break}s+=1}if(r){var l=r+10;if("Exif"===ie(n,r+4,4)){var c=n.getUint16(l);if(((i=18761===c)||19789===c)&&42===n.getUint16(l+2,i)){var u=n.getUint32(l+4,i);u>=8&&(a=l+u)}}}if(a){var h,f,d=n.getUint16(a,i);for(f=0;f<d;f+=1)if(h=a+12*f+2,274===n.getUint16(h,i)){h+=8,e=n.getUint16(h,i),n.setUint16(h,1,i);break}}}catch(p){e=1}return e}function le(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}var ce={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,i=this.cropper,r=Number(e.minContainerWidth),a=Number(e.minContainerHeight);At(i,I),Mt(t,I);var o={width:Math.max(n.offsetWidth,r>=0?r:ut),height:Math.max(n.offsetHeight,a>=0?a:ht)};this.containerData=o,Et(i,{width:o.width,height:o.height}),At(t,I),Mt(i,I)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,i=Math.abs(e.rotate)%180===90,r=i?e.naturalHeight:e.naturalWidth,a=i?e.naturalWidth:e.naturalHeight,o=r/a,s=t.width,l=t.height;t.height*o>t.width?3===n?s=t.height*o:l=t.width/o:3===n?l=t.width/o:s=t.height*o;var c={aspectRatio:o,naturalWidth:r,naturalHeight:a,width:s,height:l};this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=kt({},c)},limitCanvas:function(t,e){var n=this.options,i=this.containerData,r=this.canvasData,a=this.cropBoxData,o=n.viewMode,s=r.aspectRatio,l=this.cropped&&a;if(t){var c=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;o>1?(c=Math.max(c,i.width),u=Math.max(u,i.height),3===o&&(u*s>c?c=u*s:u=c/s)):o>0&&(c?c=Math.max(c,l?a.width:0):u?u=Math.max(u,l?a.height:0):l&&(c=a.width,(u=a.height)*s>c?c=u*s:u=c/s));var h=Zt({aspectRatio:s,width:c,height:u});c=h.width,u=h.height,r.minWidth=c,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(o>(l?0:1)){var f=i.width-r.width,d=i.height-r.height;r.minLeft=Math.min(0,f),r.minTop=Math.min(0,d),r.maxLeft=Math.max(0,f),r.maxTop=Math.max(0,d),l&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,2===o&&(r.width>=i.width&&(r.minLeft=Math.min(0,f),r.maxLeft=Math.max(0,f)),r.height>=i.height&&(r.minTop=Math.min(0,d),r.maxTop=Math.max(0,d))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=i.width,r.maxTop=i.height},renderCanvas:function(t,e){var n=this.canvasData,i=this.imageData;if(e){var r=te({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=r.width,o=r.height,s=n.width*(a/n.naturalWidth),l=n.height*(o/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=a/o,n.naturalWidth=a,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Et(this.canvas,kt({width:n.width,height:n.height},Kt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,i=n.naturalWidth*(e.width/e.naturalWidth),r=n.naturalHeight*(e.height/e.naturalHeight);kt(n,{width:i,height:r,left:(e.width-i)/2,top:(e.height-r)/2}),Et(this.image,kt({width:n.width,height:n.height},Kt(kt({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};n&&(e.height*n>e.width?r.height=r.width/n:r.width=r.height*n),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*i),r.height=Math.max(r.minHeight,r.height*i),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=kt({},r)},limitCropBox:function(t,e){var n=this.options,i=this.containerData,r=this.canvasData,a=this.cropBoxData,o=this.limited,s=n.aspectRatio;if(t){var l=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,u=o?Math.min(i.width,r.width,r.width+r.left,i.width-r.left):i.width,h=o?Math.min(i.height,r.height,r.height+r.top,i.height-r.top):i.height;l=Math.min(l,i.width),c=Math.min(c,i.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),h*s>u?h=u/s:u=h*s),a.minWidth=Math.min(l,u),a.minHeight=Math.min(c,h),a.maxWidth=u,a.maxHeight=h}e&&(o?(a.minLeft=Math.max(0,r.left),a.minTop=Math.max(0,r.top),a.maxLeft=Math.min(i.width,r.left+r.width)-a.width,a.maxTop=Math.min(i.height,r.top+r.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&Ft(this.face,z,n.width>=e.width&&n.height>=e.height?w:x),Et(this.cropBox,kt({width:n.width,height:n.height},Kt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ht(this.element,Y,this.getData())}},ue={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,i=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=i,a.alt=r,this.viewBox.appendChild(a),this.viewBoxImage=a,n){var o=n;"string"===typeof n?o=t.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,St(o,(function(t){var n=document.createElement("img");Ft(t,B,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=i,n.alt=r,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){St(this.previews,(function(t){var e=Rt(t,B);Et(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Nt(t,B)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,i=n.width,r=n.height,a=t.width,o=t.height,s=n.left-e.left-t.left,l=n.top-e.top-t.top;this.cropped&&!this.disabled&&(Et(this.viewBoxImage,kt({width:a,height:o},Kt(kt({translateX:-s,translateY:-l},t)))),St(this.previews,(function(e){var n=Rt(e,B),c=n.width,u=n.height,h=c,f=u,d=1;i&&(f=r*(d=c/i)),r&&f>u&&(h=i*(d=u/r),f=u),Et(e,{width:h,height:f}),Et(e.getElementsByTagName("img")[0],kt({width:a*d,height:o*d},Kt(kt({translateX:-s*d,translateY:-l*d},t))))})))}},he={bind:function(){var t=this.element,e=this.options,n=this.cropper;_t(e.cropstart)&&Wt(t,G,e.cropstart),_t(e.cropmove)&&Wt(t,V,e.cropmove),_t(e.cropend)&&Wt(t,X,e.cropend),_t(e.crop)&&Wt(t,Y,e.crop),_t(e.zoom)&&Wt(t,rt,e.zoom),Wt(n,Q,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Wt(n,it,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Wt(n,q,this.onDblclick=this.dblclick.bind(this)),Wt(t.ownerDocument,Z,this.onCropMove=this.cropMove.bind(this)),Wt(t.ownerDocument,tt,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Wt(window,nt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;_t(e.cropstart)&&Ut(t,G,e.cropstart),_t(e.cropmove)&&Ut(t,V,e.cropmove),_t(e.cropend)&&Ut(t,X,e.cropend),_t(e.crop)&&Ut(t,Y,e.crop),_t(e.zoom)&&Ut(t,rt,e.zoom),Ut(n,Q,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ut(n,it,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ut(n,q,this.onDblclick),Ut(t.ownerDocument,Z,this.onCropMove),Ut(t.ownerDocument,tt,this.onCropEnd),e.responsive&&Ut(window,nt,this.onResize)}},fe={resize:function(){if(!this.disabled){var t,e,n=this.options,i=this.container,r=this.containerData,a=i.offsetWidth/r.width,o=i.offsetHeight/r.height,s=Math.abs(a-1)>Math.abs(o-1)?a:o;1!==s&&(n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(St(t,(function(e,n){t[n]=e*s}))),this.setCropBoxData(St(e,(function(t,n){e[n]=t*s})))))}},dblclick:function(){this.disabled||this.options.dragMode===H||this.setDragMode(Pt(this.dragBox,M)?W:U)},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(gt(e)&&1!==e||gt(n)&&0!==n||t.ctrlKey))){var i,r=this.options,a=this.pointers;t.changedTouches?St(t.changedTouches,(function(t){a[t.identifier]=$t(t)})):a[t.pointerId||0]=$t(t),i=Object.keys(a).length>1&&r.zoomable&&r.zoomOnTouch?C:Rt(t.target,z),ot.test(i)&&!1!==Ht(this.element,G,{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,i===_&&(this.cropping=!0,At(this.dragBox,F)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==Ht(this.element,V,{originalEvent:t,action:e})&&(t.changedTouches?St(t.changedTouches,(function(t){kt(n[t.identifier]||{},$t(t,!0))})):kt(n[t.pointerId||0]||{},$t(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?St(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Dt(this.dragBox,F,this.cropped&&this.options.modal)),Ht(this.element,X,{originalEvent:t,action:e}))}}},de={change:function(t){var e,n=this.options,i=this.canvasData,r=this.containerData,a=this.cropBoxData,o=this.pointers,s=this.action,l=n.aspectRatio,c=a.left,u=a.top,h=a.width,f=a.height,d=c+h,p=u+f,g=0,m=0,v=r.width,y=r.height,b=!0;!l&&t.shiftKey&&(l=h&&f?h/f:1),this.limited&&(g=a.minLeft,m=a.minTop,v=g+Math.min(r.width,i.width,i.left+i.width),y=m+Math.min(r.height,i.height,i.top+i.height));var M=o[Object.keys(o)[0]],D={x:M.endX-M.startX,y:M.endY-M.startY},L=function(t){switch(t){case S:d+D.x>v&&(D.x=v-d);break;case k:c+D.x<g&&(D.x=g-c);break;case O:u+D.y<m&&(D.y=m-u);break;case T:p+D.y>y&&(D.y=y-p)}};switch(s){case x:c+=D.x,u+=D.y;break;case S:if(D.x>=0&&(d>=v||l&&(u<=m||p>=y))){b=!1;break}L(S),(h+=D.x)<0&&(s=k,c-=h=-h),l&&(f=h/l,u+=(a.height-f)/2);break;case O:if(D.y<=0&&(u<=m||l&&(c<=g||d>=v))){b=!1;break}L(O),f-=D.y,u+=D.y,f<0&&(s=T,u-=f=-f),l&&(h=f*l,c+=(a.width-h)/2);break;case k:if(D.x<=0&&(c<=g||l&&(u<=m||p>=y))){b=!1;break}L(k),h-=D.x,c+=D.x,h<0&&(s=S,c-=h=-h),l&&(f=h/l,u+=(a.height-f)/2);break;case T:if(D.y>=0&&(p>=y||l&&(c<=g||d>=v))){b=!1;break}L(T),(f+=D.y)<0&&(s=O,u-=f=-f),l&&(h=f*l,c+=(a.width-h)/2);break;case j:if(l){if(D.y<=0&&(u<=m||d>=v)){b=!1;break}L(O),f-=D.y,u+=D.y,h=f*l}else L(O),L(S),D.x>=0?d<v?h+=D.x:D.y<=0&&u<=m&&(b=!1):h+=D.x,D.y<=0?u>m&&(f-=D.y,u+=D.y):(f-=D.y,u+=D.y);h<0&&f<0?(s=A,u-=f=-f,c-=h=-h):h<0?(s=E,c-=h=-h):f<0&&(s=P,u-=f=-f);break;case E:if(l){if(D.y<=0&&(u<=m||c<=g)){b=!1;break}L(O),f-=D.y,u+=D.y,h=f*l,c+=a.width-h}else L(O),L(k),D.x<=0?c>g?(h-=D.x,c+=D.x):D.y<=0&&u<=m&&(b=!1):(h-=D.x,c+=D.x),D.y<=0?u>m&&(f-=D.y,u+=D.y):(f-=D.y,u+=D.y);h<0&&f<0?(s=P,u-=f=-f,c-=h=-h):h<0?(s=j,c-=h=-h):f<0&&(s=A,u-=f=-f);break;case A:if(l){if(D.x<=0&&(c<=g||p>=y)){b=!1;break}L(k),h-=D.x,c+=D.x,f=h/l}else L(T),L(k),D.x<=0?c>g?(h-=D.x,c+=D.x):D.y>=0&&p>=y&&(b=!1):(h-=D.x,c+=D.x),D.y>=0?p<y&&(f+=D.y):f+=D.y;h<0&&f<0?(s=j,u-=f=-f,c-=h=-h):h<0?(s=P,c-=h=-h):f<0&&(s=E,u-=f=-f);break;case P:if(l){if(D.x>=0&&(d>=v||p>=y)){b=!1;break}L(S),f=(h+=D.x)/l}else L(T),L(S),D.x>=0?d<v?h+=D.x:D.y>=0&&p>=y&&(b=!1):h+=D.x,D.y>=0?p<y&&(f+=D.y):f+=D.y;h<0&&f<0?(s=E,u-=f=-f,c-=h=-h):h<0?(s=A,c-=h=-h):f<0&&(s=j,u-=f=-f);break;case w:this.move(D.x,D.y),b=!1;break;case C:this.zoom(Jt(o),t),b=!1;break;case _:if(!D.x||!D.y){b=!1;break}e=Yt(this.cropper),c=M.startX-e.left,u=M.startY-e.top,h=a.minWidth,f=a.minHeight,D.x>0?s=D.y>0?P:j:D.x<0&&(c-=h,s=D.y>0?A:E),D.y<0&&(u-=f),this.cropped||(Mt(this.cropBox,I),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(a.width=h,a.height=f,a.left=c,a.top=u,this.action=s,this.renderCropBox()),St(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},pe={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&At(this.dragBox,F),Mt(this.cropBox,I),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=kt({},this.initialImageData),this.canvasData=kt({},this.initialCanvasData),this.cropBoxData=kt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(kt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Mt(this.dragBox,F),At(this.cropBox,I)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,St(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Mt(this.cropper,D)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,At(this.cropper,D)),this},destroy:function(){var t=this.element;return t[b]?(t[b]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=n.left,r=n.top;return this.moveTo(vt(t)?t:i+Number(t),vt(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(gt(t)&&(n.left=t,i=!0),gt(e)&&(n.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var i=this.options,r=this.canvasData,a=r.width,o=r.height,s=r.naturalWidth,l=r.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var c=s*t,u=l*t;if(!1===Ht(this.element,rt,{ratio:t,oldRatio:a/s,originalEvent:n}))return this;if(n){var h=this.pointers,f=Yt(this.cropper),d=h&&Object.keys(h).length?Qt(h):{pageX:n.pageX,pageY:n.pageY};r.left-=(c-a)*((d.pageX-f.left-r.left)/a),r.top-=(u-o)*((d.pageY-f.top-r.top)/o)}else xt(e)&&gt(e.x)&&gt(e.y)?(r.left-=(c-a)*((e.x-r.left)/a),r.top-=(u-o)*((e.y-r.top)/o)):(r.left-=(c-a)/2,r.top-=(u-o)/2);r.width=c,r.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return gt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,gt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(gt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(gt(t)&&(n.scaleX=t,i=!0),gt(e)&&(n.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,i=this.imageData,r=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-r.left,y:a.top-r.top,width:a.width,height:a.height};var o=i.width/i.naturalWidth;if(St(t,(function(e,n){t[n]=e/o})),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=i.rotate||0),n.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,i=this.canvasData,r={};if(this.ready&&!this.disabled&&xt(t)){var a=!1;e.rotatable&&gt(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,a=!0),e.scalable&&(gt(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,a=!0),gt(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;gt(t.x)&&(r.left=t.x*o+i.left),gt(t.y)&&(r.top=t.y*o+i.top),gt(t.width)&&(r.width=t.width*o),gt(t.height)&&(r.height=t.height*o),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?kt({},this.containerData):{}},getImageData:function(){return this.sized?kt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&St(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&xt(t)&&(gt(t.left)&&(e.left=t.left),gt(t.top)&&(e.top=t.top),gt(t.width)?(e.width=t.width,e.height=t.width/n):gt(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,i=this.cropBoxData,r=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&xt(t)&&(gt(t.left)&&(i.left=t.left),gt(t.top)&&(i.top=t.top),gt(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),gt(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),r&&(e?i.height=i.width/r:n&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=ee(this.image,this.imageData,e,t);if(!this.cropped)return n;var i=this.getData(t.rounded),r=i.x,a=i.y,o=i.width,s=i.height,l=n.width/Math.floor(e.naturalWidth);1!==l&&(r*=l,a*=l,o*=l,s*=l);var u=o/s,h=Zt({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=Zt({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=Zt({aspectRatio:u,width:t.width||(1!==l?n.width:o),height:t.height||(1!==l?n.height:s)}),p=d.width,g=d.height;p=Math.min(h.width,Math.max(f.width,p)),g=Math.min(h.height,Math.max(f.height,g));var m=document.createElement("canvas"),v=m.getContext("2d");m.width=Ot(p),m.height=Ot(g),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,p,g);var y=t.imageSmoothingEnabled,b=void 0===y||y,x=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,x&&(v.imageSmoothingQuality=x);var _,w,C,S,k,T,O=n.width,j=n.height,E=r,P=a;E<=-o||E>O?(E=0,_=0,C=0,k=0):E<=0?(C=-E,E=0,k=_=Math.min(O,o+E)):E<=O&&(C=0,k=_=Math.min(o,O-E)),_<=0||P<=-s||P>j?(P=0,w=0,S=0,T=0):P<=0?(S=-P,P=0,T=w=Math.min(j,s+P)):P<=j&&(S=0,T=w=Math.min(s,j-P));var A=[E,P,_,w];if(k>0&&T>0){var M=p/o;A.push(C*M,S*M,k*M,T*M)}return v.drawImage.apply(v,[n].concat(c(A.map((function(t){return Math.floor(Ot(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||vt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var r=t===U,a=e.movable&&t===W;t=r||a?t:H,e.dragMode=t,Ft(n,z,t),Dt(n,M,r),Dt(n,N,a),e.cropBoxMovable||(Ft(i,z,t),Dt(i,M,r),Dt(i,N,a))}return this}},ge=m.Cropper,me=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e||!ct.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=kt({},ft,xt(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return s(t,[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e[b]){if(e[b]=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(st.test(t))lt.test(t)?this.read(ae(t)):this.clone();else{var r=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=a,r.onerror=a,r.ontimeout=a,r.onprogress=function(){r.getResponseHeader("content-type")!==at&&r.abort()},r.onload=function(){e.read(r.response)},r.onloadend=function(){e.reloading=!1,e.xhr=null},i.checkCrossOrigin&&Gt(t)&&n.crossOrigin&&(t=qt(t)),r.open("GET",t,!0),r.responseType="arraybuffer",r.withCredentials="use-credentials"===n.crossOrigin,r.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,i=se(t),r=0,a=1,o=1;if(i>1){this.url=oe(t,at);var s=le(i);r=s.rotate,a=s.scaleX,o=s.scaleY}e.rotatable&&(n.rotate=r),e.scalable&&(n.scaleX=a,n.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,i=e;this.options.checkCrossOrigin&&Gt(e)&&(n||(n="anonymous"),i=qt(e)),this.crossOrigin=n,this.crossOriginUrl=i;var r=document.createElement("img");n&&(r.crossOrigin=n),r.src=i||e,r.alt=t.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),At(r,L),t.parentNode.insertBefore(r,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=m.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent),i=function(e,n){kt(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=kt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var r=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){i(r.width,r.height),n||a.removeChild(r)},r.src=e.src,n||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(r))}else i(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,i=t.parentNode,r=document.createElement("div");r.innerHTML=dt;var a=r.querySelector(".".concat(b,"-container")),o=a.querySelector(".".concat(b,"-canvas")),s=a.querySelector(".".concat(b,"-drag-box")),l=a.querySelector(".".concat(b,"-crop-box")),c=l.querySelector(".".concat(b,"-face"));this.container=i,this.cropper=a,this.canvas=o,this.dragBox=s,this.cropBox=l,this.viewBox=a.querySelector(".".concat(b,"-view-box")),this.face=c,o.appendChild(n),At(t,I),i.insertBefore(a,t.nextSibling),Mt(n,L),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,At(l,I),e.guides||At(l.getElementsByClassName("".concat(b,"-dashed")),I),e.center||At(l.getElementsByClassName("".concat(b,"-center")),I),e.background&&At(a,"".concat(b,"-bg")),e.highlight||At(c,R),e.cropBoxMovable&&(At(c,N),Ft(c,z,x)),e.cropBoxResizable||(At(l.getElementsByClassName("".concat(b,"-line")),I),At(l.getElementsByClassName("".concat(b,"-point")),I)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),_t(e.ready)&&Wt(t,et,e.ready,{once:!0}),Ht(t,et)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Mt(this.element,I)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ge,t}},{key:"setDefaults",value:function(t){kt(ft,xt(t)&&t)}}])}();return kt(me.prototype,ce,ue,he,fe,de,pe),me}()},661:(t,e,n)=>{var i,r=r||{version:"5.3.0"};if(e.fabric=r,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?r.document=document:r.document=document.implementation.createHTMLDocument(""),r.window=window;else{var a=new(n(574).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;r.document=a.document,r.jsdomImplForWrapper=n(748).implForWrapper,r.nodeCanvas=n(246).Canvas,r.window=a,DOMParser=r.window.DOMParser}function o(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1);var a=n.height-i.height;r.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}function s(t,e){var n=e.targetCanvas.getContext("2d"),i=e.destinationWidth,r=e.destinationHeight,a=i*r*4,o=new Uint8Array(this.imageBuffer,0,a),s=new Uint8ClampedArray(this.imageBuffer,0,a);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,o);var l=new ImageData(s,i,r);n.putImageData(l,0,0)}r.isTouchSupported="ontouchstart"in r.window||"ontouchstart"in r.document||r.window&&r.window.navigator&&r.window.navigator.maxTouchPoints>0,r.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window,r.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],r.DPI=96,r.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",r.commaWsp="(?:\\s+,?\\s*|,\\s*)",r.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,r.reNonWord=/[ \n\.,;!\?\-]/,r.fontPaths={},r.iMatrix=[1,0,0,1,0,0],r.svgNS="http://www.w3.org/2000/svg",r.perfLimitSizeTotal=2097152,r.maxCacheSideLimit=4096,r.minCacheSideLimit=256,r.charWidthsCache={},r.textureSize=2048,r.disableStyleCopyPaste=!1,r.enableGLFiltering=!0,r.devicePixelRatio=r.window.devicePixelRatio||r.window.webkitDevicePixelRatio||r.window.mozDevicePixelRatio||1,r.browserShadowBlurConstant=1,r.arcToSegmentsCache={},r.boundsOfCurveCache={},r.cachesBoundsOfCurve=!0,r.forceGLPutImageData=!1,r.initFilterBackend=function(){return r.enableGLFiltering&&r.isWebglSupported&&r.isWebglSupported(r.textureSize)?(console.log("max texture size: "+r.maxTextureSize),new r.WebglFilterBackend({tileSize:r.textureSize})):r.Canvas2dFilterBackend?new r.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=r),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:r.util.array.fill(n,!1)}}function e(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)}.bind(this);this.on(t,n)}r.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter((function(t){return!1!==t})),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,n){if(1===arguments.length)for(var i in t)e.call(this,i,t[i]);else e.call(this,t,n);return this},off:function(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}}}(),r.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return"function"===typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0}),0)}},r.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof r.Gradient||this.set(e,new r.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof r.Pattern?n&&n():this.set(e,new r.Pattern(t,n))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,i=Math.pow,a=Math.PI/180,o=Math.PI/2;r.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/o){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/o){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,n){var i=new r.Point(t.x-e.x,t.y-e.y),a=r.util.rotateVector(i,n);return new r.Point(a.x,a.y).addEquals(e)},rotateVector:function(t,e){var n=r.util.sin(e),i=r.util.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},createVector:function(t,e){return new r.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new r.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,n){var i=r.util.createVector(t,e),a=r.util.createVector(t,n),o=r.util.calcAngleBetweenVectors(i,a),s=o*(0===r.util.calcAngleBetweenVectors(r.util.rotateVector(i,o),a)?1:-1)/2;return{vector:r.util.getHatVector(r.util.rotateVector(i,s)),angle:o}},projectStrokeOnPoints:function(t,e,n){var i=[],a=e.strokeWidth/2,o=e.strokeUniform?new r.Point(1/e.scaleX,1/e.scaleY):new r.Point(1,1),s=function(t){var e=a/Math.hypot(t.x,t.y);return new r.Point(t.x*e*o.x,t.y*e*o.y)};return t.length<=1||t.forEach((function(l,c){var u,h,f=new r.Point(l.x,l.y);0===c?(h=t[c+1],u=n?s(r.util.createVector(h,f)).addEquals(f):t[t.length-1]):c===t.length-1?(u=t[c-1],h=n?s(r.util.createVector(u,f)).addEquals(f):t[0]):(u=t[c-1],h=t[c+1]);var d,p,g=r.util.getBisector(f,u,h),m=g.vector,v=g.angle;if("miter"===e.strokeLineJoin&&(d=-a/Math.sin(v/2),p=new r.Point(m.x*d*o.x,m.y*d*o.y),Math.hypot(p.x,p.y)/a<=e.strokeMiterLimit))return i.push(f.add(p)),void i.push(f.subtract(p));d=-a*Math.SQRT2,p=new r.Point(m.x*d*o.x,m.y*d*o.y),i.push(f.add(p)),i.push(f.subtract(p))})),i},transformPoint:function(t,e,n){return n?new r.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new r.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=r.util.transformPoint(t[n],e);var i=[t[0].x,t[1].x,t[2].x,t[3].x],a=r.util.array.min(i),o=r.util.array.max(i)-a,s=[t[0].y,t[1].y,t[2].y,t[3].y],l=r.util.array.min(s);return{left:a,top:l,width:o,height:r.util.array.max(s)-l}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=r.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=r.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*r.DPI/25.4;case"cm":return i*r.DPI/2.54;case"in":return i*r.DPI;case"pt":return i*r.DPI/72;case"pc":return i*r.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=r.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),r.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(e){if(!e)return r;var n,i=e.split("."),a=i.length,o=t||r.window;for(n=0;n<a;++n)o=o[i[n]];return o},loadImage:function(t,e,n,i){if(t){var a=r.util.createImage(),o=function(){e&&e.call(n,a,!1),a=a.onload=a.onerror=null};a.onload=o,a.onerror=function(){r.log("Error loading "+a.src),e&&e.call(n,null,!0),a=a.onload=a.onerror=null},0!==t.indexOf("data")&&void 0!==i&&null!==i&&(a.crossOrigin=i),"data:image/svg"===t.substring(0,14)&&(a.onload=null,r.util.loadImageInDom(a,o)),a.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=r.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),r.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){var a=[],o=0,s=(t=t||[]).length;function l(){++o===s&&e&&e(a.filter((function(t){return t})))}s?t.forEach((function(t,e){t&&t.type?r.util.getKlass(t.type,n).fromObject(t,(function(n,r){r||(a[e]=n),i&&i(t,n,r),l()})):l()})):e&&e(a)},enlivenObjectEnlivables:function(t,e,n){var i=r.Object.ENLIVEN_PROPS.filter((function(e){return!!t[e]}));r.util.enlivenObjects(i.map((function(e){return t[e]})),(function(t){var r={};i.forEach((function(n,i){r[n]=t[i],e&&(e[n]=t[i])})),n&&n(r)}))},enlivenPatterns:function(t,e){function n(){++a===o&&e&&e(i)}var i=[],a=0,o=(t=t||[]).length;o?t.forEach((function(t,e){t&&t.source?new r.Pattern(t,(function(t){i[e]=t,n()})):(i[e]=t,n())})):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?("undefined"!==typeof n&&(t[0].sourcePath=n),t[0]):(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new r.Group(t,e),"undefined"!==typeof n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},createCanvasElement:function(){return r.document.createElement("canvas")},copyCanvasElement:function(t){var e=r.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return r.document.createElement("img")},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var r=n(t[1],t[0]),o=i(t[0],2)+i(t[1],2),s=e(o),l=(t[0]*t[3]-t[2]*t[1])/s,c=n(t[0]*t[2]+t[1]*t[3],o);return{angle:r/a,scaleX:s,scaleY:l,skewX:c/a,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return r.iMatrix.concat();var e=r.util.degreesToRadians(t.angle),n=r.util.cos(e),i=r.util.sin(e);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,n="undefined"===typeof t.scaleY?1:t.scaleY,i=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],a=r.util.multiplyTransformMatrices,o=r.util.degreesToRadians;return t.skewX&&(i=a(i,[1,0,Math.tan(o(t.skewX)),1],!0)),t.skewY&&(i=a(i,[1,Math.tan(o(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=r.util.multiplyTransformMatrices;return t.angle&&(e=n(e,r.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,r.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,a=!0,o=t.getImageData(e,n,2*i||1,2*i||1),s=o.data.length;for(r=3;r<s&&!1!==(a=o.data[r]<=0);r+=4);return o=null,a},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i=t.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(e=n,n="meet"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?r.charWidthsCache[t]&&delete r.charWidthsCache[t]:r.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return r.util.toFixed(t,r.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var n=r.util.invertTransform(e),i=r.util.multiplyTransformMatrices(n,t.calcOwnMatrix());r.util.applyTransformToObject(t,i)},addTransformToObject:function(t,e){r.util.applyTransformToObject(t,r.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var n=r.util.qrDecompose(e),i=new r.Point(n.translateX,n.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(t,e,n){var i=t/2,a=e/2,o=[{x:-i,y:-a},{x:i,y:-a},{x:-i,y:a},{x:i,y:a}],s=r.util.calcDimensionsMatrix(n),l=r.util.makeBoundingBoxFromPoints(o,s);return{x:l.width,y:l.height}},mergeClipPaths:function(t,e){var n=t,i=e;n.inverted&&!i.inverted&&(n=e,i=t),r.util.applyTransformToObject(i,r.util.multiplyTransformMatrices(r.util.invertTransform(n.calcTransformMatrix()),i.calcTransformMatrix()));var a=n.inverted&&i.inverted;return a&&(n.inverted=i.inverted=!1),new r.Group([n],{clipPath:i,inverted:a})},hasStyleChanged:function(t,e,n){return n=n||!1,t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||n&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},stylesToArray:function(t,e){t=r.util.object.clone(t,!0);for(var n=e.split("\n"),i=-1,a={},o=[],s=0;s<n.length;s++)if(t[s])for(var l=0;l<n[s].length;l++){i++;var c=t[s][l];if(c&&Object.keys(c).length>0)r.util.hasStyleChanged(a,c,!0)?o.push({start:i,end:i+1,style:c}):o[o.length-1].end++;a=c||{}}else i+=n[s].length;return o},stylesFromArray:function(t,e){if(!Array.isArray(t))return t;for(var n=e.split("\n"),i=-1,r=0,a={},o=0;o<n.length;o++)for(var s=0;s<n[o].length;s++)i++,t[r]&&t[r].start<=i&&i<t[r].end&&(a[o]=a[o]||{},a[o][s]=Object.assign({},t[r].style),i===t[r].end-1&&r++);return a}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function i(t,e,n,i,a,o,s,l,c,u,h){var f=r.util.cos(t),d=r.util.sin(t),p=r.util.cos(e),g=r.util.sin(e),m=n*a*p-i*o*g+s,v=i*a*p+n*o*g+l;return["C",u+c*(-n*a*d-i*o*f),h+c*(-i*a*d+n*o*f),m+c*(n*a*g+i*o*p),v+c*(i*a*g-n*o*p),m,v]}function a(t,e,n,i){var r=Math.atan2(e,t),a=Math.atan2(i,n);return a>=r?a-r:2*Math.PI-(r-a)}function o(t,e,n){for(var o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],h=function(t,e,n,o,s,l,c){var u=Math.PI,h=c*u/180,f=r.util.sin(h),d=r.util.cos(h),p=0,g=0,m=-d*t*.5-f*e*.5,v=-d*e*.5+f*t*.5,y=(n=Math.abs(n))*n,b=(o=Math.abs(o))*o,x=v*v,_=m*m,w=y*b-y*x-b*_,C=0;if(w<0){var S=Math.sqrt(1-w/(y*b));n*=S,o*=S}else C=(s===l?-1:1)*Math.sqrt(w/(y*x+b*_));var k=C*n*v/o,T=-C*o*m/n,O=d*k-f*T+.5*t,j=f*k+d*T+.5*e,E=a(1,0,(m-k)/n,(v-T)/o),P=a((m-k)/n,(v-T)/o,(-m-k)/n,(-v-T)/o);0===l&&P>0?P-=2*u:1===l&&P<0&&(P+=2*u);for(var A=Math.ceil(Math.abs(P/u*2)),M=[],D=P/A,I=8/3*Math.sin(D/4)*Math.sin(D/4)/Math.sin(D/2),L=E+D,R=0;R<A;R++)M[R]=i(E,L,d,f,n,o,O,j,I,p,g),p=M[R][5],g=M[R][6],E=L,L+=D;return M}(n[6]-t,n[7]-e,o,s,c,u,l),f=0,d=h.length;f<d;f++)h[f][1]+=t,h[f][2]+=e,h[f][3]+=t,h[f][4]+=e,h[f][5]+=t,h[f][6]+=e;return h}function s(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}function l(t,e,n,i,r,a,o,s){return function(l){var c,u=(c=l)*c*c,h=function(t){return 3*t*t*(1-t)}(l),f=function(t){return 3*t*(1-t)*(1-t)}(l),d=function(t){return(1-t)*(1-t)*(1-t)}(l);return{x:o*u+r*h+n*f+t*d,y:s*u+a*h+i*f+e*d}}}function c(t,e,n,i,r,a,o,s){return function(l){var c=1-l,u=3*c*c*(n-t)+6*c*l*(r-n)+3*l*l*(o-r),h=3*c*c*(i-e)+6*c*l*(a-i)+3*l*l*(s-a);return Math.atan2(h,u)}}function u(t,e,n,i,r,a){return function(o){var s,l=(s=o)*s,c=function(t){return 2*t*(1-t)}(o),u=function(t){return(1-t)*(1-t)}(o);return{x:r*l+n*c+t*u,y:a*l+i*c+e*u}}}function h(t,e,n,i,r,a){return function(o){var s=1-o,l=2*s*(n-t)+2*o*(r-n),c=2*s*(i-e)+2*o*(a-i);return Math.atan2(c,l)}}function f(t,e,n){var i,r,a={x:e,y:n},o=0;for(r=1;r<=100;r+=1)i=t(r/100),o+=s(a.x,a.y,i.x,i.y),a=i;return o}function d(t,e){for(var n,i,r,a=0,o=0,l=t.iterator,c={x:t.x,y:t.y},u=.01,h=t.angleFinder;o<e&&u>1e-4;)n=l(a),r=a,(i=s(c.x,c.y,n.x,n.y))+o>e?(a-=u,u/=2):(c=n,a+=u,o+=i);return n.angle=h(r),n}function p(t){for(var e,n,i,r,a=0,o=t.length,d=0,p=0,g=0,m=0,v=[],y=0;y<o;y++){switch(i={x:d,y:p,command:(e=t[y])[0]},e[0]){case"M":i.length=0,g=d=e[1],m=p=e[2];break;case"L":i.length=s(d,p,e[1],e[2]),d=e[1],p=e[2];break;case"C":n=l(d,p,e[1],e[2],e[3],e[4],e[5],e[6]),r=c(d,p,e[1],e[2],e[3],e[4],e[5],e[6]),i.iterator=n,i.angleFinder=r,i.length=f(n,d,p),d=e[5],p=e[6];break;case"Q":n=u(d,p,e[1],e[2],e[3],e[4]),r=h(d,p,e[1],e[2],e[3],e[4]),i.iterator=n,i.angleFinder=r,i.length=f(n,d,p),d=e[3],p=e[4];break;case"Z":case"z":i.destX=g,i.destY=m,i.length=s(d,p,g,m),d=g,p=m}a+=i.length,v.push(i)}return v.push({length:a,x:d,y:p}),v}r.util.joinPath=function(t){return t.map((function(t){return t.join(" ")})).join(" ")},r.util.parsePath=function(t){var i,a,o,s,l,c=[],u=[],h=r.rePathCommand,f="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+f+")"+r.commaWsp,p="([01])"+r.commaWsp+"?",g=new RegExp(d+"?"+d+"?"+d+p+p+d+"?("+f+")","g");if(!t||!t.match)return c;for(var m,v=0,y=(l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;v<y;v++){s=(i=l[v]).slice(1).trim(),u.length=0;var b=i.charAt(0);if(m=[b],"a"===b.toLowerCase())for(var x;x=g.exec(s);)for(var _=1;_<x.length;_++)u.push(x[_]);else for(;o=h.exec(s);)u.push(o[0]);_=0;for(var w=u.length;_<w;_++)a=parseFloat(u[_]),isNaN(a)||m.push(a);var C=e[b.toLowerCase()],S=n[b]||b;if(m.length-1>C)for(var k=1,T=m.length;k<T;k+=C)c.push([b].concat(m.slice(k,k+C))),b=S;else c.push(m)}return c},r.util.makePathSimpler=function(t){var e,n,i,r,a,s,l=0,c=0,u=t.length,h=0,f=0,d=[];for(n=0;n<u;++n){switch(i=!1,(e=t[n].slice(0))[0]){case"l":e[0]="L",e[1]+=l,e[2]+=c;case"L":l=e[1],c=e[2];break;case"h":e[1]+=l;case"H":e[0]="L",e[2]=c,l=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=l,e[2]=c;break;case"m":e[0]="M",e[1]+=l,e[2]+=c;case"M":l=e[1],c=e[2],h=e[1],f=e[2];break;case"c":e[0]="C",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c,e[5]+=l,e[6]+=c;case"C":a=e[3],s=e[4],l=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"S":"C"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),l=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=a,e[2]=s,a=e[3],s=e[4];break;case"q":e[0]="Q",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"Q":a=e[1],s=e[2],l=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=l,e[2]+=c;case"T":"Q"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),e[0]="Q",l=e[1],c=e[2],e[1]=a,e[2]=s,e[3]=l,e[4]=c;break;case"a":e[0]="A",e[6]+=l,e[7]+=c;case"A":i=!0,d=d.concat(o(l,c,e)),l=e[6],c=e[7];break;case"z":case"Z":l=h,c=f}i||d.push(e),r=e[0]}return d},r.util.getSmoothPathFromPoints=function(t,e){var n,i=[],a=new r.Point(t[0].x,t[0].y),o=new r.Point(t[1].x,t[1].y),s=t.length,l=1,c=0,u=s>2;for(e=e||0,u&&(l=t[2].x<o.x?-1:t[2].x===o.x?0:1,c=t[2].y<o.y?-1:t[2].y===o.y?0:1),i.push(["M",a.x-l*e,a.y-c*e]),n=1;n<s;n++){if(!a.eq(o)){var h=a.midPointFrom(o);i.push(["Q",a.x,a.y,h.x,h.y])}a=t[n],n+1<t.length&&(o=t[n+1])}return u&&(l=a.x>t[n-2].x?1:a.x===t[n-2].x?0:-1,c=a.y>t[n-2].y?1:a.y===t[n-2].y?0:-1),i.push(["L",a.x+l*e,a.y+c*e]),i},r.util.getPathSegmentsInfo=p,r.util.getBoundsOfCurve=function(e,n,i,a,o,s,l,c){var u;if(r.cachesBoundsOfCurve&&(u=t.call(arguments),r.boundsOfCurveCache[u]))return r.boundsOfCurveCache[u];var h,f,d,p,g,m,v,y,b=Math.sqrt,x=Math.min,_=Math.max,w=Math.abs,C=[],S=[[],[]];f=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*l,d=3*i-3*e;for(var k=0;k<2;++k)if(k>0&&(f=6*n-12*a+6*s,h=-3*n+9*a-9*s+3*c,d=3*a-3*n),w(h)<1e-12){if(w(f)<1e-12)continue;0<(p=-d/f)&&p<1&&C.push(p)}else(v=f*f-4*d*h)<0||(0<(g=(-f+(y=b(v)))/(2*h))&&g<1&&C.push(g),0<(m=(-f-y)/(2*h))&&m<1&&C.push(m));for(var T,O,j,E=C.length,P=E;E--;)T=(j=1-(p=C[E]))*j*j*e+3*j*j*p*i+3*j*p*p*o+p*p*p*l,S[0][E]=T,O=j*j*j*n+3*j*j*p*a+3*j*p*p*s+p*p*p*c,S[1][E]=O;S[0][P]=e,S[1][P]=n,S[0][P+1]=l,S[1][P+1]=c;var A=[{x:x.apply(null,S[0]),y:x.apply(null,S[1])},{x:_.apply(null,S[0]),y:_.apply(null,S[1])}];return r.cachesBoundsOfCurve&&(r.boundsOfCurveCache[u]=A),A},r.util.getPointOnPath=function(t,e,n){n||(n=p(t));for(var i=0;e-n[i].length>0&&i<n.length-2;)e-=n[i].length,i++;var a,o=n[i],s=e/o.length,l=o.command,c=t[i];switch(l){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(a=new r.Point(o.x,o.y).lerp(new r.Point(o.destX,o.destY),s)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),a;case"L":return(a=new r.Point(o.x,o.y).lerp(new r.Point(c[1],c[2]),s)).angle=Math.atan2(c[2]-o.y,c[1]-o.x),a;case"C":case"Q":return d(o,e)}},r.util.transformPath=function(t,e,n){return n&&(e=r.util.multiplyTransformMatrices(e,[1,0,0,1,-n.x,-n.y])),t.map((function(t){for(var n=t.slice(0),i={},a=1;a<t.length-1;a+=2)i.x=t[a],i.y=t[a+1],i=r.util.transformPoint(i,e),n[a]=i.x,n[a+1]=i.y;return n}))}}(),function(){var t=Array.prototype.slice;function e(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}r.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(e,n){for(var i=t.call(arguments,2),r=[],a=0,o=e.length;a<o;a++)r[a]=i.length?e[a][n].apply(e[a],i):e[a][n].call(e[a]);return r},min:function(t,n){return e(t,n,(function(t,e){return t<e}))},max:function(t,n){return e(t,n,(function(t,e){return t>=e}))}}}(),function(){function t(e,n,i){if(i)if(!r.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var a=0,o=n.length;a<o;a++)e[a]=t({},n[a],i)}else if(n&&"object"===typeof n)for(var s in n)"canvas"===s||"group"===s?e[s]=null:n.hasOwnProperty(s)&&(e[s]=t({},n[s],i));else e=n;else for(var s in n)e[s]=n[s];return e}r.util.object={extend:t,clone:function(e,n){return t({},e,n)}},r.util.object.extend(r.util,r.Observable)}(),function(){function t(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}r.util.string={camelize:function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var n,i=0,r=[];for(i=0;i<e.length;i++)!1!==(n=t(e,i))&&r.push(n);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),i=function(t,e,i){for(var r in e)r in t.prototype&&"function"===typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function a(){}function o(e){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}r.util.createClass=function(){var n=null,r=t.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof r[0]&&(n=r.shift()),s.superclass=n,s.subclasses=[],n&&(a.prototype=n.prototype,s.prototype=new a,n.subclasses.push(s));for(var l=0,c=r.length;l<c;l++)i(s,r[l],n);return s.prototype.initialize||(s.prototype.initialize=e),s.prototype.constructor=s,s.prototype.callSuper=o,s}}(),function(){var t=!!r.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];r.util.addListener=function(e,n,i,r){e&&e.addEventListener(n,i,!t&&r)},r.util.removeListener=function(e,n,i,r){e&&e.removeEventListener(n,i,!t&&r)},r.util.getPointer=function(t){var e=t.target,n=r.util.getScrollLeftTop(e),i=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:i.clientX+n.left,y:i.clientY+n.top}},r.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||"touch"===t.pointerType}}(),function(){var t=r.document.createElement("div"),e="string"===typeof t.style.opacity,n="string"===typeof t.style.filter,i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(t){return t};e?a=function(t,e){return t.style.opacity=e,t}:n&&(a=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),i.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(i,e)):n.filter+=" alpha(opacity="+100*e+")",t}),r.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?a(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)if("opacity"===i)a(t,e[i]);else{var r="float"===i||"cssFloat"===i?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":i;n.setProperty(r,e[i])}return t}}(),function(){var t=Array.prototype.slice;var e,n,i=function(e){return t.call(e,0)};try{e=i(r.document.childNodes)instanceof Array}catch(s){}function a(t,e){var n=r.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function o(t){for(var e=0,n=0,i=r.document.documentElement,a=r.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===r.document?(e=a.scrollLeft||i.scrollLeft||0,n=a.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:n}}e||(i=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),n=r.document.defaultView&&r.document.defaultView.getComputedStyle?function(t,e){var n=r.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=r.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";r.util.makeElementUnselectable=function(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=r.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t},r.util.makeElementSelectable=function(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}}(),r.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},r.util.getById=function(t){return"string"===typeof t?r.document.getElementById(t):t},r.util.toArray=i,r.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},r.util.makeElement=a,r.util.wrapElement=function(t,e,n){return"string"===typeof e&&(e=a(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},r.util.getScrollLeftTop=o,r.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,a={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return s;for(var c in l)s[l[c]]+=parseInt(n(t,c),10)||0;return e=r.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(a=t.getBoundingClientRect()),i=o(t),{left:a.left+i.left-(e.clientLeft||0)+s.left,top:a.top+i.top-(e.clientTop||0)+s.top}},r.util.getNodeCanvas=function(t){var e=r.jsdomImplForWrapper(t);return e._canvas||e._image},r.util.cleanUpJsdomNode=function(t){if(r.isLikelyNode){var e=r.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}r.util.request=function(e,n){n||(n={});var i=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},o=new r.window.XMLHttpRequest,s=n.body||n.parameters;return o.onreadystatechange=function(){4===o.readyState&&(a(o),o.onreadystatechange=t)},"GET"===i&&(s=null,"string"===typeof n.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,n.parameters))),o.open(i,e,!0),"POST"!==i&&"PUT"!==i||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o}}(),r.log=console.log,r.warn=console.warn,function(){var t=r.util.object.extend,e=r.util.object.clone,n=[];function i(){return!1}function a(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}r.util.object.extend(n,{cancelAll:function(){var t=this.splice(0);return t.forEach((function(t){t.cancel()})),t},cancelByCanvas:function(t){if(!t)return[];var e=this.filter((function(e){return"object"===typeof e.target&&e.target.canvas===t}));return e.forEach((function(t){t.cancel()})),e},cancelByTarget:function(t){var e=this.findAnimationsByTarget(t);return e.forEach((function(t){t.cancel()})),e},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(t){return this.find((function(e){return e.cancel===t}))},findAnimationsByTarget:function(t){return t?this.filter((function(e){return e.target===t})):[]}});var o=r.window.requestAnimationFrame||r.window.webkitRequestAnimationFrame||r.window.mozRequestAnimationFrame||r.window.oRequestAnimationFrame||r.window.msRequestAnimationFrame||function(t){return r.window.setTimeout(t,1e3/60)},s=r.window.cancelAnimationFrame||r.window.clearTimeout;function l(){return o.apply(r.window,arguments)}r.util.animate=function(n){n||(n={});var o,s=!1,c=function(){var t=r.runningAnimations.indexOf(o);return t>-1&&r.runningAnimations.splice(t,1)[0]};return o=t(e(n),{cancel:function(){return s=!0,c()},currentValue:"startValue"in n?n.startValue:0,completionRate:0,durationRate:0}),r.runningAnimations.push(o),l((function(t){var e,r=t||+new Date,u=n.duration||500,h=r+u,f=n.onChange||i,d=n.abort||i,p=n.onComplete||i,g=n.easing||a,m="startValue"in n&&n.startValue.length>0,v="startValue"in n?n.startValue:0,y="endValue"in n?n.endValue:100,b=n.byValue||(m?v.map((function(t,e){return y[e]-v[e]})):y-v);n.onStart&&n.onStart(),function t(n){var i=(e=n||+new Date)>h?u:e-r,a=i/u,x=m?v.map((function(t,e){return g(i,v[e],b[e],u)})):g(i,v,b,u),_=m?Math.abs((x[0]-v[0])/b[0]):Math.abs((x-v)/b);if(o.currentValue=m?x.slice():x,o.completionRate=_,o.durationRate=a,!s){if(!d(x,_,a))return e>h?(o.currentValue=m?y.slice():y,o.completionRate=1,o.durationRate=1,f(m?y.slice():y,1,1),p(y,1,1),void c()):(f(x,_,a),void l(t));c()}}(r)})),o.cancel},r.util.requestAnimFrame=l,r.util.cancelAnimFrame=function(){return s.apply(r.window,arguments)},r.runningAnimations=n}(),function(){function t(t,e,n){var i="rgba("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return i+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1),i+=")"}r.util.animateColor=function(e,n,i,a){var o=new r.Color(e).getSource(),s=new r.Color(n).getSource(),l=a.onComplete,c=a.onChange;return a=a||{},r.util.animate(r.util.object.extend(a,{duration:i||500,startValue:o,endValue:s,byValue:s,easing:function(e,n,i,r){return t(n,i,a.colorEasing?a.colorEasing(e,r):1-Math.cos(e/r*(Math.PI/2)))},onComplete:function(e,n,i){if(l)return l(t(s,s,0),n,i)},onChange:function(e,n,i){if(c){if(Array.isArray(e))return c(t(e,e,0),n,i);c(e,n,i)}}}))}}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}r.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,a){var o=0;return 0===n?i:1===(n/=a)?i+r:(o||(o=.3*a),-e(t(r,r,o,1.70158),n,a)+i)},easeOutElastic:function(e,n,i,r){var a=0;if(0===e)return n;if(1===(e/=r))return n+i;a||(a=.3*r);var o=t(i,i,a,1.70158);return o.a*Math.pow(2,-10*e)*Math.sin((e*r-o.s)*(2*Math.PI)/o.p)+o.c+n},easeInOutElastic:function(n,i,r,a){var o=0;if(0===n)return i;if(2===(n/=a/2))return i+r;o||(o=a*(.3*1.5));var s=t(r,r,o,1.70158);return n<1?-.5*e(s,n,a)+i:s.a*Math.pow(2,-10*(n-=1))*Math.sin((n*a-s.s)*(2*Math.PI)/s.p)*.5+s.c+i},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,a){return t<a/2?.5*n(2*t,0,r,a)+e:.5*i(2*t-a,0,r,a)+.5*r+e}}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,a=e.util.parseUnit,o=e.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",u="clip-path";function h(t){return t in s?s[t]:t}function f(t,n,i,r){var s,l=Array.isArray(n);if("fill"!==t&&"stroke"!==t||"none"!==n){if("strokeUniform"===t)return"non-scaling-stroke"===n;if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=i&&i.transformMatrix?o(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),i&&"undefined"!==typeof i.opacity&&(n*=i.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)s=a(n,r)/r*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(n="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return n;if("imageSmoothing"===t)return"optimizeQuality"===n;s=l?n.map(a):a(n,r)}}else n="";return!l&&isNaN(s)?n:s}function d(t){return new RegExp("^("+t.join("|")+")\\b","i")}function p(t,e){var n,i,r,a,o=[];for(r=0,a=e.length;r<a;r++)n=e[r],i=t.getElementsByTagName(n),o=o.concat(Array.prototype.slice.call(i));return o}function g(t,e){var n,i=!0;return(n=m(t,e.pop()))&&e.length&&(i=function(t,e){var n,i=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),i=m(t=t.parentNode,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function m(t,e){var n,i,r=t.nodeName,a=t.getAttribute("class"),o=t.getAttribute("id");if(n=new RegExp("^"+r,"i"),e=e.replace(n,""),o&&e.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),a&&e.length)for(i=(a=a.split(" ")).length;i--;)n=new RegExp("\\."+a[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function v(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,a,o=t.getElementsByTagName("*");for(r=0,a=o.length;r<a;r++)if(e===(i=o[r]).getAttribute("id"))return i}e.svgValidTagNamesRegEx=d(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=d(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=d(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=d(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}var n=e.iMatrix,i=e.reNum,r=e.commaWsp,a="(?:"+("(?:(matrix)\\s*\\(\\s*("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+")"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\))")+")",o=new RegExp("^\\s*(?:"+("(?:"+a+"(?:"+r+"*"+a+")*)")+"?)\\s*$"),s=new RegExp(a,"g");return function(i){var r=n.concat(),l=[];if(!i||i&&!o.test(i))return r;i.replace(s,(function(i){var o=new RegExp(a).exec(i).filter((function(t){return!!t})),s=o[1],c=o.slice(2).map(parseFloat);switch(s){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),a=0,o=0;3===n.length&&(a=n[1],o=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=a-(i*a-r*o),t[5]=o-(r*a+i*o)}(r,c);break;case"scale":!function(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}(r,c);break;case"skewX":t(r,c,2);break;case"skewY":t(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=n.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var y=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function b(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var n,i,r,o,s,l,c=t.getAttribute("viewBox"),u=1,h=1,f=t.getAttribute("width"),d=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!c||!(c=c.match(y)),b=!f||!d||"100%"===f||"100%"===d,x=v&&b,_={},w="",C=0,S=0;if(_.width=0,_.height=0,_.toBeParsed=x,v&&(p||g)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(w=" translate("+a(p)+" "+a(g)+") ",s=(t.getAttribute("transform")||"")+w,t.setAttribute("transform",s),t.removeAttribute("x"),t.removeAttribute("y")),x)return _;if(v)return _.width=a(f),_.height=a(d),_;if(n=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),o=parseFloat(c[4]),_.minX=n,_.minY=i,_.viewBoxWidth=r,_.viewBoxHeight=o,b?(_.width=r,_.height=o):(_.width=a(f),_.height=a(d),u=_.width/r,h=_.height/o),"none"!==(m=e.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(h=u=u>h?h:u),"slice"===m.meetOrSlice&&(h=u=u>h?u:h),C=_.width-r*u,S=_.height-o*u,"Mid"===m.alignX&&(C/=2),"Mid"===m.alignY&&(S/=2),"Min"===m.alignX&&(C=0),"Min"===m.alignY&&(S=0)),1===u&&1===h&&0===n&&0===i&&0===p&&0===g)return _;if((p||g)&&"#document"!==t.parentNode.nodeName&&(w=" translate("+a(p)+" "+a(g)+") "),s=w+" matrix("+u+" 0 0 "+h+" "+(n*u+C)+" "+(i*h+S)+") ","svg"===t.nodeName){for(l=t.ownerDocument.createElementNS(e.svgNS,"g");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else(l=t).removeAttribute("x"),l.removeAttribute("y"),s=l.getAttribute("transform")+s;return l.setAttribute("transform",s),_}function x(t,e){var n="xlink:href",i=v(t,e.getAttribute(n).slice(1));if(i&&i.getAttribute(n)&&x(t,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(t){i&&!e.hasAttribute(t)&&i.hasAttribute(t)&&e.setAttribute(t,i.getAttribute(t))})),!e.children.length)for(var r=i.cloneNode(!0);r.firstChild;)e.appendChild(r.firstChild);e.removeAttribute(n)}e.parseSVGDocument=function(t,n,r,a){if(t){!function(t){for(var n=p(t,["use","svg:use"]),i=0;n.length&&i<n.length;){var r=n[i],a=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===a)return;var o,s,l,c,u=a.slice(1),h=r.getAttribute("x")||0,f=r.getAttribute("y")||0,d=v(t,u).cloneNode(!0),g=(d.getAttribute("transform")||"")+" translate("+h+", "+f+")",m=n.length,y=e.svgNS;if(b(d),/^svg$/i.test(d.nodeName)){var x=d.ownerDocument.createElementNS(y,"g");for(s=0,c=(l=d.attributes).length;s<c;s++)o=l.item(s),x.setAttributeNS(y,o.nodeName,o.nodeValue);for(;d.firstChild;)x.appendChild(d.firstChild);d=x}for(s=0,c=(l=r.attributes).length;s<c;s++)"x"!==(o=l.item(s)).nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?g=o.nodeValue+" "+g:d.setAttribute(o.nodeName,o.nodeValue));d.setAttribute("transform",g),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),r.parentNode.replaceChild(d,r),n.length===m&&i++}}(t);var o,s,l=e.Object.__uid++,c=b(t),u=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=a&&a.crossOrigin,c.svgUid=l,0===u.length&&e.isLikelyNode){var h=[];for(o=0,s=(u=t.selectNodes('//*[name(.)!="svg"]')).length;o<s;o++)h[o]=u[o];u=h}var f=u.filter((function(t){return b(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)}));if(!f||f&&!f.length)n&&n([],{});else{var d={};u.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var n=t.getAttribute("id");d[n]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=d,e.parseElements(f,(function(t,i){n&&(n(t,c,i,u),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])}),i(c),r,a)}}};var _=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(_);if(n){var i=n[1],r=n[3],o=n[4],s=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=a(o)),l&&(e.fontFamily=l),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,n=p(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,r={};for(i=n.length;i--;)(e=n[i]).getAttribute("xlink:href")&&x(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,i,o){if(t){var s,d,p,m={};"undefined"===typeof o&&(o=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(m=e.parseAttributes(t.parentNode,i,o));var v=i.reduce((function(e,n){return(s=t.getAttribute(n))&&(e[n]=s),e}),{}),y=n(function(t,n){var i={};for(var r in e.cssRules[n])if(g(t,r.split(" ")))for(var a in e.cssRules[n][r])i[a]=e.cssRules[n][r][a];return i}(t,o),e.parseStyleAttribute(t));v=n(v,y),y[u]&&t.setAttribute(u,y[u]),d=p=m.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,v[c]&&(v[c]=d=a(v[c],p));var b,x,_={};for(var w in v)x=f(b=h(w),v[w],m,d),_[b]=x;_&&_.font&&e.parseFontDeclaration(_.font,_);var C=n(m,_);return e.svgValidParentsRegEx.test(t.nodeName)?C:function(t){for(var n in l)if("undefined"!==typeof t[l[n]]&&""!==t[n]){if("undefined"===typeof t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[l[n]],2)).toRgba()}}return t}(C)}},parseElements:function(t,n,i,r,a){new e.ElementsParser(t,n,i,r,a).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"===typeof n?function(t,e){var n,i;t.replace(/;\s*$/,"").split(";").forEach((function(t){var r=t.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i}))}(n,e):function(t,e){var n,i;for(var r in t)"undefined"!==typeof t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r=t.getElementsByTagName("style"),a={};for(n=0,i=r.length;n<i;n++){var o=r[n].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.split("}").filter((function(t){return t.trim()})).forEach((function(t){var r=t.split("{"),o={},s=r[1].trim().split(";").filter((function(t){return t.trim()}));for(n=0,i=s.length;n<i;n++){var l=s[n].split(":"),c=l[0].trim(),u=l[1].trim();o[c]=u}(t=r[0].trim()).split(",").forEach((function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(a[t]?e.util.object.extend(a[t],o):a[t]=e.util.object.clone(o))}))}))}return a},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:function(t){var a=t.responseXML;if(!a||!a.documentElement)return n&&n(null),!1;e.parseSVGDocument(a.documentElement,(function(t,e,i,r){n&&n(t,e,i,r)}),i,r)}})},loadSVGFromString:function(t,n,i,r){var a=(new e.window.DOMParser).parseFromString(t.trim(),"text/xml");e.parseSVGDocument(a.documentElement,(function(t,e,i,r){n(t,e,i,r)}),i,r)}})}(e),r.ElementsParser=function(t,e,n,i,r,a){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},(i=r.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},i.createObjects=function(){var t=this;this.elements.forEach((function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)}))},i.findTag=function(t){return r[r.util.string.capitalize(t.tagName.replace("svg:",""))]},i.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(i){r.log(i)}else this.checkIfDone()},i.createCallback=function(t,e){var n=this;return function(i){var a;n.resolveGradient(i,e,"fill"),n.resolveGradient(i,e,"stroke"),i instanceof r.Image&&i._originalElement&&(a=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(a),n.resolveClipPath(i,e),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},i.extractPropertyDefinition=function(t,e,n){var i=t[e],a=this.regexUrl;if(a.test(i)){a.lastIndex=0;var o=a.exec(i)[1];return a.lastIndex=0,r[n][this.svgUid][o]}},i.resolveGradient=function(t,e,n){var i=this.extractPropertyDefinition(t,n,"gradientDefs");if(i){var a=e.getAttribute(n+"-opacity"),o=r.Gradient.fromElement(i,t,a,this.options);t.set(n,o)}},i.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},i.resolveClipPath=function(t,e){var n,i,a,o,s=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(s){a=[],i=r.util.invertTransform(t.calcTransformMatrix());for(var l=s[0].parentNode,c=e;c.parentNode&&c.getAttribute("clip-path")!==t.clipPath;)c=c.parentNode;c.parentNode.appendChild(l);for(var u=0;u<s.length;u++)n=s[u],this.findTag(n).fromElement(n,this.createClipPathCallback(t,a),this.options);s=1===a.length?a[0]:new r.Group(a),o=r.util.multiplyTransformMatrices(i,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,c);var h=r.util.qrDecompose(o);s.flipX=!1,s.flipY=!1,s.set("scaleX",h.scaleX),s.set("scaleY",h.scaleY),s.angle=h.angle,s.skewX=h.skewX,s.skewY=0,s.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),t.clipPath=s}else delete t.clipPath},i.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))},function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,a){var o,s=(a.x-r.x)*(t.y-r.y)-(a.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(a.y-r.y)*(i.x-t.x)-(a.x-r.x)*(i.y-t.y);if(0!==c){var u=s/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(o=new n("Intersection")).appendPoint(new e.Point(t.x+u*(i.x-t.x),t.y+u*(i.y-t.y))):o=new n}else o=new n(0===s||0===l?"Coincident":"Parallel");return o},e.Intersection.intersectLinePolygon=function(t,e,i){var r,a,o,s,l=new n,c=i.length;for(s=0;s<c;s++)r=i[s],a=i[(s+1)%c],o=n.intersectLineLine(t,e,r,a),l.appendPoints(o.points);return l.points.length>0&&(l.status="Intersection"),l},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,a=t.length;for(i=0;i<a;i++){var o=t[i],s=t[(i+1)%a],l=n.intersectLinePolygon(o,s,e);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var a=i.min(r),o=i.max(r),s=new e.Point(o.x,a.y),l=new e.Point(a.x,o.y),c=n.intersectLinePolygon(a,s,t),u=n.intersectLinePolygon(s,o,t),h=n.intersectLinePolygon(o,l,t),f=n.intersectLinePolygon(l,a,t),d=new n;return d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(h.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){t/=255,n/=255,i/=255;var r,a,o,s=e.util.array.max([t,n,i]),l=e.util.array.min([t,n,i]);if(o=(s+l)/2,s===l)r=a=0;else{var c=s-l;switch(a=o>.5?c/(2-s-l):c/(s+l),s){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return[Math.round(360*r),Math.round(100*a),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?"0"+t:t,e=1===(e=i[1].toString(16)).length?"0"+e:e,n=1===(n=i[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),a=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*a[e]+.5*o[e]));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),a=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(a,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,a,o,s=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)r=a=o=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;r=i(h,u,s+1/3),a=i(h,u,s),o=i(h,u,s-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*o),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,a=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),s=i?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(a,16),parseInt(o,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],i=["ns","nesw","ew","nwse"],r={},a="left",o="top",s="right",l="bottom",c="center",u={top:l,bottom:o,left:s,right:a,center:c},h=e.util.radiansToDegrees,f=Math.sign||function(t){return(t>0)-(t<0)||+t};function d(t,e){var n=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(n%360/45)}function p(t,n){var i=n.transform.target,r=i.canvas,a=e.util.object.clone(n);a.target=i,r&&r.fire("object:"+t,a),i.fire(t,n)}function g(t,e){var n=e.canvas,i=t[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function m(t){return t.originX===c&&t.originY===c}function v(t,e,n){var i=t.lockScalingX,r=t.lockScalingY;return!(!i||!r)||(!(e||!i&&!r||!n)||(!(!i||"x"!==e)||!(!r||"y"!==e)))}function y(t,e,n,i){return{e:t,transform:e,pointer:{x:n,y:i}}}function b(t){return function(e,n,i,r){var a=n.target,o=a.getCenterPoint(),s=a.translateToOriginPoint(o,n.originX,n.originY),l=t(e,n,i,r);return a.setPositionByOrigin(s,n.originX,n.originY),l}}function x(t,e){return function(n,i,r,a){var o=e(n,i,r,a);return o&&p(t,y(n,i,r,a)),o}}function _(t,n,i,r,a){var o=t.target,s=o.controls[t.corner],l=o.canvas.getZoom(),c=o.padding/l,u=o.toLocalPoint(new e.Point(r,a),n,i);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=s.offsetX,u.y-=s.offsetY,u}function w(t){return t.flipX!==t.flipY}function C(t,e,n,i,r){if(0!==t[e]){var a=r/t._getTransformedDimensions()[i]*t[n];t.set(n,a)}}function S(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(0,c.skewY),f=_(e,e.originX,e.originY,n,i),d=Math.abs(2*f.x)-u.x,p=c.skewX;d<2?r=0:(r=h(Math.atan2(d/c.scaleX,u.y/c.scaleY)),e.originX===a&&e.originY===l&&(r=-r),e.originX===s&&e.originY===o&&(r=-r),w(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",r),C(c,"skewY","scaleY","y",m)}return g}function k(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(c.skewX,0),f=_(e,e.originX,e.originY,n,i),d=Math.abs(2*f.y)-u.y,p=c.skewY;d<2?r=0:(r=h(Math.atan2(d/c.scaleY,u.x/c.scaleX)),e.originX===a&&e.originY===l&&(r=-r),e.originX===s&&e.originY===o&&(r=-r),w(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",r),C(c,"skewX","scaleX","x",m)}return g}function T(t,e,n,i,r){r=r||{};var a,o,s,l,c,h,d=e.target,p=d.lockScalingX,y=d.lockScalingY,b=r.by,x=g(t,d),w=v(d,b,x),C=e.gestureScale;if(w)return!1;if(C)o=e.scaleX*C,s=e.scaleY*C;else{if(a=_(e,e.originX,e.originY,n,i),c="y"!==b?f(a.x):1,h="x"!==b?f(a.y):1,e.signX||(e.signX=c),e.signY||(e.signY=h),d.lockScalingFlip&&(e.signX!==c||e.signY!==h))return!1;if(l=d._getTransformedDimensions(),x&&!b){var S=Math.abs(a.x)+Math.abs(a.y),k=e.original,T=S/(Math.abs(l.x*k.scaleX/d.scaleX)+Math.abs(l.y*k.scaleY/d.scaleY));o=k.scaleX*T,s=k.scaleY*T}else o=Math.abs(a.x*d.scaleX/l.x),s=Math.abs(a.y*d.scaleY/l.y);m(e)&&(o*=2,s*=2),e.signX!==c&&"y"!==b&&(e.originX=u[e.originX],o*=-1,e.signX=c),e.signY!==h&&"x"!==b&&(e.originY=u[e.originY],s*=-1,e.signY=h)}var O=d.scaleX,j=d.scaleY;return b?("x"===b&&d.set("scaleX",o),"y"===b&&d.set("scaleY",s)):(!p&&d.set("scaleX",o),!y&&d.set("scaleY",s)),O!==d.scaleX||j!==d.scaleY}r.scaleCursorStyleHandler=function(t,e,i){var r=g(t,i),a="";if(0!==e.x&&0===e.y?a="x":0===e.x&&0!==e.y&&(a="y"),v(i,a,r))return"not-allowed";var o=d(i,e);return n[o]+"-resize"},r.skewCursorStyleHandler=function(t,e,n){var r="not-allowed";if(0!==e.x&&n.lockSkewingY)return r;if(0!==e.y&&n.lockSkewingX)return r;var a=d(n,e)%4;return i[a]+"-resize"},r.scaleSkewCursorStyleHandler=function(t,e,n){return t[n.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,n):r.scaleCursorStyleHandler(t,e,n)},r.rotationWithSnapping=x("rotating",b((function(t,e,n,i){var r=e,a=r.target,o=a.translateToOriginPoint(a.getCenterPoint(),r.originX,r.originY);if(a.lockRotation)return!1;var s,l=Math.atan2(r.ey-o.y,r.ex-o.x),c=Math.atan2(i-o.y,n-o.x),u=h(c-l+r.theta);if(a.snapAngle>0){var f=a.snapAngle,d=a.snapThreshold||f,p=Math.ceil(u/f)*f,g=Math.floor(u/f)*f;Math.abs(u-g)<d?u=g:Math.abs(u-p)<d&&(u=p)}return u<0&&(u=360+u),u%=360,s=a.angle!==u,a.angle=u,s}))),r.scalingEqually=x("scaling",b((function(t,e,n,i){return T(t,e,n,i)}))),r.scalingX=x("scaling",b((function(t,e,n,i){return T(t,e,n,i,{by:"x"})}))),r.scalingY=x("scaling",b((function(t,e,n,i){return T(t,e,n,i,{by:"y"})}))),r.scalingYOrSkewingX=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,n,i):r.scalingY(t,e,n,i)},r.scalingXOrSkewingY=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,n,i):r.scalingX(t,e,n,i)},r.changeWidth=x("resizing",b((function(t,e,n,i){var r=e.target,a=_(e,e.originX,e.originY,n,i),o=r.strokeWidth/(r.strokeUniform?r.scaleX:1),s=m(e)?2:1,l=r.width,c=Math.abs(a.x*s/r.scaleX)-o;return r.set("width",Math.max(c,0)),l!==c}))),r.skewHandlerX=function(t,e,n,i){var r,l=e.target,u=l.skewX,h=e.originY;return!l.lockSkewingX&&(0===u?r=_(e,c,c,n,i).x>0?a:s:(u>0&&(r=h===o?a:s),u<0&&(r=h===o?s:a),w(l)&&(r=r===a?s:a)),e.originX=r,x("skewing",b(S))(t,e,n,i))},r.skewHandlerY=function(t,e,n,i){var r,s=e.target,u=s.skewY,h=e.originX;return!s.lockSkewingY&&(0===u?r=_(e,c,c,n,i).y>0?o:l:(u>0&&(r=h===a?o:l),u<0&&(r=h===a?l:o),w(s)&&(r=r===o?l:o)),e.originY=r,x("skewing",b(k))(t,e,n,i))},r.dragHandler=function(t,e,n,i){var r=e.target,a=n-e.offsetX,o=i-e.offsetY,s=!r.get("lockMovementX")&&r.left!==a,l=!r.get("lockMovementY")&&r.top!==o;return s&&r.set("left",a),l&&r.set("top",o),(s||l)&&p("moving",y(t,e,n,i)),s||l},r.scaleOrSkewActionName=function(t,e,n){var i=t[n.canvas.altActionKey];return 0===e.x?i?"skewX":"scaleY":0===e.y?i?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(t,e,n){return n.lockRotation?"not-allowed":e.cursorStyle},r.fireEvent=p,r.wrapWithFixedAnchor=b,r.wrapWithFireEvent=x,r.getLocalPoint=_,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians,i=e.controlsUtils;i.renderCircleControl=function(t,e,n,i,r){i=i||{};var a,o=this.sizeX||i.cornerSize||r.cornerSize,s=this.sizeY||i.cornerSize||r.cornerSize,l="undefined"!==typeof i.transparentCorners?i.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),h=e,f=n;t.save(),t.fillStyle=i.cornerColor||r.cornerColor,t.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,o>s?(a=o,t.scale(1,s/o),f=n*o/s):s>o?(a=s,t.scale(o/s,1),h=e*s/o):a=o,t.lineWidth=1,t.beginPath(),t.arc(h,f,a/2,0,2*Math.PI,!1),t[c](),u&&t.stroke(),t.restore()},i.renderSquareControl=function(t,e,i,r,a){r=r||{};var o=this.sizeX||r.cornerSize||a.cornerSize,s=this.sizeY||r.cornerSize||a.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:a.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||a.cornerStrokeColor),h=o/2,f=s/2;t.save(),t.fillStyle=r.cornerColor||a.cornerColor,t.strokeStyle=r.cornerStrokeColor||a.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(n(a.angle)),t[c+"Rect"](-h,-f,o,s),u&&t.strokeRect(-h,-f,o,s),t.restore()}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Control=function(t){for(var e in t)this[e]=t[e]},e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var n=t._controlsVisibility;return n&&"undefined"!==typeof n[e]?n[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,n){return e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},n)},calcCornerCoords:function(t,n,i,r,a){var o,s,l,c,u=a?this.touchSizeX:this.sizeX,h=a?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){var f=Math.atan2(h,u),d=Math.sqrt(u*u+h*h)/2,p=f-e.util.degreesToRadians(t),g=Math.PI/2-f-e.util.degreesToRadians(t);o=d*e.util.cos(p),s=d*e.util.sin(p),l=d*e.util.cos(g),c=d*e.util.sin(g)}else{d=.7071067812*(u&&h?u:n);p=e.util.degreesToRadians(45-t);o=l=d*e.util.cos(p),s=c=d*e.util.sin(p)}return{tl:{x:i-c,y:r-l},tr:{x:i+o,y:r-s},bl:{x:i-o,y:r+s},br:{x:i+c,y:r+l}}},render:function(t,n,i,r,a){if("circle"===((r=r||{}).cornerStyle||a.cornerStyle))e.controlsUtils.renderCircleControl.call(this,t,n,i,r,a);else e.controlsUtils.renderSquareControl.call(this,t,n,i,r,a)}}}(e),function(){function t(t,e){var n,i,a,o,s=t.getAttribute("style"),l=t.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,s){var c=s.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),o=c.length;o--;){var u=c[o].split(/\s*:\s*/),h=u[0].trim(),f=u[1].trim();"stop-color"===h?n=f:"stop-opacity"===h&&(a=f)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),a||(a=t.getAttribute("stop-opacity")),i=(n=new r.Color(n)).getAlpha(),a=isNaN(parseFloat(a))?1:parseFloat(a),a*=i*e,{offset:l,color:n.toRgb(),opacity:a}}var e=r.util.object.clone;r.Gradient=r.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach((function(e){n[e]=t[e]})),this.id?this.id+="_"+r.Object.__uid++:this.id=r.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new r.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return r.util.populateWithProperties(this,e,t),e},toSVG:function(t,n){var i,a,o,s,l=e(this.coords,!0),c=(n=n||{},e(this.colorStops,!0)),u=l.r1>l.r2,h=this.gradientTransform?this.gradientTransform.concat():r.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!n.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===g?(f/=t.width,d/=t.height):(f+=t.width/2,d+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(f-=t.pathOffset.x,d-=t.pathOffset.y),h[4]-=f,h[5]-=d,s='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',s+=' gradientTransform="'+(p?n.additionalTransform+" ":"")+r.util.matrixToSVG(h)+'" ',"linear"===this.type?o=["<linearGradient ",s,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",s,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for((c=c.concat()).reverse(),i=0,a=c.length;i<a;i++)c[i].offset=1-c[i].offset;var m=Math.min(l.r1,l.r2);if(m>0){var v=m/Math.max(l.r1,l.r2);for(i=0,a=c.length;i<a;i++)c[i].offset+=v*(1-c[i].offset)}}for(i=0,a=c.length;i<a;i++){var y=c[i];o.push("<stop ",'offset="',100*y.offset+"%",'" style="stop-color:',y.color,"undefined"!==typeof y.opacity?";stop-opacity: "+y.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(t){var e,n,i,a=r.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(a.x1,a.y1,a.x2,a.y2):"radial"===this.type&&(e=t.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),n=0,i=this.colorStops.length;n<i;n++){var o=this.colorStops[n].color,s=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof s&&(o=new r.Color(o).setAlpha(s).toRgba()),e.addColorStop(l,o)}return e}}}),r.util.object.extend(r.Gradient,{fromElement:function(e,n,i,a){var o=parseFloat(i)/(/%$/.test(i)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var s,l,c,u,h=e.getElementsByTagName("stop"),f="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",d=e.getAttribute("gradientTransform")||"",p=[],g=0,m=0;for("linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(s="linear",l=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e)):(s="radial",l=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),c=h.length;c--;)p.push(t(h[c],o));return u=r.parseTransformAttribute(d),function(t,e,n,i){var r,a;Object.keys(e).forEach((function(t){"Infinity"===(r=e[t])?a=1:"-Infinity"===r?a=0:(a=parseFloat(e[t],10),"string"===typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(a*=.01,"pixels"===i&&("x1"!==t&&"x2"!==t&&"r2"!==t||(a*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(a*=n.viewBoxHeight||n.height)))),e[t]=a}))}(0,l,a,f),"pixels"===f&&(g=-n.left,m=-n.top),new r.Gradient({id:e.getAttribute("id"),type:s,coords:l,colorStops:p,gradientUnits:f,gradientTransform:u,offsetX:g,offsetY:m})}})}(),function(){"use strict";var t=r.util.toFixed;r.Pattern=r.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=r.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else{var n=this;this.source=r.util.createImage(),r.util.loadImage(t.source,(function(t,i){n.source=t,e&&e(n,i)}),null,this.crossOrigin)}},toObject:function(e){var n,i,a=r.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,a),offsetY:t(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},r.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,a=this.offsetY/t.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,a&&(i+=Math.abs(a))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+a+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"===typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,r=40,a=e.Object.NUM_FRACTION_DIGITS,o=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),s=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(o.x)+this.blur)/t.width,a)+20,r=100*n((Math.abs(o.y)+this.blur)/t.height,a)+20),t.flipX&&(o.x*=-1),t.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,a)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(o.x,a)+'" dy="'+n(o.y,a)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==n[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(r.StaticCanvas)r.warn("fabric.StaticCanvas is already defined.");else{var t=r.util.object.extend,e=r.util.getElementOffset,n=r.util.removeFromArray,i=r.util.toFixed,a=r.util.transformPoint,o=r.util.invertTransform,s=r.util.getNodeCanvas,l=r.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");r.StaticCanvas=r.util.createClass(r.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:r.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return r.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,r.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=r.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,n,i){return"string"===typeof e?r.util.loadImage(e,(function(e,a){if(e){var o=new r.Image(e,i);this[t]=o,o.canvas=this}n&&n(e,a)}),this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e,!1)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=l();if(!t)throw c;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=r.util.getById(t)||this._createCanvasElement(),r.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject,a=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)(e=this._objects[n]).group||e.setCoords(!0);return r&&r.setCoords(),a&&a.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=a(t,o(this.viewportTransform)),i[0]=e,i[3]=e;var r=a(t,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new r.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new r.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=r.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=o(this.viewportTransform);return t.tl=a({x:0,y:0},i),t.br=a({x:e,y:n},i),t.tr=new r.Point(t.br.x,t.tl.y),t.bl=new r.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),r.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],i=this[e+"Image"],r=this.viewportTransform,a=this[e+"Vpt"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,a&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var o=n.gradientTransform||n.patternTransform;o&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),t.fill(),t.restore()}i&&(t.save(),a&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new r.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new r.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new r.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new r.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=o(this.viewportTransform);return a(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i=this.clipPath,a={version:r.version,objects:this._toObjects(e,n)};return i&&!i.excludeFromExport&&(a.clipPath=this._toObject(this.clipPath,e,n)),t(a,this.__serializeBgOverlay(e,n)),r.util.populateWithProperties(this,a,n),a},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){return this._toObject(n,t,e)}),this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage,a=this.backgroundColor,o=this.overlayColor;return a&&a.toObject?a.excludeFromExport||(n.background=a.toObject(e)):a&&(n.background=a),o&&o.toObject?o.excludeFromExport||(n.overlay=o.toObject(e)):o&&(n.overlay=o),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,a=e.width||this.width,o=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',l=r.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+i(-n[4]/n[0],l)+" "+i(-n[5]/n[3],l)+" "+i(this.width/n[0],l)+" "+i(this.height/n[3],l)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',a,'" ','height="',o,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",r.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+r.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map((function(e){var n=t[e+"Color"];if(n&&n.toLive){var i=t[e+"Vpt"],a=t.viewportTransform,o={width:t.width/(i?a[0]:1),height:t.height/(i?a[3]:1)};return n.toSVG(o,{additionalTransform:i?r.util.matrixToSVG(a):""})}})).join("")},createSVGFontFacesMarkup:function(){var t,e,n,i,a,o,s,l,c="",u={},h=r.fontPaths,f=[];for(this._objects.forEach((function t(e){f.push(e),e._objects&&e._objects.forEach(t)})),s=0,l=f.length;s<l;s++)if(e=(t=f[s]).fontFamily,-1!==t.type.indexOf("text")&&!u[e]&&h[e]&&(u[e]=!0,t.styles))for(a in n=t.styles)for(o in i=n[a])!u[e=i[o].fontFamily]&&h[e]&&(u[e]=!0);for(var d in u)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",h[d],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(t,e){var n,i,r,a=this._objects;for(i=0,r=a.length;i<r;i++)(n=a[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],i=this.viewportTransform,a=this.width,o=this.height;if(n)if(n.toLive){var s=n.repeat,l=r.util.invertTransform(i),c=this[e+"Vpt"]?r.util.matrixToSVG(l):"";t.push('<rect transform="'+c+" translate(",a/2,",",o/2,')"',' x="',n.offsetX-a/2,'" y="',n.offsetY-o/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:a,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:o,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,a=this._activeObject;if(t===a&&"activeSelection"===t.type)for(e=(r=a._objects).length;e--;)i=r[e],n(this._objects,i),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,a=this._activeObject;if(t===a&&"activeSelection"===t.type)for(r=a._objects,e=0;e<r.length;e++)i=r[e],n(this._objects,i),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,a,o,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(s=l._objects,i=0;i<s.length;i++)r=s[i],(a=this._objects.indexOf(r))>0+c&&(o=a-1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else 0!==(a=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,a,e),n(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n)for(i=e,r=e-1;r>=0;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,a,o,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(i=(s=l._objects).length;i--;)r=s[i],(a=this._objects.indexOf(r))<this._objects.length-1-c&&(o=a+1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else(a=this._objects.indexOf(t))!==this._objects.length-1&&(o=this._findNewUpperIndex(t,a,e),n(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,a;if(n)for(i=e,r=e+1,a=this._objects.length;r<a;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),r.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),r.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(r.StaticCanvas.prototype,r.Observable),t(r.StaticCanvas.prototype,r.Collection),t(r.StaticCanvas.prototype,r.DataURLExporter),t(r.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=l();if(!e||!e.getContext)return null;var n=e.getContext("2d");return n&&"setLineDash"===t?"undefined"!==typeof n.setLineDash:null}}),r.StaticCanvas.prototype.toJSON=r.StaticCanvas.prototype.toObject,r.isLikelyNode&&(r.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},r.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),r.BaseBrush=r.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,i=t.getZoom();t&&t._isRetinaScaling()&&(i*=r.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*i,n.shadowOffsetX=e.offsetX*i,n.shadowOffsetY=e.offsetY*i}},needsFullRender:function(){return new r.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),r.PencilBrush=r.util.createClass(r.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new r.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){var e=new r.Point(t.x,t.y);return this._addPoint(e)},_render:function(t){var e,n,i=this._points[0],a=this._points[1];if(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&i.x===a.x&&i.y===a.y){var o=this.width/1e3;i=new r.Point(i.x,i.y),a=new r.Point(a.x,a.y),i.x-=o,a.x+=o}for(t.moveTo(i.x,i.y),e=1,n=this._points.length;e<n;e++)this._drawSegment(t,i,a),i=this._points[e],a=this._points[e+1];t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return r.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return"M 0 0 Q 0 0 0 0 L 0 0"===r.util.joinPath(t)},createPath:function(t){var e=new r.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new r.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i=this.canvas.getZoom(),r=Math.pow(e/i,2),a=t.length-1,o=t[0],s=[o];for(n=1;n<a-1;n++)Math.pow(o.x-t[n].x,2)+Math.pow(o.y-t[n].y,2)>=r&&(o=t[n],s.push(o));return s.push(t[a]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(t))this.canvas.requestRenderAll();else{var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}}),r.CircleBrush=r.util.createClass(r.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var a=this.points[t],o=new r.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(o.shadow=new r.Shadow(this.shadow)),i.push(o)}var s=new r.Group(i);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new r.Point(t.x,t.y),n=r.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new r.Color(this.color).setAlpha(r.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),r.SprayBrush=r.util.createClass(r.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var a=this.sprayChunks[n],o=0,s=a.length;o<s;o++){var l=new r.Rect({width:a[o].width,height:a[o].width,left:a[o].x+1,top:a[o].y+1,originX:"center",originY:"center",fill:this.color});e.push(l)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new r.Group(e);this.shadow&&c.set("shadow",new r.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)r[e=t[n].left+""+t[n].top]||(r[e]=t[n]);var a=[];for(e in r)a.push(r[e]);return a},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];"undefined"!==typeof r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,a,o=this.width/2;for(a=0;a<this.density;a++){e=r.util.getRandomInt(t.x-o,t.x+o),n=r.util.getRandomInt(t.y-o,t.y+o),i=this.dotWidthVariance?r.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new r.Point(e,n);s.width=i,this.randomOpacity&&(s.opacity=r.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),r.PatternBrush=r.util.createClass(r.PencilBrush,{getPatternSrc:function(){var t=r.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(t){this.callSuper("_setBrushStyles",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new r.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=r.util.getPointer,e=r.util.degreesToRadians,n=r.util.isTouchEvent;for(var i in r.Canvas=r.util.createClass(r.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=r.PencilBrush&&new r.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,a=this._objects.length;r<a;r++)t=this._objects[r],-1===i.indexOf(t)?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=r.util.invertTransform(n),a=this.restorePointerVpt(e);return r.util.transformPoint(a,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),a=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+i.y*t.zoomY,0);return r.util.isTransparent(t._cacheContext,Math.round(a),Math.round(o),this.targetFindTolerance)}var s=this.contextCache,l=t.selectionBackgroundColor,c=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),t.render(s),s.restore(),t.selectionBackgroundColor=l,r.util.isTransparent(s,e,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey]},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e,n){var i;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?i=this.centeredScaling||t.centeredScaling:"rotate"===e&&(i=this.centeredRotation||t.centeredRotation),i?!n:n},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n,i){if(!e||!t)return"drag";var r=i.controls[e];return r.getActionName(n,r,i)},_setupCurrentTransform:function(t,n,i){if(n){var a=this.getPointer(t),o=n.__corner,s=n.controls[o],l=i&&o?s.getActionHandler(t,n,s):r.controlsUtils.dragHandler,c=this._getActionFromCorner(i,o,t,n),u=this._getOriginFromCorner(n,o),h=t[this.centeredKey],f={target:n,action:c,actionHandler:l,corner:o,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:a.x-n.left,offsetY:a.y-n.top,originX:u.x,originY:u.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:e(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:h,original:r.util.saveObjectTransform(n)};this._shouldCenterTransform(n,c,h)&&(f.originX="center",f.originY="center"),f.original.originX=u.x,f.original.originY=u.y,this._currentTransform=f,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=new r.Point(e.ex,e.ey),i=r.util.transformPoint(n,this.viewportTransform),a=new r.Point(e.ex+e.left,e.ey+e.top),o=r.util.transformPoint(a,this.viewportTransform),s=Math.min(i.x,o.x),l=Math.min(i.y,o.y),c=Math.max(i.x,o.x),u=Math.max(i.y,o.y),h=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(s,l,c-s,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,s+=h,l+=h,c-=h,u-=h,r.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(s,l,c-s,u-l))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,a=this.getPointer(t,!0),o=this._activeObject,s=this.getActiveObjects(),l=n(t),c=s.length>1&&!e||1===s.length;if(this.targets=[],c&&o._findTargetCorner(a,l))return o;if(s.length>1&&!e&&o===this._searchPossibleTargets([o],a))return o;if(1===s.length&&o===this._searchPossibleTargets([o],a)){if(!this.preserveObjectStacking)return o;i=o,r=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,a);return t[this.altSelectionKey]&&u&&i&&u!==i&&(u=i,this.targets=r),u}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,n.x,n.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,a=t.length;a--;){var o=t[a],s=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(s,o,e)){(n=t[a]).subTargetCheck&&n instanceof r.Group&&(i=this._searchPossibleTargets(n._objects,e))&&this.targets.push(i);break}}return n},restorePointerVpt:function(t){return r.util.transformPoint(t,r.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),a=this.upperCanvasEl,o=a.getBoundingClientRect(),s=o.width||0,l=o.height||0;s&&l||("top"in o&&"bottom"in o&&(l=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(s=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),i=0===s||0===l?{width:1,height:1}:{width:a.width/s,height:a.height/l},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),r.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=r.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),r.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),r.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;r.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,r.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],a=[];t.forEach((function(t){-1===i.indexOf(t)&&(n=!0,t.fire("deselected",{e:e,target:t}),a.push(t))})),i.forEach((function(i){-1===t.indexOf(i)&&(n=!0,i.fire("selected",{e:e,target:i}),r.push(i))})),t.length>0&&i.length>0?n&&this.fire("selection:updated",{e:e,selected:r,deselected:a}):i.length>0?this.fire("selection:created",{e:e,selected:r}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:a})},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,r.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(n){e[n]=t[n]})),r.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),r.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),r.StaticCanvas)"prototype"!==i&&(r.Canvas[i]=r.StaticCanvas[i])}(),function(){var t=r.util.addListener,e=r.util.removeListener,n={passive:!1};function i(t,e){return t.button&&t.button===e-1}r.util.object.extend(r.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,a=this._getEventPrefix();t(r.window,"resize",this._onResize),t(i,a+"down",this._onMouseDown),t(i,a+"move",this._onMouseMove,n),t(i,a+"out",this._onMouseOut),t(i,a+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,n),"undefined"!==typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(r.document,t+"up",this._onMouseUp),e(r.document,"touchend",this._onTouchEnd,n),e(r.document,t+"move",this._onMouseMove,n),e(r.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var n=this;this._hoveredTargets.forEach((function(i){n.fire("mouse:out",{target:e,e:t}),i&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[]},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();t(r.document,"touchend",this._onTouchEnd,n),t(r.document,"touchmove",this._onMouseMove,n),e(a,o+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();e(a,o+"move",this._onMouseMove,n),t(r.document,o+"up",this._onMouseUp),t(r.document,o+"move",this._onMouseMove,n)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var a=this._getEventPrefix();e(r.document,"touchend",this._onTouchEnd,n),e(r.document,"touchmove",this._onMouseMove,n);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(o.upperCanvasEl,a+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(i)&&(e(r.document,o+"up",this._onMouseUp),e(r.document,o+"move",this._onMouseMove,n),t(a,o+"move",this._onMouseMove,n))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,n=this._currentTransform,a=this._groupSelector,o=!1,s=!a||0===a.left&&0===a.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),i(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,s);else{if(i(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,s),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(n&&(this._finalizeCurrentTransform(t),o=n.actionPerformed),!s){var l=e===this._activeObject;this._maybeGroupObjects(t),o||(o=this._shouldRender(e)||!l&&e===this._activeObject)}var c,u;if(e){if(c=e._findTargetCorner(this.getPointer(t,!0),r.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),o=!0;else{var h=e.controls[c],f=h&&h.getMouseUpHandler(t,e,h);f&&f(t,n,(u=this.getPointer(t)).x,u.y)}e.isMoving=!1}if(n&&(n.target!==e||n.corner!==c)){var d=n.target&&n.target.controls[n.corner],p=d&&d.getMouseUpHandler(t,e,h);u=u||this.getPointer(t),p&&p(t,n,u.x,u.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,s),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),o?this.requestRenderAll():s||this.renderTop()}}},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var a=0;a<i.length;a++)i[a].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,a=this.targets||[],o={e:t,target:r,subTargets:a,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire("mouse:"+e,o),r&&r.fire("mouse"+e,o);for(var s=0;s<a.length;s++)a[s].fire("mouse"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),(e.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",i)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(i(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(i(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var a=this._shouldRender(e),o=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):o&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var s=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var l=e._findTargetCorner(this.getPointer(t,!0),r.util.isTouchEvent(t));if(e.__corner=l,e===this._activeObject&&(l||!o)){this._setupCurrentTransform(t,e,s);var c=e.controls[l],u=(n=this.getPointer(t),c&&c.getMouseDownHandler(t,e,c));u&&u(t,this._currentTransform,n.x,n.y)}}this._handleEvent(t,"down"),(a||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(n=this._absolutePointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<a;o++)this.fireSyntheticInOutEvents(r[o],e,{oldTarget:i[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<a;o++)this.fireSyntheticInOutEvents(r[o],e,{oldTarget:i[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var i,r,a,o=n.oldTarget,s=o!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;s&&(i={e:e,target:t,previousTarget:o},r={e:e,target:o,nextTarget:t}),a=t&&s,o&&s&&(c&&this.fire(c,r),o.fire(n.evtOut,r)),a&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,a=e.action,o=!1,s=e.actionHandler;s&&(o=s(t,e,i,r)),"drag"===a&&o&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||o},_fire:r.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){n=t.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(t,e,n){var i=e.controls[t];return i.cursorStyleHandler(n,i,e)}})}(),function(){var t=Math.min,e=Math.max;r.util.object.extend(r.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0))&&e.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new r.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new r.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(n){for(var i,a=[],o=this._groupSelector.ex,s=this._groupSelector.ey,l=o+this._groupSelector.left,c=s+this._groupSelector.top,u=new r.Point(t(o,l),t(s,c)),h=new r.Point(e(o,l),e(s,c)),f=!this.selectionFullyContained,d=o===l&&s===c,p=this._objects.length;p--&&!((i=this._objects[p])&&i.selectable&&i.visible&&(f&&i.intersectsWithRect(u,h,!0)||i.isContainedWithinRect(u,h,!0)||f&&i.containsPoint(u,null,!0)||f&&i.containsPoint(h,null,!0))&&(a.push(i),d)););return a.length>1&&(a=a.filter((function(t){return!t.onSelect({e:n})}))),a},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),r.util.object.extend(r.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(i,t);return r.util.toDataURL(a,e,n)},toCanvasElement:function(t,e){t=t||1;var n=((e=e||{}).width||this.width)*t,i=(e.height||this.height)*t,a=this.getZoom(),o=this.width,s=this.height,l=a*t,c=this.viewportTransform,u=(c[4]-(e.left||0))*t,h=(c[5]-(e.top||0))*t,f=this.interactive,d=[l,0,0,l,u,h],p=this.enableRetinaScaling,g=r.util.createCanvasElement(),m=this.contextTop;return g.width=n,g.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=c,this.width=o,this.height=s,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=m,g}}),r.util.object.extend(r.StaticCanvas.prototype,{loadFromJSON:function(t,e,n){if(t){var i="string"===typeof t?JSON.parse(t):r.util.object.clone(t),a=this,o=i.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,(function(t){a.clear(),a._setBgOverlay(i,(function(){o?a._enlivenObjects([o],(function(n){a.clipPath=n[0],a.__setupCanvas.call(a,i,t,s,e)})):a.__setupCanvas.call(a,i,t,s,e)}))}),n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,i){var a=this;if(!e)return n[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?r.util.enlivenObjects([e],(function(e){a[t]=e[0],n[t]=!0,i&&i()})):this["set"+r.util.string.capitalize(t,!0)](e,(function(){n[t]=!0,i&&i()}))},_enlivenObjects:function(t,e,n){t&&0!==t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),null,n):e&&e([])},_toDataURL:function(t,e){this.clone((function(n){e(n.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,n){this.clone((function(i){n(i.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(n,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=r.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new r.Canvas(e);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),t&&t(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,a=e.util.string.capitalize,o=e.util.degreesToRadians,s=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,a=e.maxCacheSideLimit,o=e.minCacheSideLimit;if(i<=a&&r<=a&&i*r<=n)return i<o&&(t.width=o),r<o&&(t.height=o),t;var s=i/r,l=e.util.limitDimsByArea(s,n),c=e.util.capValue,u=c(o,l.x,a),h=c(o,l.y,a);return i>u&&(t.zoomX/=i/u,t.width=u,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,i=t._currentTransform.action;if(this===n&&i.slice&&"scale"===i.slice(0,5))return!1}var r,a,o=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=e.minCacheSideLimit,c=s.width,u=s.height,h=s.zoomX,f=s.zoomY,d=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==f,g=d||p,m=0,v=0,y=!1;if(d){var b=this._cacheCanvas.width,x=this._cacheCanvas.height,_=c>b||u>x;y=_||(c<.9*b||u<.9*x)&&b>l&&x>l,_&&!s.capped&&(c>l||u>l)&&(m=.1*c,v=.1*u)}return this instanceof e.Text&&this.path&&(g=!0,y=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(y?(o.width=Math.ceil(c+m),o.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),r=s.x/2,a=s.y/2,this.cacheTranslationX=Math.round(o.width/2-r)+r,this.cacheTranslationY=Math.round(o.height/2-a)+a,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,f),this.zoomX=h,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype;return n.stateProperties.forEach((function(e){"left"!==e&&"top"!==e&&(t[e]===n[e]&&delete t[e],Array.isArray(t[e])&&Array.isArray(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])})),t},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i="scaleX"===t||"scaleY"===t,r=this[t]!==n,a=!1;return i&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,r&&(a=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,a&&this.group.set("dirty",!0)):a&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,n){if(t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var n=e.fill;n&&(n.toLive?(t.fillStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=n)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,n){var i,r,a,s=this.getViewportTransform(),l=this.calcTransformMatrix();r="undefined"!==typeof(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,a="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(s,l),i=e.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(o(this.group?i.angle:this.angle)),n.forActiveSelection||this.group?r&&this.drawBordersInGroup(t,i,n):r&&this.drawBorders(t,n),a&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,a=r&&r.viewportTransform[0]||1,o=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(a*=e.devicePixelRatio,o*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(a+o)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*a*n.scaleX,t.shadowOffsetY=i.offsetY*o*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=e.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),s=r.x/this.scaleX/o,l=r.y/this.scaleY/o;a.width=s,a.height=l,(i=a.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(s,0),i.lineTo(s,l),i.lineTo(0,l),i.closePath(),i.translate(s/2,l/2),i.scale(r.zoomX/this.scaleX/o,r.zoomY/this.scaleY/o),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/r.zoomX,o*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(a,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.group,a=this.shadow,o=Math.abs,s=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var l,c,u,h,f=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(o(p.offsetX)+c)*o(l.scaleX),g.y=2*Math.round(o(p.offsetY)+c)*o(l.scaleY)),u=d.width+g.x,h=d.height+g.y,f.width=Math.ceil(u),f.height=Math.ceil(h);var m=new e.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var y=m.toCanvasElement(s||1,t);return this.shadow=a,this.set("canvas",v),r&&(this.group=r),this.set(i).setCoords(),m._objects=[],m.dispose(),m=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,o(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){e.runningAnimations&&e.runningAnimations.cancelByTarget(this)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.ENLIVEN_PROPS=["clipPath"],e.Object._fromObject=function(t,n,r,a){var o=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],(function(t){"undefined"!==typeof t[0]&&(n.fill=t[0]),"undefined"!==typeof t[1]&&(n.stroke=t[1]),e.util.enlivenObjectEnlivables(n,n,(function(){var t=a?new o(n[a],n):new o(n);r&&r(t)}))}))},e.Object.__uid=0)}(e),function(){var t=r.util.degreesToRadians,e={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};r.util.object.extend(r.Object.prototype,{translateToGivenOrigin:function(t,i,a,o,s){var l,c,u,h=t.x,f=t.y;return"string"===typeof i?i=e[i]:i-=.5,"string"===typeof o?o=e[o]:o-=.5,"string"===typeof a?a=n[a]:a-=.5,"string"===typeof s?s=n[s]:s-=.5,c=s-a,((l=o-i)||c)&&(u=this._getTransformedDimensions(),h=t.x+l*u.x,f=t.y+c*u.y),new r.Point(h,f)},translateToCenterPoint:function(e,n,i){var a=this.translateToGivenOrigin(e,n,i,"center","center");return this.angle?r.util.rotatePoint(a,e,t(this.angle)):a},translateToOriginPoint:function(e,n,i){var a=this.translateToGivenOrigin(e,"center","center",n,i);return this.angle?r.util.rotatePoint(a,e,t(this.angle)):a},getCenterPoint:function(){var t=new r.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,i){var a,o,s=this.getCenterPoint();return a="undefined"!==typeof n&&"undefined"!==typeof i?this.translateToGivenOrigin(s,"center","center",n,i):new r.Point(this.left,this.top),o=new r.Point(e.x,e.y),this.angle&&(o=r.util.rotatePoint(o,s,-t(this.angle))),o.subtractEquals(a)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(n){var i,a,o=t(this.angle),s=this.getScaledWidth(),l=r.util.cos(o)*s,c=r.util.sin(o)*s;i="string"===typeof this.originX?e[this.originX]:this.originX-.5,a="string"===typeof n?e[n]:n-.5,this.left+=l*(a-i),this.top+=c*(a-i),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var t=r.util,e=t.degreesToRadians,n=t.multiplyTransformMatrices,i=t.transformPoint;t.object.extend(r.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return n=this._getCoords(t,e),[new r.Point(n.tl.x,n.tl.y),new r.Point(n.tr.x,n.tr.y),new r.Point(n.br.x,n.br.y),new r.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(t,e,n,i){var a=this.getCoords(n,i);return"Intersection"===r.Intersection.intersectPolygonRectangle(a,t,e).status},intersectsWithObject:function(t,e,n){return"Intersection"===r.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=e?t.aCoords:t.lineCoords,a=0,o=t._getImageLines(r);a<4;a++)if(!t.containsPoint(i[a],o))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){var r=this._getCoords(n,i),a=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==a&&a%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some((function(t){return t.x<=n.x&&t.x>=e.x&&t.y<=n.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t))},_containsCenterOfCanvas:function(t,e,n){var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this.getCoords(!0,t).every((function(t){return(t.x>=n.x||t.x<=e.x)&&(t.y>=n.y||t.y<=e.y)}))&&this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,a=0;for(var o in e)if(!((r=e[o]).o.y<t.y&&r.d.y<t.y)&&!(r.o.y>=t.y&&r.d.y>=t.y)&&(r.o.x===r.d.x&&r.o.x>=t.x?i=r.o.x:(n=(r.d.y-r.o.y)/(r.d.x-r.o.x),i=-(t.y-0*t.x-(r.o.y-n*r.o.x))/(0-n)),i>=t.x&&(a+=1),2===a))break;return a},getBoundingRect:function(e,n){var i=this.getCoords(e,n);return t.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcLineCoords:function(){var n=this.getViewportTransform(),r=this.padding,a=e(this.angle),o=t.cos(a)*r,s=t.sin(a)*r,l=o+s,c=o-s,u=this.calcACoords(),h={tl:i(u.tl,n),tr:i(u.tr,n),bl:i(u.bl,n),br:i(u.br,n)};return r&&(h.tl.x-=c,h.tl.y-=l,h.tr.x+=l,h.tr.y-=c,h.bl.x-=l,h.bl.y+=c,h.br.x+=c,h.br.y+=l),h},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),r=n(i,e),a=n(r,t),o=(a=n(a,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(t,e,n){s[e]=t.positionHandler(o,a,n)})),s},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),r=n(e,t),a=this._getTransformedDimensions(),o=a.x/2,s=a.y/2;return{tl:i({x:-o,y:-s},r),tr:i({x:o,y:-s},r),bl:i({x:-o,y:s},r),br:i({x:o,y:s},r)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return t.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),r=this.matrixCache||(this.matrixCache={});return r.key===i?r.value:(this.group&&(e=n(this.group.calcTransformMatrix(!1),e)),r.key=i,r.value=e,e)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===e)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=e,n.value=t.composeMatrix(r),n.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(e,n){"undefined"===typeof e&&(e=this.skewX),"undefined"===typeof n&&(n=this.skewY);var i,r,a,o=0===e&&0===n;if(this.strokeUniform?(r=this.width,a=this.height):(r=(i=this._getNonTransformedDimensions()).x,a=i.y),o)return this._finalizeDimensions(r*this.scaleX,a*this.scaleY);var s=t.sizeAfterTransform(r,a,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:n});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return i(e,t,!0).scalarAdd(2*this.padding)}})}(),r.util.object.extend(r.Object.prototype,{sendToBack:function(){return this.group?r.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?r.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?r.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?r.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?r.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new r.Color(e),i=t+": "+n.toRgb()+"; ",a=n.getAlpha();return 1!==a&&(i+=t+"-opacity: "+a.toString()+"; "),i}return t+": none; "}var e=r.util.toFixed;r.util.object.extend(r.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),f=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",n,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(e,n){var i="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+i:"",a=e.strokeWidth?"stroke-width: "+e.strokeWidth+i:"",o=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+i:""),s=e.fontStyle?"font-style: "+e.fontStyle+i:"",l=e.fontWeight?"font-weight: "+e.fontWeight+i:"",c=e.fill?t("fill",e.fill):"",u=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e);return h&&(h="text-decoration: "+h+i),[u,a,r,o,s,l,h,c,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+r.util.matrixToSVG(n)+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var n=r.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var n=(e=e||{}).reviver,i=e.additionalTransform||"",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=t.indexOf("COMMON_PARTS");return t[a]=r,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var n,i,a=(e=e||{}).noStyle,o=e.reviver,s=a?"":'style="'+this.getSvgStyles()+'" ',l=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],m=t.indexOf("COMMON_PARTS"),v=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+r.Object.__uid++,i='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(o)+"</clipPath>\n"),h&&g.push("<g ",l,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),h?"":l+this.getSvgCommons()," >\n"),n=[s,u,a?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),t[m]=n,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),c&&g.push(i),g.push(t.join("")),g.push("</g>\n"),h&&g.push("</g>\n"),o?o(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=r.util.object.extend,e="stateProperties";function n(e,n,i){var r={};i.forEach((function(t){r[t]=e[t]})),t(e[n],r,!0)}function i(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0,a=t.length;r<a;r++)if(!i(t[r],e[r]))return!1;return!0}if(t&&"object"===typeof t){var o,s=Object.keys(t);if(!e||"object"!==typeof e||!n&&s.length!==Object.keys(e).length)return!1;for(r=0,a=s.length;r<a;r++)if("canvas"!==(o=s[r])&&"group"!==o&&!i(t[o],e[o]))return!1;return!0}}r.util.object.extend(r.Object.prototype,{hasStateChanged:function(t){var n="_"+(t=t||e);return Object.keys(this[n]).length<this[t].length||!i(this[n],this,!0)},saveState:function(t){var i=t&&t.propertySet||e,r="_"+i;return this[r]?(n(this,r,this[i]),t&&t.stateProperties&&n(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){var n=(t=t||{}).propertySet||e;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})}(),function(){var t=r.util.degreesToRadians;r.util.object.extend(r.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,a=t.x,o=t.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(r=s[l],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(n=this._findCrossPoints({x:a,y:o},i))&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,a=n.y+i,o="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,s=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-r/2,-a/2,r,a),o&&(t.beginPath(),this.forEachControl((function(e,n,i){e.withConnection&&e.getVisibility(i,n)&&(s=!0,t.moveTo(e.x*r,e.y*a),t.lineTo(e.x*r+e.offsetX,e.y*a+e.offsetY))})),s&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i=r.util.sizeAfterTransform(this.width,this.height,e),a=this.strokeWidth,o=this.strokeUniform,s=this.borderScaleFactor,l=i.x+a*(o?this.canvas.getZoom():e.scaleX)+s,c=i.y+a*(o?this.canvas.getZoom():e.scaleY)+s;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-l/2,-c/2,l,c),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var n,i,a=this.canvas.getRetinaScaling();return t.setTransform(a,0,0,a,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(a,o,s){i=s.oCoords[o],a.getVisibility(s,o)&&(n&&(i=r.util.transformPoint(i,n)),a.render(t,i.x,i.y,e,s))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),r.util.object.extend(r.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,a=e.onChange||n,o=this;return r.util.animate({target:this,startValue:t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.requestRenderAll(),a()},onComplete:function(){t.setCoords(),i()}})},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,a=e.onChange||n,o=this;return r.util.animate({target:this,startValue:t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.requestRenderAll(),a()},onComplete:function(){t.setCoords(),i()}})},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,a=e.onChange||n,o=this;return r.util.animate({target:this,startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),o.requestRenderAll(),a()},onComplete:function(){o.remove(t),i()}})}}),r.util.object.extend(r.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,n=[],i=[];for(t in arguments[0])n.push(t);for(var r=0,a=n.length;r<a;r++)t=n[r],e=r!==a-1,i.push(this._animate(t,arguments[0][t],arguments[1],e));return i}return this._animate.apply(this,arguments)},_animate:function(t,e,n,i){var a,o=this;e=e.toString(),n=n?r.util.object.clone(n):{},~t.indexOf(".")&&(a=t.split("."));var s=o.colorProperties.indexOf(t)>-1||a&&o.colorProperties.indexOf(a[1])>-1,l=a?this.get(a[0])[a[1]]:this.get(t);"from"in n||(n.from=l),s||(e=~e.indexOf("=")?l+parseFloat(e.replace("=","")):parseFloat(e));var c={target:this,startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(o,t,e,i)},onChange:function(e,r,s){a?o[a[0]][a[1]]=e:o.set(t,e),i||n.onChange&&n.onChange(e,r,s)},onComplete:function(t,e,r){i||(o.setCoords(),n.onComplete&&n.onComplete(t,e,r))}};return s?r.util.animateColor(c.startValue,c.endValue,c.duration,c):r.util.animate(c)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function a(t,e){var n=t.origin,i=t.axis1,r=t.axis2,a=t.dimension,o=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(n)){case o:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(a);case l:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5;return{x1:n,x2:t*this.width*-.5,y1:i,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,i,r){r=r||{};var a=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),o=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];i(new e.Line(o,n(a,r)))},e.Line.fromObject=function(t,n){var r=i(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,(function(t){delete t.points,n&&n(t)}),"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,i=(this.endAngle-this.startAngle)%360;if(0===i)t=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=n(this.startAngle),a=n(this.endAngle),o=this.radius;t=['<path d="M '+e.util.cos(r)*o+" "+e.util.sin(r)*o," A "+o+" "+o," 0 ",+(i>180?"1":"0")+" 1"," "+e.util.cos(a)*o+" "+e.util.sin(a)*o,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var i,r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=r)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,a=-this.width/2,o=-this.height/2,s=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(a+e,o),t.lineTo(a+i-e,o),s&&t.bezierCurveTo(a+i-l*e,o,a+i,o+l*n,a+i,o+n),t.lineTo(a+i,o+r-n),s&&t.bezierCurveTo(a+i,o+r-l*n,a+i-l*e,o+r,a+i-e,o+r),t.lineTo(a+e,o+r),s&&t.bezierCurveTo(a+l*e,o+r,a,o+r-l*n,a,o+r-n),t.lineTo(a,o+n),s&&t.bezierCurveTo(a,o+l*n,a+l*e,o,a+e,o),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var a=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var o=new e.Rect(n(r?e.util.object.clone(r):{},a));o.visible=o.visible&&o.width>0&&o.height>0,i(o)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,a=e.util.toFixed,o=e.util.projectStrokeOnPoints;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t),i=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-i,this.height=n.height-i,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+i/2,y:n.top-this.strokeWidth/2+i/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?n.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2+i/2,y:n.top+this.height/2+i/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=i(t,"x")||0,n=i(t,"y")||0;return{left:e,top:n,width:(r(t,"x")||0)-e,height:(r(t,"y")||0)-n}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,o=0,s=this.points.length;o<s;o++)t.push(a(this.points[o].x-n,r),",",a(this.points[o].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var a=0;a<n;a++)e=this.points[a],t.lineTo(e.x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,a){if(!i)return r(null);a||(a={});var o=e.parsePointsAttribute(i.getAttribute("points")),s=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new e[t](o,n(s,a)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.projectStrokeOnPoints;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,a=e.util.object.clone,o=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){delete(e=a(e||{})).path,this.callSuper("initialize",e),this._setPath(t||[],e)},_setPath:function(t,n){this.path=e.util.makePathSimpler(Array.isArray(t)?t:e.util.parsePath(t)),e.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(t){var e,n=0,i=0,r=0,a=0,o=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch((e=this.path[u])[0]){case"L":r=e[1],a=e[2],t.lineTo(r+l,a+c);break;case"M":n=r=e[1],i=a=e[2],t.moveTo(r+l,a+c);break;case"C":r=e[5],a=e[6],o=e[3],s=e[4],t.bezierCurveTo(e[1]+l,e[2]+c,o+l,s+c,r+l,a+c);break;case"Q":t.quadraticCurveTo(e[1]+l,e[2]+c,e[3]+l,e[4]+c),r=e[3],a=e[4],o=e[1],s=e[2];break;case"z":case"Z":r=n,a=i,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',e.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,t)+", "+o(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,a=[],o=[],s=0,l=0,c=0,u=0,h=0,f=this.path.length;h<f;++h){switch((t=this.path[h])[0]){case"L":c=t[1],u=t[2],r=[];break;case"M":s=c=t[1],l=u=t[2],r=[];break;case"C":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],u=t[6];break;case"Q":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],u=t[4];break;case"z":case"Z":c=s,u=l}r.forEach((function(t){a.push(t.x),o.push(t.y)})),a.push(c),o.push(u)}var d=n(a)||0,p=n(o)||0;return{left:d,top:p,width:(i(a)||0)-d,height:(i(o)||0)-p}}}),e.Path.fromObject=function(t,n){if("string"===typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,(function(i){var r=i[0];r.setOptions(t),t.clipPath?e.util.enlivenObjects([t.clipPath],(function(t){r.clipPath=t[0],n&&n(r)})):n&&n(r)}))}else e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var a=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);a.fromSVG=!0,n(new e.Path(a.d,r(a,i)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(true)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,i=t.top;t.set({left:n-e.x,top:i-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(n&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,n);if("canvas"===t)for(;i--;)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i}))}var a=e.Object.prototype.toDatalessObject.call(this,t);return a.objects=n,a},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(n){e.util.addTransformToObject(n,t),delete n.group,n.setCoords()})),this},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,n.add(t)})),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(t){t.setCoords(true)})),this},_calcBounds:function(t){for(var e,n,i,r,a=[],o=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(i=(e=this._objects[l]).calcACoords(),r=0;r<u;r++)n=s[r],a.push(i[n].x),o.push(i[n].y);e.aCoords=i}this._getBounds(a,o,t)},_getBounds:function(t,r,a){var o=new e.Point(n(t),n(r)),s=new e.Point(i(t),i(r)),l=o.y||0,c=o.x||0,u=s.x-o.x||0,h=s.y-o.y||0;this.width=u,this.height=h,a||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var i=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!==typeof i?e.util.enlivenObjects(i,(function(i){e.util.enlivenObjectEnlivables(t,r,(function(){n&&n(new e.Group(i,r,!0))}))})):e.loadSVGFromURL(i,(function(a){var o=e.util.groupSVGElements(a,t,i),s=r.clipPath;delete r.clipPath,o.set(r),s?e.util.enlivenObjects([s],(function(t){o.clipPath=t[0],n&&n(o)})):n&&n(o)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach((function(t){t.canvas.remove(t),t.group=i})),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),"undefined"===typeof(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,(function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))}))})}(e),function(t){"use strict";var e=r.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?r.warn("fabric.Image is already defined."):(r.Image=r.util.createClass(r.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:r.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+r.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=r.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){r.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},toObject:function(t){var n=[];this.filters.forEach((function(t){t&&n.push(t.toObject())}));var i=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=this._element,a=-this.width/2,o=-this.height/2,s="",l="";if(!i)return[];if(this.hasCrop()){var c=r.Object.__uid++;e.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+a+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',o-this.cropY,'" width="',i.width||i.naturalWidth,'" height="',i.height||i.height,l,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,t=["\t<rect ",'x="',a,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return e="fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return r.util.loadImage(t,(function(t,i){this.setElement(t,n),this._setWidthHeight(),e&&e(this,i)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,a=n.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&a>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=a);r.filterBackend||(r.filterBackend=r.initFilterBackend());var s=r.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=o.width,u=o.height;s.width=c,s.height=u,this._element=s,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=a,r.filterBackend.applyFilters([t],o,c,u,this._element,l),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var a=r.util.createCanvasElement();a.width=n,a.height=i,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return r.filterBackend||(r.filterBackend=r.initFilterBackend()),r.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){r.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){r.util.setImageSmoothing(t,this.imageSmoothing),r.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,a=this.height,o=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),u=e.naturalWidth||e.width,h=e.naturalHeight||e.height,f=l*n,d=c*i,p=o(r*n,u-f),g=o(a*i,h-d),m=-r/2,v=-a/2,y=o(r,u/n-l),b=o(a,h/i-c);e&&t.drawImage(e,f,d,p,g,m,v,y,b)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(r.util.getById(t),e),r.util.addClass(this.getElement(),r.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?r.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=r.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,a=1,o=1,s=0,l=0,c=0,u=0,h=this.width,f=this.height,d={width:h,height:f};return!e||"none"===e.alignX&&"none"===e.alignY?(a=h/n,o=f/i):("meet"===e.meetOrSlice&&(t=(h-n*(a=o=r.util.findScaleToFit(this._element,d)))/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(f-i*o)/2,"Min"===e.alignY&&(l=-t),"Max"===e.alignY&&(l=t)),"slice"===e.meetOrSlice&&(t=n-h/(a=o=r.util.findScaleToCover(this._element,d)),"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=i-f/o,"Mid"===e.alignY&&(u=t/2),"Max"===e.alignY&&(u=t),n=h/a,i=f/o)),{width:n,height:i,scaleX:a,scaleY:o,offsetLeft:s,offsetTop:l,cropX:c,cropY:u}}}),r.Image.CSS_CANVAS="canvas-img",r.Image.prototype.getSvgSrc=r.Image.prototype.getSrc,r.Image.fromObject=function(t,e){var n=r.util.object.clone(t);r.util.loadImage(n.src,(function(t,i){i?e&&e(null,!0):r.Image.prototype._initFilters.call(n,n.filters,(function(i){n.filters=i||[],r.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(i){n.resizeFilter=i[0],r.util.enlivenObjectEnlivables(n,n,(function(){var i=new r.Image(t,n);e(i,!1)}))}))}))}),null,n.crossOrigin)},r.Image.fromURL=function(t,e,n){r.util.loadImage(t,(function(t,i){e&&e(new r.Image(t,n),i)}),null,n&&n.crossOrigin)},r.Image.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),r.Image.fromElement=function(t,n,i){var a=r.parseAttributes(t,r.Image.ATTRIBUTE_NAMES);r.Image.fromURL(a["xlink:href"],n,e(i?r.util.object.clone(i):{},a))})}(e),r.util.object.extend(r.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,a=this;return r.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){a.rotate(t),i()},onComplete:function(){a.setCoords(),n()}})}}),r.util.object.extend(r.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.isWebglSupported=function(e){if(r.isLikelyNode)return!1;e=e||r.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),a=!1;if(i){r.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),a=r.maxTextureSize>=e;for(var o=["highp","mediump","lowp"],s=0;s<3;s++)if(t(i,o[s])){r.webGlPrecision=o[s];break}}return this.isSupported=a,a},r.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(p){n=!1}var a="undefined"!==typeof ArrayBuffer,l="undefined"!==typeof Uint8ClampedArray;if(i&&n&&a&&l){var c=r.util.createCanvasElement(),u=new ArrayBuffer(t*e*4);if(r.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=s);var h,f,d={imageBuffer:u,destinationWidth:t,destinationHeight:e,targetCanvas:c};c.width=t,c.height=e,h=window.performance.now(),o.call(d,this.gl,d),f=window.performance.now()-h,h=window.performance.now(),s.call(d,this.gl,d),f>window.performance.now()-h?(this.imageBuffer=u,this.copyGLTo2D=s):this.copyGLTo2D=o}},createWebGLCanvas:function(t,e){var n=r.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=n.getContext("webgl",i);a||(a=n.getContext("experimental-webgl",i)),a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)},applyFilters:function(t,e,n,i,r,a){var o,s=this.gl;a&&(o=this.getCachedTexture(a,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:s,sourceTexture:this.createTexture(s,n,i,!o&&e),targetTexture:this.createTexture(s,n,i),originalTexture:o||this.createTexture(s,n,i,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,c),t.forEach((function(t){t&&t.applyTo(l)})),function(t){var e=t.targetCanvas,n=e.width,i=e.height,r=t.destinationWidth,a=t.destinationHeight;n===r&&i===a||(e.width=r,e.height=a)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i,r){var a=t.createTexture();return t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),a},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}r.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var a=r.getContext("2d");a.drawImage(e,0,0,n,i);var o={sourceWidth:n,sourceHeight:i,imageData:a.getImageData(0,0,n,i),originalEl:e,originalImageData:a.getImageData(0,0,n,i),canvasEl:r,ctx:a,filterBackend:this};return t.forEach((function(t){t.applyTo(o)})),o.imageData.width===n&&o.imageData.height===i||(r.width=o.imageData.width,r.height=o.imageData.height),a.putImageData(o.imageData,0,0),o}}}(),r.Image=r.Image||{},r.Image.filters=r.Image.filters||{},r.Image.filters.BaseFilter=r.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==r.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+r.webGlPrecision+" float"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(i));var a=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(a));var o=t.createProgram();if(t.attachShader(o,i),t.attachShader(o,a),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(o));var s=this.getAttributeLocations(t,o),l=this.getUniformLocations(t,o)||{};return l.uStepW=t.getUniformLocation(o,"uStepW"),l.uStepH=t.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=r.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),r.Image.filters.BaseFilter.fromObject=function(t,e){var n=new r.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,a,o=t.imageData.data,s=o.length,l=this.matrix,c=this.colorsOnly;for(a=0;a<s;a+=4)e=o[a],n=o[a+1],i=o[a+2],c?(o[a]=e*l[0]+n*l[1]+i*l[2]+255*l[4],o[a+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],o[a+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(r=o[a+3],o[a]=e*l[0]+n*l[1]+i*l[2]+r*l[3]+255*l[4],o[a+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],o[a+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],o[a+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Brightness=i(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(e=0;e<i;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,a,o,s,l,c,u,h,f,d,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),b=p.width,x=p.height,_=t.ctx.createImageData(b,x),w=_.data,C=this.opaque?1:0;for(h=0;h<x;h++)for(u=0;u<b;u++){for(a=4*(h*b+u),e=0,n=0,i=0,r=0,d=0;d<v;d++)for(f=0;f<v;f++)o=u+f-y,(s=h+d-y)<0||s>=x||o<0||o>=b||(l=4*(s*b+o),c=m[d*v+f],e+=g[l]*c,n+=g[l+1]*c,i+=g[l+2]*c,C||(r+=g[l+3]*c));w[a]=e,w[a+1]=n,w[a+2]=i,w[a+3]=C?g[a+3]:r}t.imageData=_},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Grayscale=i(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,i=t.imageData.data,r=i.length,a=this.mode;for(e=0;e<r;e+=4)"average"===a?n=(i[e]+i[e+1]+i[e+2])/3:"lightness"===a?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:"luminosity"===a&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Invert=i(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i=t.imageData.data,r=i.length,a=this.noise;for(e=0,r=i.length;e<r;e+=4)n=(.5-Math.random())*a,i[e]+=n,i[e+1]+=n,i[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Pixelate=i(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,i,r,a,o,s,l,c,u,h,f=t.imageData,d=f.data,p=f.height,g=f.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(r=d[e=4*n*g+4*i],a=d[e+1],o=d[e+2],s=d[e+3],u=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,g),l=n;l<u;l++)for(c=i;c<h;c++)d[e=4*l*g+4*c]=r,d[e+1]=a,d[e+2]=o,d[e+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,a,o=t.imageData.data,s=255*this.distance,l=new e.Color(this.color).getSource(),c=[l[0]-s,l[1]-s,l[2]-s],u=[l[0]+s,l[1]+s,l[2]+s];for(n=0;n<o.length;n+=4)i=o[n],r=o[n+1],a=o[n+2],i>c[0]&&r>c[1]&&a>c[2]&&i<u[0]&&r<u[1]&&a<u[2]&&(o[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),a=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],o=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,a),t.uniform4fv(n.uHigh,o)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in r)n[a]=i(n.ColorMatrix,{type:a,matrix:r[a],mainParameter:!1,colorsOnly:!0}),e.Image.filters[a].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendColor=i(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,i,r,a,o,s,l,c=t.imageData.data,u=c.length,h=1-this.alpha;n=(l=new e.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var f=0;f<u;f+=4)switch(a=c[f],o=c[f+1],s=c[f+2],this.mode){case"multiply":c[f]=a*n/255,c[f+1]=o*i/255,c[f+2]=s*r/255;break;case"screen":c[f]=255-(255-a)*(255-n)/255,c[f+1]=255-(255-o)*(255-i)/255,c[f+2]=255-(255-s)*(255-r)/255;break;case"add":c[f]=a+n,c[f+1]=o+i,c[f+2]=s+r;break;case"diff":case"difference":c[f]=Math.abs(a-n),c[f+1]=Math.abs(o-i),c[f+2]=Math.abs(s-r);break;case"subtract":c[f]=a-n,c[f+1]=o-i,c[f+2]=s-r;break;case"darken":c[f]=Math.min(a,n),c[f+1]=Math.min(o,i),c[f+2]=Math.min(s,r);break;case"lighten":c[f]=Math.max(a,n),c[f+1]=Math.max(o,i),c[f+2]=Math.max(s,r);break;case"overlay":c[f]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,c[f+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[f+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":c[f]=n+a-2*n*a/255,c[f+1]=i+o-2*i*o/255,c[f+2]=r+s-2*r*s/255;break;case"tint":c[f]=n+a*h,c[f+1]=i+o*h,c[f+2]=r+s*h}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendImage=i(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var n,i,r,a,o,s,l,c,u,h,f,d=t.imageData,p=t.filterBackend.resources,g=d.data,m=g.length,v=d.width,y=d.height,b=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),h=(u=p.blendImage).getContext("2d"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),h.drawImage(b._element,0,0,v,y),f=h.getImageData(0,0,v,y).data;for(var x=0;x<m;x+=4)switch(o=g[x],s=g[x+1],l=g[x+2],c=g[x+3],n=f[x],i=f[x+1],r=f[x+2],a=f[x+3],this.mode){case"multiply":g[x]=o*n/255,g[x+1]=s*i/255,g[x+2]=l*r/255,g[x+3]=c*a/255;break;case"mask":g[x+3]=a}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(i){var r=e.util.object.clone(t);r.image=i,n(new e.Image.filters.BlendImage(r))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,a=Math.abs,o=Math.round,s=Math.sin,l=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach((function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var n=(e*=Math.PI)/t;return s(e)/e*s(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,a=e.width,s=e.height,l=o(a*n),c=o(s*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,a,s,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,a,s,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,a,s,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,a,s,l,c)),t.imageData=r},sliceByTwo:function(t,n,r,a,o){var s,l,c=t.imageData,u=.5,h=!1,f=!1,d=n*u,p=r*u,g=e.filterBackend.resources,m=0,v=0,y=n,b=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((s=g.sliceByTwo).width<1.5*n||s.height<r)&&(s.width=1.5*n,s.height=r),(l=s.getContext("2d")).clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),a=i(a),o=i(o);!h||!f;)n=d,r=p,a<i(d*u)?d=i(d*u):(d=a,h=!0),o<i(p*u)?p=i(p*u):(p=o,f=!0),l.drawImage(s,m,v,n,r,y,b,d,p),m=y,v=b,b+=p;return l.getImageData(m,v,a,o)},lanczosResize:function(t,e,o,s,c){var u=t.imageData.data,h=t.ctx.createImageData(s,c),f=h.data,d=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),b=l(g*this.lanczosLobes/2),x={},_={},w={};return function t(l){var C,S,k,T,O,j,E,P,A,M,D;for(_.x=(l+.5)*p,w.x=i(_.x),C=0;C<c;C++){for(_.y=(C+.5)*g,w.y=i(_.y),O=0,j=0,E=0,P=0,A=0,S=w.x-y;S<=w.x+y;S++)if(!(S<0||S>=e)){M=i(1e3*a(S-_.x)),x[M]||(x[M]={});for(var I=w.y-b;I<=w.y+b;I++)I<0||I>=o||(D=i(1e3*a(I-_.y)),x[M][D]||(x[M][D]=d(r(n(M*m,2)+n(D*v,2))/1e3)),(k=x[M][D])>0&&(O+=k,j+=k*u[T=4*(I*e+S)],E+=k*u[T+1],P+=k*u[T+2],A+=k*u[T+3]))}f[T=4*(C*s+l)]=j/O,f[T+1]=E/O,f[T+2]=P/O,f[T+3]=A/O}return++l<s?t(l):h}(0)},bilinearFiltering:function(t,e,n,r,a){var o,s,l,c,u,h,f,d,p,g=0,m=this.rcpScaleX,v=this.rcpScaleY,y=4*(e-1),b=t.imageData.data,x=t.ctx.createImageData(r,a),_=x.data;for(l=0;l<a;l++)for(c=0;c<r;c++)for(u=m*c-(o=i(m*c)),h=v*l-(s=i(v*l)),p=4*(s*e+o),f=0;f<4;f++)d=b[p+f]*(1-u)*(1-h)+b[p+4+f]*u*(1-h)+b[p+y+f]*h*(1-u)+b[p+y+4+f]*u*h,_[g++]=d;return x},hermiteFastResize:function(t,e,n,o,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),f=l(u/2),d=t.imageData.data,p=t.ctx.createImageData(o,s),g=p.data,m=0;m<s;m++)for(var v=0;v<o;v++){for(var y=4*(v+m*o),b=0,x=0,_=0,w=0,C=0,S=0,k=0,T=(m+.5)*u,O=i(m*u);O<(m+1)*u;O++)for(var j=a(T-(O+.5))/f,E=(v+.5)*c,P=j*j,A=i(v*c);A<(v+1)*c;A++){var M=a(E-(A+.5))/h,D=r(P+M*M);D>1&&D<-1||(b=2*D*D*D-3*D*D+1)>0&&(k+=b*d[(M=4*(A+O*e))+3],_+=b,d[M+3]<255&&(b=b*d[M+3]/250),w+=b*d[M],C+=b*d[M+1],S+=b*d[M+2],x+=b)}g[y]=w/x,g[y+1]=C/x,g[y+2]=S/x,g[y+3]=k/_}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Contrast=i(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData.data,i=n.length,r=Math.floor(255*this.contrast),a=259*(r+255)/(255*(259-r));for(e=0;e<i;e+=4)n[e]=a*(n[e]-128)+128,n[e+1]=a*(n[e+1]-128)+128,n[e+2]=a*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Saturation=i(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData.data,r=i.length,a=-this.saturation;for(e=0;e<r;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*a:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*a:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*a:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Vibrance=i(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,n,i,r,a=t.imageData.data,o=a.length,s=-this.vibrance;for(e=0;e<o;e+=4)n=Math.max(a[e],a[e+1],a[e+2]),i=(a[e]+a[e+1]+a[e+2])/3,r=2*Math.abs(n-i)/255*s,a[e]+=n!==a[e]?(n-a[e])*r:0,a[e+1]+=n!==a[e+1]?(n-a[e+1])*r:0,a[e+2]+=n!==a[e+2]?(n-a[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Blur=i(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,a=t.imageData.width,o=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===a&&n.height===o||(i.width=n.width=a,i.height=n.height=o);var s,l,c,u,h=n.getContext("2d"),f=i.getContext("2d"),d=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),f.clearRect(0,0,a,o),u=-15;u<=d;u++)c=p*(l=u/d)*a+(s=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(l),f.drawImage(n,c,s),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);for(u=-15;u<=d;u++)c=p*(l=u/d)*o+(s=(Math.random()-.5)/4),f.globalAlpha=1-Math.abs(l),f.drawImage(n,s,c),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var g=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Gamma=i(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData.data,i=this.gamma,r=n.length,a=1/i[0],o=1/i[1],s=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,a),this.gVals[e]=255*Math.pow(e/255,o),this.bVals[e]=255*Math.pow(e/255,s);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Composed=i(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,n){var i=(t.subFilters||[]).map((function(t){return new e.Image.filters[t.type](t)})),r=new e.Image.filters.Composed({subFilters:i});return n&&n(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=1/3,a=Math.sqrt(r)*i,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=r*o-a,this.matrix[2]=r*o+a,this.matrix[5]=r*o+a,this.matrix[6]=n+r*o,this.matrix[7]=r*o-a,this.matrix[10]=r*o-a,this.matrix[11]=r*o+a,this.matrix[12]=n+r*o},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var i="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(i),cacheProperties:e.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,i,r,a,o,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(i=0,r=this._textLines[s],(e=this.getLineWidth(s))<this.width&&(o=this.textLines[s].match(this._reSpacesAndTabs)))){n=o.length,t=(this.width-e)/n;for(var c=0,u=r.length;c<=u;c++)a=this.__charBounds[s][c],this._reSpaceAndTab.test(r[c])?(a.width+=t,a.kernedWidth+=t,a.left+=i,i+=t):a.left+=i}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom"}t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,a){this._renderChars(t,e,n,i,r,a)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,i,r,a,o,s,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,f=0,d=this.path,p=0,g=this._textLines.length;p<g;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){i=this._textLines[p],n=this._getLineLeftOffset(p),f=0,h=0,r=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=i.length;m<v;m++)a=this.__charBounds[p][m],o=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),d?(t.save(),t.translate(a.renderLeft,a.renderTop),t.rotate(a.angle),t.fillStyle=o,o&&t.fillRect(-a.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),a.width,e/this.lineHeight),t.restore()):o!==r?(s=c+n+h,"rtl"===this.direction&&(s=this.width-s-f),t.fillStyle=r,r&&t.fillRect(s,u,f,e/this.lineHeight),h=a.left,f=a.width,r=o):f+=a.kernedWidth;o&&!d&&(s=c+n+h,"rtl"===this.direction&&(s=this.width-s-f),t.fillStyle=o,t.fillRect(s,u,f,e/this.lineHeight)),u+=e}else u+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,n,i){var r,a,o,s,l=this.getFontCache(e),c=n+t,u=this._getFontDeclaration(e)===this._getFontDeclaration(i),h=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(o=l[n]),void 0!==l[t]&&(s=r=l[t]),u&&void 0!==l[c]&&(s=(a=l[c])-o),void 0===r||void 0===o||void 0===a){var f=this.getMeasuringContext();this._setTextStyles(f,e,!0)}return void 0===r&&(s=r=f.measureText(t).width,l[t]=r),void 0===o&&u&&n&&(o=f.measureText(n).width,l[n]=o),u&&void 0===a&&(a=f.measureText(c).width,l[c]=a,s=a-o),{width:r*h,kernedWidth:s*h}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var n,i,r,a,o,s,l=0,c=this._textLines[t],u=new Array(c.length),h=0,f=this.path,d="right"===this.pathSide;for(this.__charBounds[t]=u,n=0;n<c.length;n++)i=c[n],a=this._getGraphemeBox(i,t,n,r),u[n]=a,l+=a.kernedWidth,r=i;if(u[n]={left:a?a.left+a.width:0,width:0,kernedWidth:0,height:this.fontSize},f){switch(s=f.segmentsInfo[f.segmentsInfo.length-1].length,(o=e.util.getPointOnPath(f.path,0,f.segmentsInfo)).x+=f.pathOffset.x,o.y+=f.pathOffset.y,this.textAlign){case"left":h=d?s-l:0;break;case"center":h=(s-l)/2;break;case"right":h=d?0:s-l}for(h+=this.pathStartOffset*(d?-1:1),n=d?c.length-1:0;d?n>=0:n<c.length;d?n--:n++)a=u[n],h>s?h%=s:h<0&&(h+=s),this._setGraphemeOnPath(h,a,o),h+=a.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(t,n,i){var r=t+n.kernedWidth/2,a=this.path,o=e.util.getPointOnPath(a.path,r,a.segmentsInfo);n.renderLeft=o.x-i.x,n.renderTop=o.y-i.y,n.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,n,i,r){var a,o=this.getCompleteStyleDeclaration(e,n),s=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,o,i,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=a=this._getWidthOfCharSpacing(),c+=a);var h={width:u,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(n>0&&!r){var f=this.__charBounds[e][n-1];h.left=f.left+f.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),a=0,o=this._textLines.length;a<o;a++){var s=this.getHeightOfLine(a),l=s/this.lineHeight,c=this._getLineLeftOffset(a);this._renderTextLine(e,t,this._textLines[a],i+c,r+n+l,a),n+=s}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,n,i,r,a,o){var s,l,c,u,h,f=this.getHeightOfLine(o),d=-1!==this.textAlign.indexOf("justify"),p="",g=0,m=this.path,v=!d&&0===this.charSpacing&&this.isEmptyStyles(o)&&!m,y="ltr"===this.direction,b="ltr"===this.direction?1:-1,x=n.canvas.getAttribute("dir");if(n.save(),x!==this.direction&&(n.canvas.setAttribute("dir",y?"ltr":"rtl"),n.direction=y?"ltr":"rtl",n.textAlign=y?"left":"right"),a-=f*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(t,n,o,0,i.join(""),r,a,f),void n.restore();for(var _=0,w=i.length-1;_<=w;_++)u=_===w||this.charSpacing||m,p+=i[_],c=this.__charBounds[o][_],0===g?(r+=b*(c.kernedWidth-c.width),g+=c.width):g+=c.kernedWidth,d&&!u&&this._reSpaceAndTab.test(i[_])&&(u=!0),u||(s=s||this.getCompleteStyleDeclaration(o,_),l=this.getCompleteStyleDeclaration(o,_+1),u=e.util.hasStyleChanged(s,l,!1)),u&&(m?(n.save(),n.translate(c.renderLeft,c.renderTop),n.rotate(c.angle),this._renderChar(t,n,o,_,p,-g/2,0,f),n.restore()):(h=r,this._renderChar(t,n,o,_,p,h,a,f)),p="",s=l,r+=b*g,g=0);n.restore()},_applyPatternGradientTransformText:function(t){var n,i=e.util.createCanvasElement(),r=this.width+this.strokeWidth,a=this.height+this.strokeWidth;return i.width=r,i.height=a,(n=i.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,a),n.lineTo(0,a),n.closePath(),n.translate(r/2,a/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(i,"no-repeat")},handleFiller:function(t,e,n){var i,r;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,t.translate(i,r),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(t[e]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,n,i,r,a,o){var s,l,c=this._getStyleDeclaration(n,i),u=this.getCompleteStyleDeclaration(n,i),h="fillText"===t&&u.fill,f="strokeText"===t&&u.stroke&&u.strokeWidth;(f||h)&&(e.save(),h&&(s=this._setFillStyles(e,u)),f&&(l=this._setStrokeStyles(e,u)),e.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(o+=c.deltaY),h&&e.fillText(r,a-s.offsetX,o-s.offsetY),f&&e.strokeText(r,a-l.offsetX,o-l.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),o={fontSize:r*n.size,deltaY:a+r*n.baseline};return this.setSelectionStyles(o,t,e),this},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,r=this.direction,a=0,o=this.isEndOfWrapping(t);return"justify"===i||"justify-center"===i&&!o||"justify-right"===i&&!o||"justify-left"===i&&!o?0:("center"===i&&(a=n/2),"right"===i&&(a=n),"justify-center"===i&&(a=n/2),"justify-right"===i&&(a=n),"rtl"===r&&(a-=n),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&"undefined"!==typeof i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,a,o,s,l,c,u,h,f,d,p,g,m,v,y=this._getLeftOffset(),b=this._getTopOffset(),x=this.path,_=this._getWidthOfCharSpacing(),w=this.offsets[e],C=0,S=this._textLines.length;C<S;C++)if(n=this.getHeightOfLine(C),this[e]||this.styleHas(e,C)){l=this._textLines[C],g=n/this.lineHeight,a=this._getLineLeftOffset(C),h=0,f=0,c=this.getValueOfPropertyAt(C,0,e),v=this.getValueOfPropertyAt(C,0,"fill"),u=b+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(C,0),o=this.getValueOfPropertyAt(C,0,"deltaY");for(var k=0,T=l.length;k<T;k++)if(d=this.__charBounds[C][k],p=this.getValueOfPropertyAt(C,k,e),m=this.getValueOfPropertyAt(C,k,"fill"),r=this.getHeightOfChar(C,k),s=this.getValueOfPropertyAt(C,k,"deltaY"),x&&p&&m)t.save(),t.fillStyle=v,t.translate(d.renderLeft,d.renderTop),t.rotate(d.angle),t.fillRect(-d.kernedWidth/2,w*r+s,d.kernedWidth,this.fontSize/15),t.restore();else if((p!==c||m!==v||r!==i||s!==o)&&f>0){var O=y+a+h;"rtl"===this.direction&&(O=this.width-O-f),c&&v&&(t.fillStyle=v,t.fillRect(O,u+w*i+o,f,this.fontSize/15)),h=d.left,f=d.width,c=p,v=m,i=r,o=s}else f+=d.kernedWidth;O=y+a+h;"rtl"===this.direction&&(O=this.width-O-f),t.fillStyle=m,p&&m&&t.fillRect(O,u+w*i+o,f-_,this.fontSize/15),b+=n}else b+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,a=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,o=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||a?i.fontFamily:'"'+i.fontFamily+'"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=["\n"],a=[],o=0;o<n.length;o++)i[o]=e.util.string.graphemeSplit(n[o]),a=a.concat(i[o],r);return a.pop(),{_unwrappedLines:i,lines:n,graphemeText:a,graphemeLines:i}},toObject:function(t){var n=i.concat(t),r=this.callSuper("toObject",n);return r.styles=e.util.stylesToArray(this.styles,this.text),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper("set",t,e);var n=!1,i=!1;if("object"===typeof t)for(var r in t)"path"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||"path"===r;else n=-1!==this._dimensionAffectingProps.indexOf(t),i="path"===t;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var a=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),o=a.textAnchor||"left";if((r=e.util.object.extend(r?n(r):{},a)).top=r.top||0,r.left=r.left||0,a.textDecoration){var s=a.textDecoration;-1!==s.indexOf("underline")&&(r.underline=!0),-1!==s.indexOf("overline")&&(r.overline=!0),-1!==s.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in a&&(r.left+=a.dx),"dy"in a&&(r.top+=a.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new e.Text(l,r),h=u.getScaledHeight()/u.height,f=((u.height+u.strokeWidth)*u.lineHeight-u.height)*h,d=u.getScaledHeight()+f,p=0;"center"===o&&(p=u.getScaledWidth()/2),"right"===o&&(p=u.getScaledWidth()),u.set({left:u.left-p,top:u.top-(d-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),i(u)},e.Text.fromObject=function(t,i){var r=n(t),a=t.path;return delete r.path,e.Object._fromObject("Text",r,(function(n){n.styles=e.util.stylesFromArray(t.styles,t.text),a?e.Object._fromObject("Path",a,(function(t){n.set("path",t),i(n)}),"path"):i(n)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),r.util.object.extend(r.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var n="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if("undefined"!==typeof n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,i=this.styles,r=0,a=!0,o=0;for(var s in i){for(var l in e=0,i[s]){var c;r++,(c=i[s][l]).hasOwnProperty(t)?(n?c[t]!==n&&(a=!1):n=c[t],c[t]===this[t]&&delete c[t]):a=!1,0!==Object.keys(c).length?e++:delete i[s][l]}0===e&&delete i[s]}for(var u=0;u<this._textLines.length;u++)o+=this._textLines[u].length;a&&r===o&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n])delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),r.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(t,e,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},a=0;a<this._styleProperties.length;a++)r[n=this._styleProperties[a]]="undefined"===typeof i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}r.IText=r.util.createClass(r.Text,r.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,a=0,o=0,s=this.get2DCursorLocation(t);i=s.charIndex,n=s.lineIndex;for(var l=0;l<n;l++)a+=this.getHeightOfLine(l);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(o=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(o-=this._getWidthOfCharSpacing()),r={top:a,left:e+(o>0?o:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,r,"fontSize"),o=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/o,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,l+t.top+c,s,a)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(n),o=this.get2DCursorLocation(i),s=a.lineIndex,l=o.lineIndex,c=a.charIndex<0?0:a.charIndex,u=o.charIndex<0?0:o.charIndex,h=s;h<=l;h++){var f,d=this._getLineLeftOffset(h)||0,p=this.getHeightOfLine(h),g=0,m=0;if(h===s&&(g=this.__charBounds[s][c].left),h>=s&&h<l)m=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}f=p,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(p/=this.lineHeight);var y=t.left+d+g,b=m-g,x=p,_=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",x=1,_=p):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(y=this.width-y-b),e.fillRect(y,t.top+t.topOffset+_,b,x),t.topOffset+=f}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),r.IText.fromObject=function(e,n){var i=r.util.stylesFromArray(e.styles,e.text),a=Object.assign({},e,{styles:i});if(t(a),a.styles)for(var o in a.styles)for(var s in a.styles[o])t(a.styles[o][s]);r.Object._fromObject("IText",a,n,"text")}}(),function(){var t=r.util.object.clone;r.util.object.extend(r.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],r.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},searchWordBoundary:function(t,e){for(var n=this._text,i=this._reSpace.test(n[t])?t-1:t,a=n[i],o=r.reNonWord;!o.test(a)&&i>0&&i<n.length;)a=n[i+=e];return o.test(a)&&(i+=1===e?0:1),i},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),a=r.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:a,selectionEnd:a};var o=n.slice(t,e);return{selectionStart:a,selectionEnd:a+r.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t).join("").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=n.lineIndex,a=n.charIndex,o=this.getValueOfPropertyAt(i,a,"fontSize")*this.lineHeight,s=e.leftOffset,l=this.calcTransformMatrix(),c={x:e.left+s,y:e.top+e.topOffset+o},u=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,f=h.width/u,d=h.height/u,p=f-o,g=d-o,m=h.clientWidth/f,v=h.clientHeight/d;return c=r.util.transformPoint(c,l),(c=r.util.transformPoint(c,this.canvas.viewportTransform)).x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),a=this.get2DCursorLocation(e,!0),o=r.lineIndex,s=r.charIndex,l=a.lineIndex,c=a.charIndex;if(o!==l){if(this.styles[o])for(n=s;n<this._unwrappedTextLines[o].length;n++)delete this.styles[o][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][s+n-c]=i);for(n=o+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,o-l)}else if(this.styles[o]){i=this.styles[o];var u,h,f=c-s;for(n=s;n<c;n++)delete i[n];for(h in this.styles[o])(u=parseInt(h,10))>=c&&(i[u-f]=i[h],delete i[h])}},shiftLineStyles:function(e,n){var i=t(this.styles);for(var r in this.styles){var a=parseInt(r,10);a>e&&(this.styles[a+n]=i[a],i[a-n]||delete this.styles[a])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,n,i,r){var a,o={},s=!1,l=this._unwrappedTextLines[e].length===n;for(var c in i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&(a=this.styles[e][0===n?n:n-1]),this.styles[e]){var u=parseInt(c,10);u>=n&&(s=!0,o[u-n]=this.styles[e][c],l&&0===n||delete this.styles[e][c])}var h=!1;for(s&&!l&&(this.styles[e+i]=o,h=!0),h&&i--;i>0;)r&&r[i-1]?this.styles[e+i]={0:t(r[i-1])}:a?this.styles[e+i]={0:t(a)}:delete this.styles[e+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(e,n,i,r){this.styles||(this.styles={});var a=this.styles[e],o=a?t(a):{};for(var s in i||(i=1),o){var l=parseInt(s,10);l>=n&&(a[l+i]=o[l],o[l-i]||delete a[l])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+i]=t(r[i]));else if(a)for(var c=a[n?n-1:1];c&&i--;)this.styles[e][n+i]=t(c)},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],a=0,o=0;o<t.length;o++)"\n"===t[o]?r[++a]=0:r[a]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],a);for(o=1;o<a;o++)r[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,r[o],n):n&&this.styles[i.lineIndex+o]&&n[0]&&(this.styles[i.lineIndex+o][0]=n[0]),n=n&&n.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,r[o],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),r.util.object.extend(r.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n=this.getLocalPointer(t),i=0,r=0,a=0,o=0,s=0,l=0,c=this._textLines.length;l<c&&a<=n.y;l++)a+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(s)*this.scaleX,e=this._textLines[s],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+r);for(var u=0,h=e.length;u<h&&(i=r,(r+=this.__charBounds[s][u].kernedWidth*this.scaleX)<=n.x);u++)o++;return this._getNewSelectionStartFromOffset(n,i,r,o,h)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var a=t.x-e,o=n-t.x,s=i+(o>a||o<0?0:1);return this.flipX&&(s=r-s),s>this._text.length&&(s=this._text.length),s}}),r.util.object.extend(r.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=r.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):r.document.body.appendChild(this.hiddenTextarea),r.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),r.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),r.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),r.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(r.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,a,o,s,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,h=u-c,f=this.selectionStart,d=this.selectionEnd,p=f!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=f>g.selectionStart;p?(n=this._text.slice(f,d),h+=d-f):u<c&&(n=m?this._text.slice(d+h,d):this._text.slice(f,f-h)),i=l.slice(g.selectionEnd-h,g.selectionEnd),n&&n.length&&(i.length&&(a=this.getSelectionStyles(f,f+1,!1),a=i.map((function(){return a[0]}))),p?(o=f,s=d):m?(o=d-n.length,s=d):(o=d,s=d+n.length),this.removeStyleFromTo(o,s)),i.length&&(e&&i.join("")===r.copiedText&&!r.disableStyleCopyPaste&&(a=r.copiedTextStyle),this.insertNewStyleBlock(i,f,a)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(r.copiedText=this.getSelectedText(),r.disableStyleCopyPaste?r.copiedTextStyle=null:r.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||r.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(i+=(n=this.__charBounds[t][e-1]).left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var a=i.charIndex,o=this._getWidthBeforeCursor(r,a),s=this._getIndexOnLine(r+1,o);return this._textLines[r].slice(a).length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var a=i.charIndex,o=this._getWidthBeforeCursor(r,a),s=this._getIndexOnLine(r-1,o),l=this._textLines[r].slice(0,a),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],a=this._getLineLeftOffset(t),o=0,s=0,l=r.length;s<l;s++)if((a+=n=this.__charBounds[t][s].width)>e){i=!0;var c=a-n,u=a,h=Math.abs(c-e);o=Math.abs(u-e)<h?s:s-1;break}return i||(o=r.length-1),o},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if("undefined"!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){"undefined"===typeof i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var a=r.util.string.graphemeSplit(t);this.insertNewStyleBlock(a,n,e),this._text=[].concat(this._text.slice(0,n),a,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=r.util.toFixed,e=/  +/g;r.util.object.extend(r.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],a=t;this._setSVGBg(r);for(var o=0,s=this._textLines.length;o<s;o++)n=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+n,a),this._setSVGTextLineText(i,o,e+n,a),a+=this.getHeightOfLine(o);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(n,i,a,o){var s=n!==n.trim()||n.match(e),l=this.getSvgSpanStyles(i,s),c=l?'style="'+l+'"':"",u=i.deltaY,h="",f=r.Object.NUM_FRACTION_DIGITS;return u&&(h=' dy="'+t(u,f)+'" '),['<tspan x="',t(a,f),'" y="',t(o,f),'" ',h,c,">",r.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,i){var a,o,s,l,c,u=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf("justify"),f="",d=0,p=this._textLines[e];i+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var g=0,m=p.length-1;g<=m;g++)c=g===m||this.charSpacing,f+=p[g],s=this.__charBounds[e][g],0===d?(n+=s.kernedWidth-s.width,d+=s.width):d+=s.kernedWidth,h&&!c&&this._reSpaceAndTab.test(p[g])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(e,g),o=this.getCompleteStyleDeclaration(e,g+1),c=r.util.hasStyleChanged(a,o,!0)),c&&(l=this._getStyleDeclaration(e,g)||{},t.push(this._createTextCharSpan(f,l,n,i)),f="",a=o,n+=d,d=0)},_pushTextBgRect:function(e,n,i,a,o,s){var l=r.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(n),' x="',t(i,l),'" y="',t(a,l),'" width="',t(o,l),'" height="',t(s,l),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,a,o=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,f=o.length;h<f;h++)r=this.__charBounds[e][h],(a=this.getValueOfPropertyAt(e,h,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(t,u,n+c,i,l,s),c=r.left,l=r.width,u=a):l+=r.kernedWidth;a&&this._pushTextBgRect(t,a,n+c,i,l,s)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new r.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this.getHeightOfLine(i);return e=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return r.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},a=0;a<t.graphemeLines.length;a++)"\n"===t.graphemeText[i]&&a>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&a>0&&(n++,i++),r[a]={line:e,offset:n},i+=t.graphemeLines[a].length,n+=t.graphemeLines[a].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,i=0,r=!1,a=this._styleMap[t],o=this._styleMap[t+1];for(var s in a&&(t=a.line,i=a.offset),o&&(r=o.line===t,e=o.offset),n="undefined"===typeof t?this.styles:{line:this.styles[t]})for(var l in n[s])if(l>=i&&(!r||l<e))for(var c in n[s][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0;n=n||0;for(var a=0,o=t.length;a<o;a++){r+=this._getGraphemeBox(t[a],e,a+n,i,true).kernedWidth,i=t[a]}return r},_wrapLine:function(t,n,i,r){var a=0,o=this.splitByGrapheme,s=[],l=[],c=o?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",h=0,f=o?"":" ",d=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=o?c[y]:e.util.string.graphemeSplit(c[y]),d=this._measureWord(u,n,h),h+=u.length,(a+=p+d-v)>i&&!m?(s.push(l),l=[],a=d,m=!0):a+=v,m||o||l.push(f),l=l.concat(u),p=o?0:this._measureWord([f],n,h),h++,m=!1,d>g&&(g=d);return y&&s.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),s},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),a=0;a<i.length;a++)r[a]=i[a].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){var i=e.util.stylesFromArray(t.styles,t.text),r=Object.assign({},t,{styles:i});return e.Object._fromObject("Textbox",r,n,"text")}}(e),function(){var t=r.controlsUtils,e=t.scaleSkewCursorStyleHandler,n=t.scaleCursorStyleHandler,i=t.scalingEqually,a=t.scalingYOrSkewingX,o=t.scalingXOrSkewingY,s=t.scaleOrSkewActionName,l=r.Object.prototype.controls;if(l.ml=new r.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:o,getActionName:s}),l.mr=new r.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:o,getActionName:s}),l.mb=new r.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.mt=new r.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.tl=new r.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.tr=new r.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.bl=new r.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.br=new r.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.mtr=new r.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),r.Textbox){var c=r.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new r.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),c.ml=new r.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()},497:(t,e,n)=>{"use strict";var i=n(218);function r(){}function a(){}a.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},173:(t,e,n)=>{t.exports=n(497)()},218:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(t,e,n)=>{"use strict";var i=n(43),r=n(853);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)o.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function g(t,e,n,i,r,a,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(d,t)&&(f.test(t)?p[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=I&&t[I]||t["@@iterator"])?t:null}var R,F=Object.assign;function N(t){if(void 0===R)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var z=!1;function B(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?N(t):""}function U(t){switch(t.tag){case 5:return N(t.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function W(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case C:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case j:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case A:return null!==(e=t.displayName||null)?e:W(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return W(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(e);case 8:return e===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function X(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function V(t){t._valueTracker||(t._valueTracker=function(t){var e=X(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function G(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=X(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function J(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function $(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function Q(t,e){$(t,e);var n=Y(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(et(n)){if(1<n.length)throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function at(t,e){var n=Y(e.value),i=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function ft(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dt.hasOwnProperty(t)&&dt[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(dt).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dt[e]=dt[t]}))}));var vt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function _t(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,Ct=null,St=null;function kt(t){if(t=br(t)){if("function"!==typeof wt)throw Error(a(280));var e=t.stateNode;e&&(e=_r(e),wt(t.stateNode,t.type,e))}}function Tt(t){Ct?St?St.push(t):St=[t]:Ct=t}function Ot(){if(Ct){var t=Ct,e=St;if(St=Ct=null,kt(t),e)for(t=0;t<e.length;t++)kt(e[t])}}function jt(t,e){return t(e)}function Et(){}var Pt=!1;function At(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return jt(t,e,n)}finally{Pt=!1,(null!==Ct||null!==St)&&(Et(),Ot())}}function Mt(t,e){var n=t.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Dt=!1;if(u)try{var It={};Object.defineProperty(It,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch(ut){Dt=!1}function Lt(t,e,n,i,r,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rt=!1,Ft=null,Nt=!1,zt=null,Bt={onError:function(t){Rt=!0,Ft=t}};function Ut(t,e,n,i,r,a,o,s,l){Rt=!1,Ft=null,Lt.apply(Bt,arguments)}function Wt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Yt(t){if(Wt(t)!==t)throw Error(a(188))}function Xt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Wt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Yt(r),t;if(o===i)return Yt(r),e;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t))?Vt(t):null}function Vt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Vt(t);if(null!==e)return e;t=t.sibling}return null}var Gt=r.unstable_scheduleCallback,qt=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Jt=r.unstable_requestPaint,$t=r.unstable_now,Qt=r.unstable_getCurrentPriorityLevel,Zt=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,ae=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fe(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=he(s):0!==(a&=o)&&(i=he(a))}else 0!==(o=n&~r)?i=he(o):0!==a&&(i=he(a));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(a=e&-e)||16===r&&0!==(4194240&a)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-oe(e)),i|=t[n],e&=~r;return i}function de(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oe(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,we,Ce,Se,ke,Te=!1,Oe=[],je=null,Ee=null,Pe=null,Ae=new Map,Me=new Map,De=[],Ie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":je=null;break;case"dragenter":case"dragleave":Ee=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(e.pointerId)}}function Re(t,e,n,i,r,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&we(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Fe(t){var e=yr(t.target);if(null!==e){var n=Wt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void ke(t.priority,(function(){Ce(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ne(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&we(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);xt=i,n.target.dispatchEvent(i),xt=null,e.shift()}return!0}function ze(t,e,n){Ne(t)&&n.delete(e)}function Be(){Te=!1,null!==je&&Ne(je)&&(je=null),null!==Ee&&Ne(Ee)&&(Ee=null),null!==Pe&&Ne(Pe)&&(Pe=null),Ae.forEach(ze),Me.forEach(ze)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Be)))}function We(t){function e(e){return Ue(e,t)}if(0<Oe.length){Ue(Oe[0],t);for(var n=1;n<Oe.length;n++){var i=Oe[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==je&&Ue(je,t),null!==Ee&&Ue(Ee,t),null!==Pe&&Ue(Pe,t),Ae.forEach(e),Me.forEach(e),n=0;n<De.length;n++)(i=De[n]).blockedOn===t&&(i.blockedOn=null);for(;0<De.length&&null===(n=De[0]).blockedOn;)Fe(n),null===n.blockedOn&&De.shift()}var He=x.ReactCurrentBatchConfig,Ye=!0;function Xe(t,e,n,i){var r=be,a=He.transition;He.transition=null;try{be=1,Ge(t,e,n,i)}finally{be=r,He.transition=a}}function Ve(t,e,n,i){var r=be,a=He.transition;He.transition=null;try{be=4,Ge(t,e,n,i)}finally{be=r,He.transition=a}}function Ge(t,e,n,i){if(Ye){var r=Ke(t,e,n,i);if(null===r)Yi(t,e,i,qe,n),Le(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return je=Re(je,t,e,n,i,r),!0;case"dragenter":return Ee=Re(Ee,t,e,n,i,r),!0;case"mouseover":return Pe=Re(Pe,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Ae.set(a,Re(Ae.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Me.set(a,Re(Me.get(a)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Le(t,i),4&e&&-1<Ie.indexOf(t)){for(;null!==r;){var a=br(r);if(null!==a&&_e(a),null===(a=Ke(t,e,n,i))&&Yi(t,e,i,qe,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Yi(t,e,i,null,n)}}var qe=null;function Ke(t,e,n,i){if(qe=null,null!==(t=yr(t=_t(i))))if(null===(e=Wt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Je(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var $e=null,Qe=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Qe,i=n.length,r="value"in $e?$e.value:$e.textContent,a=r.length;for(t=0;t<i&&n[t]===r[t];t++);var o=i-t;for(e=1;e<=o&&n[i-e]===r[a-e];e++);return Ze=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function an(t){function e(e,n,i,r,a){for(var o in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),pn=an(dn),gn=an(F({},dn,{dataTransfer:0})),mn=an(F({},hn,{relatedTarget:0})),vn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Cn[t])&&!!e[t]}function kn(){return Sn}var Tn=F({},hn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),On=an(Tn),jn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(An),Dn=[9,13,27,32],In=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Rn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!In||Ln&&8<Ln&&11>=Ln),Nn=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Xn(t,e,n,i){Tt(i),0<(e=Vi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Vn=null,Gn=null;function qn(t){Ni(t,0)}function Kn(t){if(G(xr(t)))return t}function Jn(t,e){if("change"===t)return e}var $n=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zn="function"===typeof ti.oninput}Qn=Zn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function ei(){Vn&&(Vn.detachEvent("onpropertychange",ni),Gn=Vn=null)}function ni(t){if("value"===t.propertyName&&Kn(Gn)){var e=[];Xn(e,Gn,t,_t(t)),At(qn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Gn=n,(Vn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Gn)}function ai(t,e){if("click"===t)return Kn(e)}function oi(t,e){if("input"===t||"change"===t)return Kn(e)}var si="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(si(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!si(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fi(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=q((t=e.contentWindow).document)}return e}function di(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=fi(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!t.extend&&a>i&&(r=i,i=a,a=r),r=ui(n,a);var o=ui(n,i);r&&o&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function xi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==q(i)||("selectionStart"in(i=mi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Vi(vi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function _i(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Ci={},Si={};function ki(t){if(Ci[t])return Ci[t];if(!wi[t])return t;var e,n=wi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Si)return Ci[t]=n[e];return t}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ti=ki("animationend"),Oi=ki("animationiteration"),ji=ki("animationstart"),Ei=ki("transitionend"),Pi=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(t,e){Pi.set(t,e),l(e,[t])}for(var Di=0;Di<Ai.length;Di++){var Ii=Ai[Di];Mi(Ii.toLowerCase(),"on"+(Ii[0].toUpperCase()+Ii.slice(1)))}Mi(Ti,"onAnimationEnd"),Mi(Oi,"onAnimationIteration"),Mi(ji,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ei,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ri=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Fi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,s,l,c){if(Ut.apply(this,arguments),Rt){if(!Rt)throw Error(a(198));var u=Ft;Rt=!1,Ft=null,Nt||(Nt=!0,zt=u)}}(i,e,void 0,t),t.currentTarget=null}function Ni(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break t;Fi(r,s,c),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break t;Fi(r,s,c),a=l}}}if(Nt)throw t=zt,Nt=!1,zt=null,t}function zi(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Hi(e,t,2,!1),n.add(i))}function Bi(t,e,n){var i=0;e&&(i|=4),Hi(n,t,i,e)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function Wi(t){if(!t[Ui]){t[Ui]=!0,o.forEach((function(e){"selectionchange"!==e&&(Ri.has(e)||Bi(e,!1,t),Bi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ui]||(e[Ui]=!0,Bi("selectionchange",!1,e))}}function Hi(t,e,n,i){switch(Je(e)){case 1:var r=Xe;break;case 4:r=Ve;break;default:r=Ge}n=r.bind(null,e,n,t),r=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Yi(t,e,n,i,r){var a=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=yr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue t}s=s.parentNode}}i=i.return}At((function(){var i=a,r=_t(n),o=[];t:{var s=Pi.get(t);if(void 0!==s){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=On;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Ti:case Oi:case ji:l=vn;break;case Ei:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&e),h=!u&&"scroll"===t,f=u?null!==s?s+"Capture":null:s;u=[];for(var d,p=i;null!==p;){var g=(d=p).stateNode;if(5===d.tag&&null!==g&&(d=g,null!==f&&(null!=(g=Mt(p,f))&&u.push(Xi(p,g,d)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===xt||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Wt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=jn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?s:xr(l),d=null==c?s:xr(c),(s=new u(g,p+"leave",l,n,r)).target=h,s.relatedTarget=d,g=null,yr(r)===i&&((u=new u(f,p+"enter",c,n,r)).target=d,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(f=c,p=0,d=u=l;d;d=Gi(d))p++;for(d=0,g=f;g;g=Gi(g))d++;for(;0<p-d;)u=Gi(u),p--;for(;0<d-p;)f=Gi(f),d--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break t;u=Gi(u),f=Gi(f)}u=null}else u=null;null!==l&&qi(o,s,l,u,!1),null!==c&&null!==h&&qi(o,h,c,u,!0)}if("select"===(l=(s=i?xr(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Jn;else if(Yn(s))if($n)m=oi;else{m=ri;var v=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ai);switch(m&&(m=m(t,i))?Xn(o,m,n,r):(v&&v(t,s,i),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&tt(s,"number",s.value)),v=i?xr(i):window,t){case"focusin":(Yn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,xi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":xi(o,n,r)}var y;if(In)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Wn?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=tn()):(Qe="value"in($e=r)?$e.value:$e.textContent,Wn=!0)),0<(v=Vi(i,b)).length&&(b=new xn(b,t,null,n,r),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Rn?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(zn=!0,Nn);case"textInput":return(t=e.data)===Nn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Wn)return"compositionend"===t||!In&&Bn(t,e)?(t=tn(),Ze=Qe=$e=null,Wn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=Vi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}Ni(o,e)}))}function Xi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Mt(t,n))&&i.unshift(Xi(t,a,r)),null!=(a=Mt(t,e))&&i.push(Xi(t,a,r))),t=t.return}return i}function Gi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qi(t,e,n,i,r){for(var a=e._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Mt(n,a))&&o.unshift(Xi(n,l,s)):r||null!=(l=Mt(n,a))&&o.push(Xi(n,l,s))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Ki=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function $i(t){return("string"===typeof t?t:""+t).replace(Ki,"\n").replace(Ji,"")}function Qi(t,e,n){if(e=$i(e),$i(t)!==e&&n)throw Error(a(425))}function Zi(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(t){return ar.resolve(null).then(t).catch(sr)}:ir;function sr(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void We(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);We(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),fr="__reactFiber$"+hr,dr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[fr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[fr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[fr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function _r(t){return t[dr]||null}var wr=[],Cr=-1;function Sr(t){return{current:t}}function kr(t){0>Cr||(t.current=wr[Cr],wr[Cr]=null,Cr--)}function Tr(t,e){Cr++,wr[Cr]=t.current,t.current=e}var Or={},jr=Sr(Or),Er=Sr(!1),Pr=Or;function Ar(t,e){var n=t.type.contextTypes;if(!n)return Or;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Mr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Dr(){kr(Er),kr(jr)}function Ir(t,e,n){if(jr.current!==Or)throw Error(a(168));Tr(jr,e),Tr(Er,n)}function Lr(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(a(108,H(t)||"Unknown",r));return F({},n,i)}function Rr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,Pr=jr.current,Tr(jr,t),Tr(Er,Er.current),!0}function Fr(t,e,n){var i=t.stateNode;if(!i)throw Error(a(169));n?(t=Lr(t,e,Pr),i.__reactInternalMemoizedMergedChildContext=t,kr(Er),kr(jr),Tr(jr,t)):kr(Er),Tr(Er,n)}var Nr=null,zr=!1,Br=!1;function Ur(t){null===Nr?Nr=[t]:Nr.push(t)}function Wr(){if(!Br&&null!==Nr){Br=!0;var t=0,e=be;try{var n=Nr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Nr=null,zr=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(t+1)),Gt(Zt,Wr),r}finally{be=e,Br=!1}}return null}var Hr=[],Yr=0,Xr=null,Vr=0,Gr=[],qr=0,Kr=null,Jr=1,$r="";function Qr(t,e){Hr[Yr++]=Vr,Hr[Yr++]=Xr,Xr=t,Vr=e}function Zr(t,e,n){Gr[qr++]=Jr,Gr[qr++]=$r,Gr[qr++]=Kr,Kr=t;var i=Jr;t=$r;var r=32-oe(i)-1;i&=~(1<<r),n+=1;var a=32-oe(e)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jr=1<<32-oe(e)+r|n<<r|i,$r=a+t}else Jr=1<<a|n<<r|i,$r=t}function ta(t){null!==t.return&&(Qr(t,1),Zr(t,1,0))}function ea(t){for(;t===Xr;)Xr=Hr[--Yr],Hr[Yr]=null,Vr=Hr[--Yr],Hr[Yr]=null;for(;t===Kr;)Kr=Gr[--qr],Gr[qr]=null,$r=Gr[--qr],Gr[qr]=null,Jr=Gr[--qr],Gr[qr]=null}var na=null,ia=null,ra=!1,aa=null;function oa(t,e){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function sa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,na=t,ia=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,na=t,ia=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Kr?{id:Jr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=e,n.return=t,t.child=n,na=t,ia=null,!0);default:return!1}}function la(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function ca(t){if(ra){var e=ia;if(e){var n=e;if(!sa(t,e)){if(la(t))throw Error(a(418));e=cr(n.nextSibling);var i=na;e&&sa(t,e)?oa(i,n):(t.flags=-4097&t.flags|2,ra=!1,na=t)}}else{if(la(t))throw Error(a(418));t.flags=-4097&t.flags|2,ra=!1,na=t}}}function ua(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;na=t}function ha(t){if(t!==na)return!1;if(!ra)return ua(t),ra=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=ia)){if(la(t))throw fa(),Error(a(418));for(;e;)oa(t,e),e=cr(e.nextSibling)}if(ua(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ia=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ia=null}}else ia=na?cr(t.stateNode.nextSibling):null;return!0}function fa(){for(var t=ia;t;)t=cr(t.nextSibling)}function da(){ia=na=null,ra=!1}function pa(t){null===aa?aa=[t]:aa.push(t)}var ga=x.ReactCurrentBatchConfig;function ma(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function va(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ya(t){return(0,t._init)(t._payload)}function ba(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Dc(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var a=n.type;return a===C?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===M&&ya(a)===e.type)?((i=r(e,n.props)).ref=ma(t,e,n),i.return=t,i):((i=Ic(n.type,n.key,n.props,null,t.mode,i)).ref=ma(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Nc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,a){return null===e||7!==e.tag?((e=Lc(n,t.mode,i,a)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(n=Ic(e.type,e.key,e.props,null,t.mode,n)).ref=ma(t,null,e),n.return=t,n;case w:return(e=Nc(e,t.mode,n)).return=t,e;case M:return f(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Lc(e,t.mode,n,null)).return=t,e;va(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(t,e,n,i):null;case w:return n.key===r?u(t,e,n,i):null;case M:return d(t,e,(r=n._init)(n._payload),i)}if(et(n)||L(n))return null!==r?null:h(t,e,n,i,null);va(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case w:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case M:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||L(i))return h(e,t=t.get(n)||null,i,r,null);va(e,i)}return null}function g(r,a,s,l){for(var c=null,u=null,h=a,g=a=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=d(r,h,s[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),a=o(v,a,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===s.length)return n(r,h),ra&&Qr(r,g),c;if(null===h){for(;g<s.length;g++)null!==(h=f(r,s[g],l))&&(a=o(h,a,g),null===u?c=h:u.sibling=h,u=h);return ra&&Qr(r,g),c}for(h=i(r,h);g<s.length;g++)null!==(m=p(h,r,g,s[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),a=o(m,a,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),ra&&Qr(r,g),c}function m(r,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=d(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),s=o(b,s,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),ra&&Qr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=f(r,y.value,c))&&(s=o(y,s,m),null===h?u=y:h.sibling=y,h=y);return ra&&Qr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(r,t)})),ra&&Qr(r,m),u}return function t(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:t:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===C){if(7===u.tag){n(i,u.sibling),(a=r(u,o.props.children)).return=i,i=a;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&ya(c)===u.type){n(i,u.sibling),(a=r(u,o.props)).ref=ma(i,u,o),a.return=i,i=a;break t}n(i,u);break}e(i,u),u=u.sibling}o.type===C?((a=Lc(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Ic(o.type,o.key,o.props,null,i.mode,l)).ref=ma(i,a,o),l.return=i,i=l)}return s(i);case w:t:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break t}n(i,a);break}e(i,a),a=a.sibling}(a=Nc(o,i.mode,l)).return=i,i=a}return s(i);case M:return t(i,a,(u=o._init)(o._payload),l)}if(et(o))return g(i,a,o,l);if(L(o))return m(i,a,o,l);va(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=Fc(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var xa=ba(!0),_a=ba(!1),wa=Sr(null),Ca=null,Sa=null,ka=null;function Ta(){ka=Sa=Ca=null}function Oa(t){var e=wa.current;kr(wa),t._currentValue=e}function ja(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ea(t,e){Ca=t,ka=Sa=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(bs=!0),t.firstContext=null)}function Pa(t){var e=t._currentValue;if(ka!==t)if(t={context:t,memoizedValue:e,next:null},null===Sa){if(null===Ca)throw Error(a(308));Sa=t,Ca.dependencies={lanes:0,firstContext:t}}else Sa=Sa.next=t;return e}var Aa=null;function Ma(t){null===Aa?Aa=[t]:Aa.push(t)}function Da(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Ma(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ia(t,i)}function Ia(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var La=!1;function Ra(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function za(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&jl)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ia(t,n)}return null===(r=i.interleaved)?(e.next=e,Ma(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ia(t,n)}function Ba(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function Ua(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=e:a=a.next=e}else r=a=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wa(t,e,n,i){var r=t.updateQueue;La=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=r.baseState;for(o=0,u=c=l=null,s=a;;){var f=s.lane,d=s.eventTime;if((i&f)===f){null!==u&&(u=u.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,g=s;switch(f=e,d=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(d,h,f);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(d,h,f):p)||void 0===f)break t;h=F({},h,f);break t;case 2:La=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(f=r.effects)?r.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=d,l=h):u=u.next=d,o|=f;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(f=s).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{o|=r.lane,r=r.next}while(r!==e)}else null===a&&(r.shared.lanes=0);Rl|=o,t.lanes=o,t.memoizedState=h}}function Ha(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Ya={},Xa=Sr(Ya),Va=Sr(Ya),Ga=Sr(Ya);function qa(t){if(t===Ya)throw Error(a(174));return t}function Ka(t,e){switch(Tr(Ga,e),Tr(Va,t),Tr(Xa,Ya),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}kr(Xa),Tr(Xa,e)}function Ja(){kr(Xa),kr(Va),kr(Ga)}function $a(t){qa(Ga.current);var e=qa(Xa.current),n=lt(e,t.type);e!==n&&(Tr(Va,t),Tr(Xa,n))}function Qa(t){Va.current===t&&(kr(Xa),kr(Va))}var Za=Sr(0);function to(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function no(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var io=x.ReactCurrentDispatcher,ro=x.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(a(321))}function go(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function mo(t,e,n,i,r,o){if(ao=o,oo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,io.current=null===t||null===t.memoizedState?Zo:ts,t=n(i,r),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,e.updateQueue=null,io.current=es,t=n(i,r)}while(uo)}if(io.current=Qo,e=null!==so&&null!==so.next,ao=0,lo=so=oo=null,co=!1,e)throw Error(a(300));return t}function vo(){var t=0!==ho;return ho=0,t}function yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=t:lo=lo.next=t,lo}function bo(){if(null===so){var t=oo.alternate;t=null!==t?t.memoizedState:null}else t=so.next;var e=null===lo?oo.memoizedState:lo.next;if(null!==e)lo=e,so=t;else{if(null===t)throw Error(a(310));t={memoizedState:(so=t).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=t:lo=lo.next=t}return lo}function xo(t,e){return"function"===typeof e?e(t):e}function _o(t){var e=bo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=so,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((ao&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=i):c=c.next=f,oo.lanes|=h,Rl|=h}u=u.next}while(null!==u&&u!==o);null===c?s=i:c.next=l,si(i,e.memoizedState)||(bs=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,oo.lanes|=o,Rl|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wo(t){var e=bo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=t(o,s.action),s=s.next}while(s!==r);si(o,e.memoizedState)||(bs=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Co(){}function So(t,e){var n=oo,i=bo(),r=e(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,bs=!0),i=i.queue,Ro(Oo.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,To.bind(null,n,i,r,e),void 0,null),null===El)throw Error(a(349));0!==(30&ao)||ko(n,e,r)}return r}function ko(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function To(t,e,n,i){e.value=n,e.getSnapshot=i,jo(e)&&Eo(t)}function Oo(t,e,n){return n((function(){jo(e)&&Eo(t)}))}function jo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch(i){return!0}}function Eo(t){var e=Ia(t,1);null!==e&&nc(e,t,1,-1)}function Po(t){var e=yo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=qo.bind(null,oo,t),[e.memoizedState,t]}function Ao(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Mo(){return bo().memoizedState}function Do(t,e,n,i){var r=yo();oo.flags|=t,r.memoizedState=Ao(1|e,n,void 0,void 0===i?null:i)}function Io(t,e,n,i){var r=bo();i=void 0===i?null:i;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==i&&go(i,o.deps))return void(r.memoizedState=Ao(e,n,a,i))}oo.flags|=t,r.memoizedState=Ao(1|e,n,a,i)}function Lo(t,e){return Do(8390656,8,t,e)}function Ro(t,e){return Io(2048,8,t,e)}function Fo(t,e){return Io(4,2,t,e)}function No(t,e){return Io(4,4,t,e)}function zo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Bo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Io(4,4,zo.bind(null,e,t),n)}function Uo(){}function Wo(t,e){var n=bo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&go(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Ho(t,e){var n=bo();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&go(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Yo(t,e,n){return 0===(21&ao)?(t.baseState&&(t.baseState=!1,bs=!0),t.memoizedState=n):(si(n,e)||(n=ge(),oo.lanes|=n,Rl|=n,t.baseState=!0),e)}function Xo(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=ro.transition;ro.transition={};try{t(!1),e()}finally{be=n,ro.transition=i}}function Vo(){return bo().memoizedState}function Go(t,e,n){var i=ec(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(t))Jo(e,n);else if(null!==(n=Da(t,e,n,i))){nc(n,t,i,tc()),$o(n,e,i)}}function qo(t,e,n){var i=ec(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(t))Jo(e,r);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var o=e.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,o)){var l=e.interleaved;return null===l?(r.next=r,Ma(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Da(t,e,r,i))&&(nc(n,t,i,r=tc()),$o(n,e,i))}}function Ko(t){var e=t.alternate;return t===oo||null!==e&&e===oo}function Jo(t,e){uo=co=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $o(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Qo={readContext:Pa,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Pa,useCallback:function(t,e){return yo().memoizedState=[t,void 0===e?null:e],t},useContext:Pa,useEffect:Lo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Do(4194308,4,zo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){return Do(4,2,t,e)},useMemo:function(t,e){var n=yo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yo();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Go.bind(null,oo,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},yo().memoizedState=t},useState:Po,useDebugValue:Uo,useDeferredValue:function(t){return yo().memoizedState=t},useTransition:function(){var t=Po(!1),e=t[0];return t=Xo.bind(null,t[1]),yo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=oo,r=yo();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===El)throw Error(a(349));0!==(30&ao)||ko(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Lo(Oo.bind(null,i,o,t),[t]),i.flags|=2048,Ao(9,To.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=yo(),e=El.identifierPrefix;if(ra){var n=$r;e=":"+e+"R"+(n=(Jr&~(1<<32-oe(Jr)-1)).toString(32)+n),0<(n=ho++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ts={readContext:Pa,useCallback:Wo,useContext:Pa,useEffect:Ro,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:No,useMemo:Ho,useReducer:_o,useRef:Mo,useState:function(){return _o(xo)},useDebugValue:Uo,useDeferredValue:function(t){return Yo(bo(),so.memoizedState,t)},useTransition:function(){return[_o(xo)[0],bo().memoizedState]},useMutableSource:Co,useSyncExternalStore:So,useId:Vo,unstable_isNewReconciler:!1},es={readContext:Pa,useCallback:Wo,useContext:Pa,useEffect:Ro,useImperativeHandle:Bo,useInsertionEffect:Fo,useLayoutEffect:No,useMemo:Ho,useReducer:wo,useRef:Mo,useState:function(){return wo(xo)},useDebugValue:Uo,useDeferredValue:function(t){var e=bo();return null===so?e.memoizedState=t:Yo(e,so.memoizedState,t)},useTransition:function(){return[wo(xo)[0],bo().memoizedState]},useMutableSource:Co,useSyncExternalStore:So,useId:Vo,unstable_isNewReconciler:!1};function ns(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function is(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var rs={isMounted:function(t){return!!(t=t._reactInternals)&&Wt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),a=Na(i,r);a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=za(t,a,r))&&(nc(e,t,r,i),Ba(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=tc(),r=ec(t),a=Na(i,r);a.tag=1,a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=za(t,a,r))&&(nc(e,t,r,i),Ba(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),i=ec(t),r=Na(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=za(t,r,i))&&(nc(e,t,i,n),Ba(e,t,i))}};function as(t,e,n,i,r,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,a))}function os(t,e,n){var i=!1,r=Or,a=e.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(r=Mr(e)?Pr:jr.current,a=(i=null!==(i=e.contextTypes)&&void 0!==i)?Ar(t,r):Or),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=rs,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function ss(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&rs.enqueueReplaceState(e,e.state,null)}function ls(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ra(t);var a=e.contextType;"object"===typeof a&&null!==a?r.context=Pa(a):(a=Mr(e)?Pr:jr.current,r.context=Ar(t,a)),r.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(is(t,e,a,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&rs.enqueueReplaceState(r,r.state,null),Wa(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function cs(t,e){try{var n="",i=e;do{n+=U(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:r,digest:null}}function us(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function hs(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Yl||(Yl=!0,Xl=i),hs(0,e)},n}function ps(t,e,n){(n=Na(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){hs(0,e)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,e),"function"!==typeof i&&(null===Vl?Vl=new Set([this]):Vl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function gs(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fs;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=kc.bind(null,t,e,n),e.then(t,t))}function ms(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Na(-1,1)).tag=2,za(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var ys=x.ReactCurrentOwner,bs=!1;function xs(t,e,n,i){e.child=null===t?_a(e,null,n,i):xa(e,t.child,n,i)}function _s(t,e,n,i,r){n=n.render;var a=e.ref;return Ea(e,r),i=mo(t,e,n,i,a,r),n=vo(),null===t||bs?(ra&&n&&ta(e),e.flags|=1,xs(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ys(t,e,r))}function ws(t,e,n,i,r){if(null===t){var a=n.type;return"function"!==typeof a||Mc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ic(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Cs(t,e,a,i,r))}if(a=t.child,0===(t.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&t.ref===e.ref)return Ys(t,e,r)}return e.flags|=1,(t=Dc(a,i)).ref=e.ref,t.return=e,e.child=t}function Cs(t,e,n,i,r){if(null!==t){var a=t.memoizedProps;if(li(a,i)&&t.ref===e.ref){if(bs=!1,e.pendingProps=i=a,0===(t.lanes&r))return e.lanes=t.lanes,Ys(t,e,r);0!==(131072&t.flags)&&(bs=!0)}}return Ts(t,e,n,i,r)}function Ss(t,e,n){var i=e.pendingProps,r=i.children,a=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Dl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Dl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,Tr(Dl,Ml),Ml|=i}else null!==a?(i=a.baseLanes|n,e.memoizedState=null):i=n,Tr(Dl,Ml),Ml|=i;return xs(t,e,r,n),e.child}function ks(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ts(t,e,n,i,r){var a=Mr(n)?Pr:jr.current;return a=Ar(e,a),Ea(e,r),n=mo(t,e,n,i,a,r),i=vo(),null===t||bs?(ra&&i&&ta(e),e.flags|=1,xs(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ys(t,e,r))}function Os(t,e,n,i,r){if(Mr(n)){var a=!0;Rr(e)}else a=!1;if(Ea(e,r),null===e.stateNode)Hs(t,e),os(e,n,i),ls(e,n,i,r),i=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pa(c):c=Ar(e,c=Mr(n)?Pr:jr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==c)&&ss(e,o,i,c),La=!1;var f=e.memoizedState;o.state=f,Wa(e,i,o,r),l=e.memoizedState,s!==i||f!==l||Er.current||La?("function"===typeof u&&(is(e,n,u,i),l=e.memoizedState),(s=La||as(e,n,s,i,f,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"===typeof o.componentDidMount&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Fa(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:ns(e.type,s),o.props=c,h=e.pendingProps,f=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pa(l):l=Ar(e,l=Mr(n)?Pr:jr.current);var d=n.getDerivedStateFromProps;(u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==l)&&ss(e,o,i,l),La=!1,f=e.memoizedState,o.state=f,Wa(e,i,o,r);var p=e.memoizedState;s!==h||f!==p||Er.current||La?("function"===typeof d&&(is(e,n,d,i),p=e.memoizedState),(c=La||as(e,n,c,i,f,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return js(t,e,n,i,a,r)}function js(t,e,n,i,r,a){ks(t,e);var o=0!==(128&e.flags);if(!i&&!o)return r&&Fr(e,n,!1),Ys(t,e,a);i=e.stateNode,ys.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&o?(e.child=xa(e,t.child,null,a),e.child=xa(e,null,s,a)):xs(t,e,s,a),e.memoizedState=i.state,r&&Fr(e,n,!0),e.child}function Es(t){var e=t.stateNode;e.pendingContext?Ir(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ir(0,e.context,!1),Ka(t,e.containerInfo)}function Ps(t,e,n,i,r){return da(),pa(r),e.flags|=256,xs(t,e,n,i),e.child}var As,Ms,Ds,Is,Ls={dehydrated:null,treeContext:null,retryLane:0};function Rs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fs(t,e,n){var i,r=e.pendingProps,o=Za.current,s=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Tr(Za,1&o),null===t)return ca(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,r,0,null),t=Lc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rs(n),e.memoizedState=Ls,t):Ns(e,l));if(null!==(o=t.memoizedState)&&null!==(i=o.dehydrated))return function(t,e,n,i,r,o,s){if(n)return 256&e.flags?(e.flags&=-257,zs(t,e,s,i=us(Error(a(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Rc({mode:"visible",children:i.children},r,0,null),(o=Lc(o,r,s,null)).flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,0!==(1&e.mode)&&xa(e,t.child,null,s),e.child.memoizedState=Rs(s),e.memoizedState=Ls,o);if(0===(1&e.mode))return zs(t,e,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,zs(t,e,s,i=us(o=Error(a(419)),i,void 0))}if(l=0!==(s&t.childLanes),bs||l){if(null!==(i=El)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ia(t,r),nc(i,t,r,-1))}return gc(),zs(t,e,s,i=us(Error(a(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Oc.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,ia=cr(r.nextSibling),na=e,ra=!0,aa=null,null!==t&&(Gr[qr++]=Jr,Gr[qr++]=$r,Gr[qr++]=Kr,Jr=t.id,$r=t.overflow,Kr=e),e=Ns(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,o,n);if(s){s=r.fallback,l=e.mode,i=(o=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==o?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=Dc(i,s):(s=Lc(s,l,n,null)).flags|=2,s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=null===(l=t.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ls,r}return t=(s=t.child).sibling,r=Dc(s,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ns(t,e){return(e=Rc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function zs(t,e,n,i){return null!==i&&pa(i),xa(e,t.child,null,n),(t=Ns(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Bs(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),ja(t.return,e,n)}function Us(t,e,n,i,r){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Ws(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(xs(t,e,i.children,n),0!==(2&(i=Za.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Bs(t,n,e);else if(19===t.tag)Bs(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(Za,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===to(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Us(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===to(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Us(e,!0,n,null,a);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Rl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Dc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Dc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Xs(t,e){if(!ra)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Gs(t,e,n){var i=e.pendingProps;switch(ea(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(e),null;case 1:case 17:return Mr(e.type)&&Dr(),Vs(e),null;case 3:return i=e.stateNode,Ja(),kr(Er),kr(jr),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ha(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==aa&&(oc(aa),aa=null))),Ms(t,e),Vs(e),null;case 5:Qa(e);var r=qa(Ga.current);if(n=e.type,null!==t&&null!=e.stateNode)Ds(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(a(166));return Vs(e),null}if(t=qa(Xa.current),ha(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[fr]=e,i[dr]=o,t=0!==(1&e.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Li.length;r++)zi(Li[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":J(i,o),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},zi("invalid",i);break;case"textarea":rt(i,o),zi("invalid",i)}for(var l in yt(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qi(i.textContent,c,t),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":V(i),Z(i,o,!0);break;case"textarea":V(i),ot(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[fr]=e,t[dr]=i,As(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":zi("cancel",t),zi("close",t),r=i;break;case"iframe":case"object":case"embed":zi("load",t),r=i;break;case"video":case"audio":for(r=0;r<Li.length;r++)zi(Li[r],t);r=i;break;case"source":zi("error",t),r=i;break;case"img":case"image":case"link":zi("error",t),zi("load",t),r=i;break;case"details":zi("toggle",t),r=i;break;case"input":J(t,i),r=K(t,i),zi("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),zi("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),zi("invalid",t)}for(o in yt(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?mt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&ft(t,u):"number"===typeof u&&ft(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zi("scroll",t):null!=u&&b(t,o,u,l))}switch(n){case"input":V(t),Z(t,i,!1);break;case"textarea":V(t),ot(t);break;case"option":null!=i.value&&t.setAttribute("value",""+Y(i.value));break;case"select":t.multiple=!!i.multiple,null!=(o=i.value)?nt(t,!!i.multiple,o,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Vs(e),null;case 6:if(t&&null!=e.stateNode)Is(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(a(166));if(n=qa(Ga.current),qa(Xa.current),ha(e)){if(i=e.stateNode,n=e.memoizedProps,i[fr]=e,(o=i.nodeValue!==n)&&null!==(t=na))switch(t.tag){case 3:Qi(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qi(i.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=e,e.stateNode=i}return Vs(e),null;case 13:if(kr(Za),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ra&&null!==ia&&0!==(1&e.mode)&&0===(128&e.flags))fa(),da(),e.flags|=98560,o=!1;else if(o=ha(e),null!==i&&null!==i.dehydrated){if(null===t){if(!o)throw Error(a(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fr]=e}else da(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Vs(e),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&Za.current)?0===Il&&(Il=3):gc())),null!==e.updateQueue&&(e.flags|=4),Vs(e),null);case 4:return Ja(),Ms(t,e),null===t&&Wi(e.stateNode.containerInfo),Vs(e),null;case 10:return Oa(e.type._context),Vs(e),null;case 19:if(kr(Za),null===(o=e.memoizedState))return Vs(e),null;if(i=0!==(128&e.flags),null===(l=o.rendering))if(i)Xs(o,!1);else{if(0!==Il||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=to(t))){for(e.flags|=128,Xs(o,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(Za,1&Za.current|2),e.child}t=t.sibling}null!==o.tail&&$t()>Wl&&(e.flags|=128,i=!0,Xs(o,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=to(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Xs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ra)return Vs(e),null}else 2*$t()-o.renderingStartTime>Wl&&1073741824!==n&&(e.flags|=128,i=!0,Xs(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$t(),e.sibling=null,n=Za.current,Tr(Za,i?1&n|2:1&n),e):(Vs(e),null);case 22:case 23:return hc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Vs(e),6&e.subtreeFlags&&(e.flags|=8192)):Vs(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}function qs(t,e){switch(ea(e),e.tag){case 1:return Mr(e.type)&&Dr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Ja(),kr(Er),kr(jr),no(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Qa(e),null;case 13:if(kr(Za),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));da()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return kr(Za),null;case 4:return Ja(),null;case 10:return Oa(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(){},Ds=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,qa(Xa.current);var a,o=null;switch(n){case"input":r=K(t,r),i=K(t,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=it(t,r),i=it(t,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=Zi)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Is=function(t,e,n,i){n!==i&&(e.flags|=4)};var Ks=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Zs(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Sc(t,e,i)}else n.current=null}function tl(t,e,n){try{n()}catch(i){Sc(t,e,i)}}var el=!1;function nl(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,void 0!==a&&tl(e,n,a)}r=r.next}while(r!==i)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[fr],delete e[dr],delete e[gr],delete e[mr],delete e[vr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function sl(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zi));else if(4!==i&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function fl(t,e,n){for(n=n.child;null!==n;)dl(t,e,n),n=n.sibling}function dl(t,e,n){if(ae&&"function"===typeof ae.onCommitFiberUnmount)try{ae.onCommitFiberUnmount(re,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,e);case 6:var i=ul,r=hl;ul=null,fl(t,e,n),hl=r,null!==(ul=i)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),We(t)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,fl(t,e,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,e,o),r=r.next}while(r!==i)}fl(t,e,n);break;case 1:if(!Js&&(Zs(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Sc(n,e,s)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Js=(i=Js)||null!==n.memoizedState,fl(t,e,n),Js=i):fl(t,e,n);break;default:fl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new $s),e.forEach((function(e){var i=jc.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function gl(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(a(160));dl(o,s,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Sc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)ml(e,t),e=e.sibling}function ml(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gl(e,t),vl(t),4&i){try{nl(3,t,t.return),il(3,t)}catch(m){Sc(t,t.return,m)}try{nl(5,t,t.return)}catch(m){Sc(t,t.return,m)}}break;case 1:gl(e,t),vl(t),512&i&&null!==n&&Zs(n,n.return);break;case 5:if(gl(e,t),vl(t),512&i&&null!==n&&Zs(n,n.return),32&t.flags){var r=t.stateNode;try{ft(r,"")}catch(m){Sc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var o=t.memoizedProps,s=null!==n?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),bt(l,s);var u=bt(l,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?mt(r,f):"dangerouslySetInnerHTML"===h?ht(r,f):"children"===h?ft(r,f):b(r,h,f,u)}switch(l){case"input":Q(r,o);break;case"textarea":at(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?nt(r,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?nt(r,!!o.multiple,o.defaultValue,!0):nt(r,!!o.multiple,o.multiple?[]:"",!1))}r[dr]=o}catch(m){Sc(t,t.return,m)}}break;case 6:if(gl(e,t),vl(t),4&i){if(null===t.stateNode)throw Error(a(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(m){Sc(t,t.return,m)}}break;case 3:if(gl(e,t),vl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{We(e.containerInfo)}catch(m){Sc(t,t.return,m)}break;case 4:default:gl(e,t),vl(t);break;case 13:gl(e,t),vl(t),8192&(r=t.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Ul=$t())),4&i&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Js=(u=Js)||h,gl(e,t),Js=u):gl(e,t),vl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Qs=t,h=t.child;null!==h;){for(f=Qs=h;null!==Qs;){switch(p=(d=Qs).child,d.tag){case 0:case 11:case 14:case 15:nl(4,d,d.return);break;case 1:Zs(d,d.return);var g=d.stateNode;if("function"===typeof g.componentWillUnmount){i=d,n=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Sc(i,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){_l(f);continue}}null!==p?(p.return=d,Qs=p):_l(f)}h=h.sibling}t:for(h=null,f=t;;){if(5===f.tag){if(null===h){h=f;try{r=f.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",s))}catch(m){Sc(t,t.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Sc(t,t.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===t)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;null===f.sibling;){if(null===f.return||f.return===t)break t;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(e,t),vl(t),4&i&&pl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var i=n;break t}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ft(r,""),i.flags&=-33),cl(t,sl(t),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(t,sl(t),o);break;default:throw Error(a(161))}}catch(s){Sc(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Qs=t,bl(t,e,n)}function bl(t,e,n){for(var i=0!==(1&t.mode);null!==Qs;){var r=Qs,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ks;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Ks;var c=Js;if(Ks=o,(Js=l)&&!c)for(Qs=r;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?wl(r):null!==l?(l.return=o,Qs=l):wl(r);for(;null!==a;)Qs=a,bl(a,e,n),a=a.sibling;Qs=r,Ks=s,Js=c}xl(t)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Qs=a):xl(t)}}function xl(t){for(;null!==Qs;){var e=Qs;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Js||il(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Js)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ns(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Ha(e,o,i);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Ha(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&We(f)}}}break;default:throw Error(a(163))}Js||512&e.flags&&rl(e)}catch(d){Sc(e,e.return,d)}}if(e===t){Qs=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qs=n;break}Qs=e.return}}function _l(t){for(;null!==Qs;){var e=Qs;if(e===t){Qs=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qs=n;break}Qs=e.return}}function wl(t){for(;null!==Qs;){var e=Qs;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Sc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Sc(e,r,l)}}var a=e.return;try{rl(e)}catch(l){Sc(e,a,l)}break;case 5:var o=e.return;try{rl(e)}catch(l){Sc(e,o,l)}}}catch(l){Sc(e,e.return,l)}if(e===t){Qs=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Qs=s;break}Qs=e.return}}var Cl,Sl=Math.ceil,kl=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Ol=x.ReactCurrentBatchConfig,jl=0,El=null,Pl=null,Al=0,Ml=0,Dl=Sr(0),Il=0,Ll=null,Rl=0,Fl=0,Nl=0,zl=null,Bl=null,Ul=0,Wl=1/0,Hl=null,Yl=!1,Xl=null,Vl=null,Gl=!1,ql=null,Kl=0,Jl=0,$l=null,Ql=-1,Zl=0;function tc(){return 0!==(6&jl)?$t():-1!==Ql?Ql:Ql=$t()}function ec(t){return 0===(1&t.mode)?1:0!==(2&jl)&&0!==Al?Al&-Al:null!==ga.transition?(0===Zl&&(Zl=ge()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Je(t.type)}function nc(t,e,n,i){if(50<Jl)throw Jl=0,$l=null,Error(a(185));ve(t,n,i),0!==(2&jl)&&t===El||(t===El&&(0===(2&jl)&&(Fl|=n),4===Il&&sc(t,Al)),ic(t,i),1===n&&0===jl&&0===(1&e.mode)&&(Wl=$t()+500,zr&&Wr()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-oe(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=de(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}(t,e);var i=fe(t,t===El?Al:0);if(0===i)null!==n&&qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&qt(n),1===e)0===t.tag?function(t){zr=!0,Ur(t)}(lc.bind(null,t)):Ur(lc.bind(null,t)),or((function(){0===(6&jl)&&Wr()})),n=null;else{switch(xe(i)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Ec(n,rc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rc(t,e){if(Ql=-1,Zl=0,0!==(6&jl))throw Error(a(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var i=fe(t,t===El?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=mc(t,i);else{e=i;var r=jl;jl|=2;var o=pc();for(El===t&&Al===e||(Hl=null,Wl=$t()+500,fc(t,e));;)try{yc();break}catch(l){dc(t,l)}Ta(),kl.current=o,jl=r,null!==Pl?e=0:(El=null,Al=0,e=Il)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=ac(t,r))),1===e)throw n=Ll,fc(t,0),sc(t,i),ic(t,$t()),n;if(6===e)sc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!si(a(),r))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=mc(t,i))&&(0!==(o=pe(t))&&(i=o,e=ac(t,o))),1===e))throw n=Ll,fc(t,0),sc(t,i),ic(t,$t()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(a(345));case 2:case 5:_c(t,Bl,Hl);break;case 3:if(sc(t,i),(130023424&i)===i&&10<(e=Ul+500-$t())){if(0!==fe(t,0))break;if(((r=t.suspendedLanes)&i)!==i){tc(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(_c.bind(null,t,Bl,Hl),e);break}_c(t,Bl,Hl);break;case 4:if(sc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-oe(i);o=1<<s,(s=e[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=$t()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Sl(i/1960))-i)){t.timeoutHandle=ir(_c.bind(null,t,Bl,Hl),i);break}_c(t,Bl,Hl);break;default:throw Error(a(329))}}}return ic(t,$t()),t.callbackNode===n?rc.bind(null,t):null}function ac(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=mc(t,e))&&(e=Bl,Bl=n,null!==e&&oc(e)),t}function oc(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function sc(t,e){for(e&=~Nl,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),i=1<<n;t[n]=-1,e&=~i}}function lc(t){if(0!==(6&jl))throw Error(a(327));wc();var e=fe(t,0);if(0===(1&e))return ic(t,$t()),null;var n=mc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=ac(t,i))}if(1===n)throw n=Ll,fc(t,0),sc(t,e),ic(t,$t()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_c(t,Bl,Hl),ic(t,$t()),null}function cc(t,e){var n=jl;jl|=1;try{return t(e)}finally{0===(jl=n)&&(Wl=$t()+500,zr&&Wr())}}function uc(t){null!==ql&&0===ql.tag&&0===(6&jl)&&wc();var e=jl;jl|=1;var n=Ol.transition,i=be;try{if(Ol.transition=null,be=1,t)return t()}finally{be=i,Ol.transition=n,0===(6&(jl=e))&&Wr()}}function hc(){Ml=Dl.current,kr(Dl)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(ea(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Dr();break;case 3:Ja(),kr(Er),kr(jr),no();break;case 5:Qa(i);break;case 4:Ja();break;case 13:case 19:kr(Za);break;case 10:Oa(i.type._context);break;case 22:case 23:hc()}n=n.return}if(El=t,Pl=t=Dc(t.current,null),Al=Ml=e,Il=0,Ll=null,Nl=Fl=Rl=0,Bl=zl=null,null!==Aa){for(e=0;e<Aa.length;e++)if(null!==(i=(n=Aa[e]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}Aa=null}return t}function dc(t,e){for(;;){var n=Pl;try{if(Ta(),io.current=Qo,co){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}co=!1}if(ao=0,lo=so=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Il=1,Ll=e,Pl=null;break}t:{var o=t,s=n.return,l=n,c=e;if(e=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,e),1&p.mode&&gs(o,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){gs(o,u,e),gc();break t}c=Error(a(426))}else if(ra&&1&l.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,e),pa(cs(c,l));break t}}o=c=cs(c,l),4!==Il&&(Il=2),null===zl?zl=[o]:zl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ua(o,ds(0,c,e));break t;case 1:l=c;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vl||!Vl.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Ua(o,ps(o,l,e));break t}}o=o.return}while(null!==o)}xc(n)}catch(x){e=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var t=kl.current;return kl.current=Qo,null===t?Qo:t}function gc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===El||0===(268435455&Rl)&&0===(268435455&Fl)||sc(El,Al)}function mc(t,e){var n=jl;jl|=2;var i=pc();for(El===t&&Al===e||(Hl=null,fc(t,e));;)try{vc();break}catch(r){dc(t,r)}if(Ta(),jl=n,kl.current=i,null!==Pl)throw Error(a(261));return El=null,Al=0,Il}function vc(){for(;null!==Pl;)bc(Pl)}function yc(){for(;null!==Pl&&!Kt();)bc(Pl)}function bc(t){var e=Cl(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?xc(t):Pl=e,Tl.current=null}function xc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Gs(n,e,Ml)))return void(Pl=n)}else{if(null!==(n=qs(n,e)))return n.flags&=32767,void(Pl=n);if(null===t)return Il=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Il&&(Il=5)}function _c(t,e,n){var i=be,r=Ol.transition;try{Ol.transition=null,be=1,function(t,e,n,i){do{wc()}while(null!==ql);if(0!==(6&jl))throw Error(a(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-oe(n),a=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~a}}(t,o),t===El&&(Pl=El=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ec(ee,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ol.transition,Ol.transition=null;var s=be;be=1;var l=jl;jl|=4,Tl.current=null,function(t,e){if(tr=Ye,di(t=fi())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break t}var s=0,l=-1,c=-1,u=0,h=0,f=t,d=null;e:for(;;){for(var p;f!==n||0!==r&&3!==f.nodeType||(l=s+r),f!==o||0!==i&&3!==f.nodeType||(c=s+i),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===t)break e;if(d===n&&++u===r&&(l=s),d===o&&++h===i&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},Ye=!1,Qs=e;null!==Qs;)if(t=(e=Qs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qs=t;else for(;null!==Qs;){e=Qs;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ns(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(_){Sc(e,e.return,_)}if(null!==(t=e.sibling)){t.return=e.return,Qs=t;break}Qs=e.return}g=el,el=!1}(t,n),ml(n,t),pi(er),Ye=!!tr,er=tr=null,t.current=n,yl(n,t,r),Jt(),jl=l,be=s,Ol.transition=o}else t.current=n;if(Gl&&(Gl=!1,ql=t,Kl=r),o=t.pendingLanes,0===o&&(Vl=null),function(t){if(ae&&"function"===typeof ae.onCommitFiberRoot)try{ae.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,$t()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Yl)throw Yl=!1,t=Xl,Xl=null,t;0!==(1&Kl)&&0!==t.tag&&wc(),o=t.pendingLanes,0!==(1&o)?t===$l?Jl++:(Jl=0,$l=t):Jl=0,Wr()}(t,e,n,i)}finally{Ol.transition=r,be=i}return null}function wc(){if(null!==ql){var t=xe(Kl),e=Ol.transition,n=be;try{if(Ol.transition=null,be=16>t?16:t,null===ql)var i=!1;else{if(t=ql,ql=null,Kl=0,0!==(6&jl))throw Error(a(331));var r=jl;for(jl|=4,Qs=t.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var f=h.child;if(null!==f)f.return=h,Qs=f;else for(;null!==Qs;){var d=(h=Qs).sibling,p=h.return;if(al(h),h===u){Qs=null;break}if(null!==d){d.return=p,Qs=d;break}Qs=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else t:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break t}Qs=o.return}}var b=t.current;for(Qs=b;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else t:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Sc(l,l.return,w)}if(l===s){Qs=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,Qs=_;break t}Qs=l.return}}if(jl=r,Wr(),ae&&"function"===typeof ae.onPostCommitFiberRoot)try{ae.onPostCommitFiberRoot(re,t)}catch(w){}i=!0}return i}finally{be=n,Ol.transition=e}}return!1}function Cc(t,e,n){t=za(t,e=ds(0,e=cs(n,e),1),1),e=tc(),null!==t&&(ve(t,1,e),ic(t,e))}function Sc(t,e,n){if(3===t.tag)Cc(t,t,n);else for(;null!==e;){if(3===e.tag){Cc(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Vl||!Vl.has(i))){e=za(e,t=ps(e,t=cs(n,t),1),1),t=tc(),null!==e&&(ve(e,1,t),ic(e,t));break}}e=e.return}}function kc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,El===t&&(Al&n)===n&&(4===Il||3===Il&&(130023424&Al)===Al&&500>$t()-Ul?fc(t,0):Nl|=n),ic(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Ia(t,e))&&(ve(t,e,n),ic(t,n))}function Oc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function jc(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(e),Tc(t,n)}function Ec(t,e){return Gt(t,e)}function Pc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(t,e,n,i){return new Pc(t,e,n,i)}function Mc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Dc(t,e){var n=t.alternate;return null===n?((n=Ac(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ic(t,e,n,i,r,o){var s=2;if(i=t,"function"===typeof t)Mc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case C:return Lc(n.children,r,o,e);case S:s=8,r|=8;break;case k:return(t=Ac(12,n,e,2|r)).elementType=k,t.lanes=o,t;case E:return(t=Ac(13,n,e,r)).elementType=E,t.lanes=o,t;case P:return(t=Ac(19,n,e,r)).elementType=P,t.lanes=o,t;case D:return Rc(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case O:s=9;break t;case j:s=11;break t;case A:s=14;break t;case M:s=16,i=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Ac(s,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Lc(t,e,n,i){return(t=Ac(7,t,i,e)).lanes=n,t}function Rc(t,e,n,i){return(t=Ac(22,t,i,e)).elementType=D,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Ac(6,t,null,e)).lanes=n,t}function Nc(t,e,n){return(e=Ac(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(t,e,n,i,r,a,o,s,l){return t=new zc(t,e,n,s,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Ac(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),t}function Uc(t){if(!t)return Or;t:{if(Wt(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(Mr(n))return Lr(t,n,e)}return e}function Wc(t,e,n,i,r,a,o,s,l){return(t=Bc(n,i,!0,t,0,a,0,s,l)).context=Uc(null),n=t.current,(a=Na(i=tc(),r=ec(n))).callback=void 0!==e&&null!==e?e:null,za(n,a,r),t.current.lanes=r,ve(t,r,i),ic(t,i),t}function Hc(t,e,n,i){var r=e.current,a=tc(),o=ec(r);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Na(a,o)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=za(r,e,o))&&(nc(t,r,o,a),Ba(t,r,o)),o}function Yc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Xc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Vc(t,e){Xc(t,e),(t=t.alternate)&&Xc(t,e)}Cl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Er.current)bs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return bs=!1,function(t,e,n){switch(e.tag){case 3:Es(e),da();break;case 5:$a(e);break;case 1:Mr(e.type)&&Rr(e);break;case 4:Ka(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(wa,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(Za,1&Za.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fs(t,e,n):(Tr(Za,1&Za.current),null!==(t=Ys(t,e,n))?t.sibling:null);Tr(Za,1&Za.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Ws(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(Za,Za.current),i)break;return null;case 22:case 23:return e.lanes=0,Ss(t,e,n)}return Ys(t,e,n)}(t,e,n);bs=0!==(131072&t.flags)}else bs=!1,ra&&0!==(1048576&e.flags)&&Zr(e,Vr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Hs(t,e),t=e.pendingProps;var r=Ar(e,jr.current);Ea(e,n),r=mo(null,e,i,t,r,n);var o=vo();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mr(i)?(o=!0,Rr(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ra(e),r.updater=rs,e.stateNode=r,r._reactInternals=e,ls(e,i,t,n),e=js(null,e,i,!0,o,n)):(e.tag=0,ra&&o&&ta(e),xs(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Hs(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Mc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===j)return 11;if(t===A)return 14}return 2}(i),t=ns(i,t),r){case 0:e=Ts(null,e,i,t,n);break t;case 1:e=Os(null,e,i,t,n);break t;case 11:e=_s(null,e,i,t,n);break t;case 14:e=ws(null,e,i,ns(i.type,t),n);break t}throw Error(a(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Ts(t,e,i,r=e.elementType===i?r:ns(i,r),n);case 1:return i=e.type,r=e.pendingProps,Os(t,e,i,r=e.elementType===i?r:ns(i,r),n);case 3:t:{if(Es(e),null===t)throw Error(a(387));i=e.pendingProps,r=(o=e.memoizedState).element,Fa(t,e),Wa(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Ps(t,e,i,n,r=cs(Error(a(423)),e));break t}if(i!==r){e=Ps(t,e,i,n,r=cs(Error(a(424)),e));break t}for(ia=cr(e.stateNode.containerInfo.firstChild),na=e,ra=!0,aa=null,n=_a(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),i===r){e=Ys(t,e,n);break t}xs(t,e,i,n)}e=e.child}return e;case 5:return $a(e),null===t&&ca(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==o&&nr(i,o)&&(e.flags|=32),ks(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&ca(e),null;case 13:return Fs(t,e,n);case 4:return Ka(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=xa(e,null,i,n):xs(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,_s(t,e,i,r=e.elementType===i?r:ns(i,r),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,Tr(wa,i._currentValue),i._currentValue=s,null!==o)if(si(o.value,s)){if(o.children===r.children&&!Er.current){e=Ys(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Na(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ja(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ja(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ea(e,n),i=i(r=Pa(r)),e.flags|=1,xs(t,e,i,n),e.child;case 14:return r=ns(i=e.type,e.pendingProps),ws(t,e,i,r=ns(i.type,r),n);case 15:return Cs(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ns(i,r),Hs(t,e),e.tag=1,Mr(i)?(t=!0,Rr(e)):t=!1,Ea(e,n),os(e,i,r),ls(e,i,r,n),js(null,e,i,!0,t,n);case 19:return Ws(t,e,n);case 22:return Ss(t,e,n)}throw Error(a(156,e.tag))};var Gc="function"===typeof reportError?reportError:function(t){console.error(t)};function qc(t){this._internalRoot=t}function Kc(t){this._internalRoot=t}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function $c(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qc(){}function Zc(t,e,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var t=Yc(o);s.call(t)}}Hc(e,o,t,r)}else o=function(t,e,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var t=Yc(o);a.call(t)}}var o=Wc(e,i,t,0,null,!1,0,"",Qc);return t._reactRootContainer=o,t[pr]=o.current,Wi(8===t.nodeType?t.parentNode:t),uc(),o}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var s=i;i=function(){var t=Yc(l);s.call(t)}}var l=Bc(t,0,!1,null,0,!1,0,"",Qc);return t._reactRootContainer=l,t[pr]=l.current,Wi(8===t.nodeType?t.parentNode:t),uc((function(){Hc(e,l,n,i)})),l}(n,e,t,r,i);return Yc(o)}Kc.prototype.render=qc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));Hc(t,e,null,null)},Kc.prototype.unmount=qc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc((function(){Hc(null,t,null,null)})),e[pr]=null}},Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Se();t={blockedOn:null,target:t,priority:e};for(var n=0;n<De.length&&0!==e&&e<De[n].priority;n++);De.splice(n,0,t),0===n&&Fe(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ic(e,$t()),0===(6&jl)&&(Wl=$t()+500,Wr()))}break;case 13:uc((function(){var e=Ia(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}})),Vc(t,1)}},we=function(t){if(13===t.tag){var e=Ia(t,134217728);if(null!==e)nc(e,t,134217728,tc());Vc(t,134217728)}},Ce=function(t){if(13===t.tag){var e=ec(t),n=Ia(t,e);if(null!==n)nc(n,t,e,tc());Vc(t,e)}},Se=function(){return be},ke=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},wt=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=_r(i);if(!r)throw Error(a(90));G(i),Q(i,r)}}}break;case"textarea":at(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},jt=cc,Et=uc;var tu={usingClientEntryPoint:!1,Events:[br,xr,_r,Tt,Ot,cc]},eu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Xt(t))?null:t.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{re=iu.inject(nu),ae=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(e))throw Error(a(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Jc(t))throw Error(a(299));var n=!1,i="",r=Gc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=Bc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Wi(8===t.nodeType?t.parentNode:t),new qc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return t=null===(t=Xt(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!$c(e))throw Error(a(200));return Zc(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Jc(t))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Wc(e,null,t,1,null!=n?n:null,r,0,o,s),t[pr]=e.current,Wi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Kc(e)},e.render=function(t,e,n){if(!$c(e))throw Error(a(200));return Zc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!$c(t))throw Error(a(40));return!!t._reactRootContainer&&(uc((function(){Zc(null,null,t,!1,(function(){t._reactRootContainer=null,t[pr]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!$c(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return Zc(t,e,n,!1,i)},e.version="18.3.1-next-f1338f8080-20240426"},391:(t,e,n)=>{"use strict";var i=n(950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)},153:(t,e,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,a={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,i)&&!l.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===a[i]&&(a[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:a,_owner:s.current}}e.Fragment=a,e.jsx=c,e.jsxs=c},202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,i){var r,a={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)w.call(e,r)&&!S.hasOwnProperty(r)&&(a[r]=e[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:t,key:o,ref:s,props:a,_owner:C.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var O=/\/+/g;function j(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function E(t,e,r,a,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=t),t=""===a?"."+j(l,0):a,_(o)?(r="",null!=t&&(r=t.replace(O,"$&/")+"/"),E(o,e,r,"",(function(t){return t}))):null!=o&&(T(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(O,"$&/")+"/")+t)),e.push(o)),1;if(l=0,a=""===a?".":a+":",_(t))for(var c=0;c<t.length;c++){var u=a+j(s=t[c],c);l+=E(s,e,r,u,o)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=E(s=s.value,e,r,u=a+j(s,c++),o);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var i=[],r=0;return E(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function A(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},D={transition:null},I={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:D,ReactCurrentOwner:C};function L(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=o,e.PureComponent=b,e.StrictMode=a,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,e.act=L,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),a=t.key,o=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,s=C.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:a,ref:o,props:r,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=L,e.useCallback=function(t,e){return M.current.useCallback(t,e)},e.useContext=function(t){return M.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return M.current.useDeferredValue(t)},e.useEffect=function(t,e){return M.current.useEffect(t,e)},e.useId=function(){return M.current.useId()},e.useImperativeHandle=function(t,e,n){return M.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return M.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return M.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return M.current.useMemo(t,e)},e.useReducer=function(t,e,n){return M.current.useReducer(t,e,n)},e.useRef=function(t){return M.current.useRef(t)},e.useState=function(t){return M.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return M.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return M.current.useTransition()},e.version="18.3.1"},43:(t,e,n)=>{"use strict";t.exports=n(202)},579:(t,e,n)=>{"use strict";t.exports=n(153)},234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<a(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=t[s],c=s+1,u=t[c];if(0>a(l,n))c<r&&0>a(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,f=null,d=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function _(t){if(m=!1,x(t),!g)if(null!==i(c))g=!0,D(w);else{var e=i(u);null!==e&&I(_,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var a=d;try{for(x(n),f=i(c);null!==f&&(!(f.expirationTime>n)||t&&!E());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?f.callback=s:f===i(c)&&r(c),x(n)}else r(c);f=i(c)}if(null!==f)var l=!0;else{var h=i(u);null!==h&&I(_,h.startTime-n),l=!1}return l}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,S=!1,k=null,T=-1,O=5,j=-1;function E(){return!(e.unstable_now()-j<O)}function P(){if(null!==k){var t=e.unstable_now();j=t;var n=!0;try{n=k(!0,t)}finally{n?C():(S=!1,k=null)}}else S=!1}if("function"===typeof b)C=function(){b(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,M=A.port2;A.port1.onmessage=P,C=function(){M.postMessage(null)}}else C=function(){v(P,0)};function D(t){k=t,S||(S=!0,C())}function I(t,n){T=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,D(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},e.unstable_scheduleCallback=function(t,r,a){var o=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(t.sortIndex=a,n(u,t),null===i(c)&&t===i(u)&&(m?(y(T),T=-1):m=!0,I(_,a-o))):(t.sortIndex=s,n(c,t),g||p||(g=!0,D(w))),t},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}},853:(t,e,n)=>{"use strict";t.exports=n(234)},574:()=>{},748:()=>{},246:()=>{}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,n),a.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&i;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>o[t]=()=>i[t]));return o.default=()=>i,n.d(a,o),a}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>"static/js/"+t+"."+{453:"450907a0",952:"2180979f"}[t]+".chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="synask-app:";n.l=(i,r,a,o)=>{if(t[i])t[i].push(r);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=i),t[i]=[r];var f=(e,n)=>{s.onerror=s.onload=null,clearTimeout(d);var r=t[i];if(delete t[i],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((t=>t(n))),e)return e(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/",(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var a=new Promise(((n,i)=>r=t[e]=[n,i]));i.push(r[2]=a);var o=n.p+n.u(e),s=new Error;n.l(o,(i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var a=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,r[1](s)}}),"chunk-"+e,e)}};var e=(e,i)=>{var r,a,o=i[0],s=i[1],l=i[2],c=0;if(o.some((e=>0!==t[e]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(l)l(n)}for(e&&e(i);c<o.length;c++)a=o[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0},i=self.webpackChunksynask_app=self.webpackChunksynask_app||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t,e=n(43),i=n.t(e,2),r=n(391),a=n(950),o=n.t(a,2);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(t||(t={}));const l="popstate";function c(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function u(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function h(t,e){return{usr:t.state,key:t.key,idx:e}}function f(t,e,n,i){return void 0===n&&(n=null),s({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?p(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function d(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function p(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function g(e,n,i,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,p=t.Pop,g=null,m=v();function v(){return(u.state||{idx:null}).idx}function y(){p=t.Pop;let e=v(),n=null==e?null:e-m;m=e,g&&g({action:p,location:x.location,delta:n})}function b(t){let e="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof t?t:d(t);return n=n.replace(/ $/,"%20"),c(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==m&&(m=0,u.replaceState(s({},u.state,{idx:m}),""));let x={get action(){return p},get location(){return e(a,u)},listen(t){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(l,y),g=t,()=>{a.removeEventListener(l,y),g=null}},createHref:t=>n(a,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(e,n){p=t.Push;let r=f(x.location,e,n);i&&i(r,e),m=v()+1;let s=h(r,m),l=x.createHref(r);try{u.pushState(s,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;a.location.assign(l)}o&&g&&g({action:p,location:x.location,delta:1})},replace:function(e,n){p=t.Replace;let r=f(x.location,e,n);i&&i(r,e),m=v();let a=h(r,m),s=x.createHref(r);u.replaceState(a,"",s),o&&g&&g({action:p,location:x.location,delta:0})},go:t=>u.go(t)};return x}var m;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(t,e,n){void 0===n&&(n="/");let i=A(("string"===typeof e?p(e):e).pathname||"/",n);if(null==i)return null;let r=y(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let a=null;for(let o=0;null==a&&o<r.length;++o){let t=P(i);a=j(r[o],t)}return a}function y(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,a)=>{let o={relativePath:void 0===a?t.path||"":a,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let s=R([i,o.relativePath]),l=n.concat(o);t.children&&t.children.length>0&&(c(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),y(t.children,e,l,s)),(null!=t.path||t.index)&&e.push({path:s,score:O(s,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of b(t.path))r(t,e,i);else r(t,e)})),e}function b(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===i.length)return r?[a,""]:[a];let o=b(i.join("/")),s=[];return s.push(...o.map((t=>""===t?a:[a,t].join("/")))),r&&s.push(...o),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const x=/^:[\w-]+$/,_=3,w=2,C=1,S=10,k=-2,T=t=>"*"===t;function O(t,e){let n=t.split("/"),i=n.length;return n.some(T)&&(i+=k),e&&(i+=w),n.filter((t=>!T(t))).reduce(((t,e)=>t+(x.test(e)?_:""===e?C:S)),i)}function j(t,e){let{routesMeta:n}=t,i={},r="/",a=[];for(let o=0;o<n.length;++o){let t=n[o],s=o===n.length-1,l="/"===r?e:e.slice(r.length)||"/",c=E({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},l);if(!c)return null;Object.assign(i,c.params);let u=t.route;a.push({params:i,pathname:R([r,c.pathname]),pathnameBase:F(R([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=R([r,c.pathnameBase]))}return a}function E(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);u("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let a=new RegExp(r,e?void 0:"i");return[a,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),s=r.slice(1),l=i.reduce(((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=s[n]||"";o=a.slice(0,a.length-t.length).replace(/(.)\/+$/,"$1")}const l=s[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{});return{params:l,pathname:a,pathnameBase:o,pattern:t}}function P(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return u(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function A(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function M(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function I(t,e){let n=D(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function L(t,e,n,i){let r;void 0===i&&(i=!1),"string"===typeof t?r=p(t):(r=s({},t),c(!r.pathname||!r.pathname.includes("?"),M("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),M("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),M("#","search","hash",r)));let a,o=""===t||""===r.pathname,l=o?"/":r.pathname;if(null==l)a=n;else{let t=e.length-1;if(!i&&l.startsWith("..")){let e=l.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}a=t>=0?e[t]:"/"}let u=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?p(t):t,a=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:a,search:N(i),hash:z(r)}}(r,a),h=l&&"/"!==l&&l.endsWith("/"),f=(o||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const R=t=>t.join("/").replace(/\/\/+/g,"/"),F=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",z=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function B(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const U=["post","put","patch","delete"],W=(new Set(U),["get",...U]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},H.apply(this,arguments)}const Y=e.createContext(null);const X=e.createContext(null);const V=e.createContext(null);const G=e.createContext(null);const q=e.createContext({outlet:null,matches:[],isDataRoute:!1});const K=e.createContext(null);function J(){return null!=e.useContext(G)}function $(){return J()||c(!1),e.useContext(G).location}function Q(t){e.useContext(V).static||e.useLayoutEffect(t)}function Z(){let{isDataRoute:t}=e.useContext(q);return t?function(){let{router:t}=ct(st.UseNavigateStable),n=ht(lt.UseNavigateStable),i=e.useRef(!1);return Q((()=>{i.current=!0})),e.useCallback((function(e,r){void 0===r&&(r={}),i.current&&("number"===typeof e?t.navigate(e):t.navigate(e,H({fromRouteId:n},r)))}),[t,n])}():function(){J()||c(!1);let t=e.useContext(Y),{basename:n,future:i,navigator:r}=e.useContext(V),{matches:a}=e.useContext(q),{pathname:o}=$(),s=JSON.stringify(I(a,i.v7_relativeSplatPath)),l=e.useRef(!1);return Q((()=>{l.current=!0})),e.useCallback((function(e,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof e)return void r.go(e);let a=L(e,JSON.parse(s),o,"path"===i.relative);null==t&&"/"!==n&&(a.pathname="/"===a.pathname?n:R([n,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[n,r,s,o,t])}()}function tt(t,n){let{relative:i}=void 0===n?{}:n,{future:r}=e.useContext(V),{matches:a}=e.useContext(q),{pathname:o}=$(),s=JSON.stringify(I(a,r.v7_relativeSplatPath));return e.useMemo((()=>L(t,JSON.parse(s),o,"path"===i)),[t,s,o,i])}function et(n,i,r,a){J()||c(!1);let{navigator:o}=e.useContext(V),{matches:s}=e.useContext(q),l=s[s.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let f,d=$();if(i){var g;let t="string"===typeof i?p(i):i;"/"===h||(null==(g=t.pathname)?void 0:g.startsWith(h))||c(!1),f=t}else f=d;let m=f.pathname||"/",y=m;if("/"!==h){let t=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(t.length).join("/")}let b=v(n,{pathname:y});let x=ot(b&&b.map((t=>Object.assign({},t,{params:Object.assign({},u,t.params),pathname:R([h,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:R([h,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),s,r,a);return i&&x?e.createElement(G.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:t.Pop}},x):x}function nt(){let t=function(){var t;let n=e.useContext(K),i=ut(lt.UseRouteError),r=ht(lt.UseRouteError);if(void 0!==n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=B(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:a},i):null,null)}const it=e.createElement(nt,null);class rt extends e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?e.createElement(q.Provider,{value:this.props.routeContext},e.createElement(K.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function at(t){let{routeContext:n,match:i,children:r}=t,a=e.useContext(Y);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(q.Provider,{value:n},r)}function ot(t,n,i,r){var a;if(void 0===n&&(n=[]),void 0===i&&(i=null),void 0===r&&(r=null),null==t){var o;if(null==(o=i)||!o.errors)return null;t=i.matches}let s=t,l=null==(a=i)?void 0:a.errors;if(null!=l){let t=s.findIndex((t=>t.route.id&&void 0!==(null==l?void 0:l[t.route.id])));t>=0||c(!1),s=s.slice(0,Math.min(s.length,t+1))}let u=!1,h=-1;if(i&&r&&r.v7_partialHydration)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=e),t.route.id){let{loaderData:e,errors:n}=i,r=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||r){u=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight(((t,r,a)=>{let o,c=!1,f=null,d=null;var p;i&&(o=l&&r.route.id?l[r.route.id]:void 0,f=r.route.errorElement||it,u&&(h<0&&0===a?(p="route-fallback",!1||ft[p]||(ft[p]=!0),c=!0,d=null):h===a&&(c=!0,d=r.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,a+1)),m=()=>{let n;return n=o?f:c?d:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(at,{match:r,routeContext:{outlet:t,matches:g,isDataRoute:null!=i},children:n})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?e.createElement(rt,{location:i.location,revalidation:i.revalidation,component:f,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var st=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(st||{}),lt=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lt||{});function ct(t){let n=e.useContext(Y);return n||c(!1),n}function ut(t){let n=e.useContext(X);return n||c(!1),n}function ht(t){let n=function(t){let n=e.useContext(q);return n||c(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||c(!1),i.route.id}const ft={};i.startTransition;function dt(t){c(!1)}function pt(n){let{basename:i="/",children:r=null,location:a,navigationType:o=t.Pop,navigator:s,static:l=!1,future:u}=n;J()&&c(!1);let h=i.replace(/^\/*/,"/"),f=e.useMemo((()=>({basename:h,navigator:s,static:l,future:H({v7_relativeSplatPath:!1},u)})),[h,u,s,l]);"string"===typeof a&&(a=p(a));let{pathname:d="/",search:g="",hash:m="",state:v=null,key:y="default"}=a,b=e.useMemo((()=>{let t=A(d,h);return null==t?null:{location:{pathname:t,search:g,hash:m,state:v,key:y},navigationType:o}}),[h,d,g,m,v,y,o]);return null==b?null:e.createElement(V.Provider,{value:f},e.createElement(G.Provider,{children:r,value:b}))}function gt(t){let{children:e,location:n}=t;return et(mt(e),n)}new Promise((()=>{}));e.Component;function mt(t,n){void 0===n&&(n=[]);let i=[];return e.Children.forEach(t,((t,r)=>{if(!e.isValidElement(t))return;let a=[...n,r];if(t.type===e.Fragment)return void i.push.apply(i,mt(t.props.children,a));t.type!==dt&&c(!1),t.props.index&&t.props.children&&c(!1);let o={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=mt(t.props.children,a)),i.push(o)})),i}function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vt.apply(this,arguments)}function yt(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const bt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(il){}new Map;const xt=i.startTransition;o.flushSync,i.useId;function _t(t){let{basename:n,children:i,future:r,window:a}=t,o=e.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),g((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return f("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:d(e)}),null,s)));let l=o.current,[c,u]=e.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=e.useCallback((t=>{h&&xt?xt((()=>u(t))):u(t)}),[u,h]);return e.useLayoutEffect((()=>l.listen(p)),[l,p]),e.createElement(pt,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:l,future:r})}const wt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ct=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=e.forwardRef((function(t,n){let i,{onClick:r,relative:a,reloadDocument:o,replace:s,state:l,target:u,to:h,preventScrollReset:f,unstable_viewTransition:p}=t,g=yt(t,bt),{basename:m}=e.useContext(V),v=!1;if("string"===typeof h&&Ct.test(h)&&(i=h,wt))try{let t=new URL(window.location.href),e=h.startsWith("//")?new URL(t.protocol+h):new URL(h),n=A(e.pathname,m);e.origin===t.origin&&null!=n?h=n+e.search+e.hash:v=!0}catch(il){}let y=function(t,n){let{relative:i}=void 0===n?{}:n;J()||c(!1);let{basename:r,navigator:a}=e.useContext(V),{hash:o,pathname:s,search:l}=tt(t,{relative:i}),u=s;return"/"!==r&&(u="/"===s?r:R([r,s])),a.createHref({pathname:u,search:l,hash:o})}(h,{relative:a}),b=function(t,n){let{target:i,replace:r,state:a,preventScrollReset:o,relative:s,unstable_viewTransition:l}=void 0===n?{}:n,c=Z(),u=$(),h=tt(t,{relative:s});return e.useCallback((e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,i)){e.preventDefault();let n=void 0!==r?r:d(u)===d(h);c(t,{replace:n,state:a,preventScrollReset:o,relative:s,unstable_viewTransition:l})}}),[u,c,h,r,a,i,t,o,s,l])}(h,{replace:s,state:l,target:u,preventScrollReset:f,relative:a,unstable_viewTransition:p});return e.createElement("a",vt({},g,{href:i||y,onClick:v||o?r:function(t){r&&r(t),t.defaultPrevented||b(t)},ref:n,target:u}))}));var kt,Tt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kt||(kt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(Tt||(Tt={}));var Ot=n(579);const jt=()=>(0,Ot.jsxs)("div",{className:"profile-page",children:[(0,Ot.jsx)("h2",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,Ot.jsx)("p",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})]});class Et extends Error{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(t),this.name=e,this.context=n}}class Pt extends Et{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class At extends Et{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mt extends Et{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dt;!function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"}(Dt||(Dt={}));var It=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};class Lt{constructor(t){let{headers:e={},customFetch:i,region:r=Dt.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.headers=e,this.region=r,this.fetch=(t=>{let e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then((t=>{let{default:n}=t;return n(...e)}))}:fetch),function(){return e(...arguments)}})(i)}setAuth(t){this.headers.Authorization="Bearer ".concat(t)}invoke(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return It(this,void 0,void 0,(function*(){try{const{headers:i,method:r,body:a}=e;let o,s={},{region:l}=e;l||(l=this.region),l&&"any"!==l&&(s["x-region"]=l),a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",o=a):"string"===typeof a?(s["Content-Type"]="text/plain",o=a):"undefined"!==typeof FormData&&a instanceof FormData?o=a:(s["Content-Type"]="application/json",o=JSON.stringify(a)));const c=yield this.fetch("".concat(this.url,"/").concat(t),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),i),body:o}).catch((t=>{throw new Pt(t)})),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new At(c);if(!c.ok)throw new Mt(c);let h,f=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===f?yield c.json():"application/octet-stream"===f?yield c.blob():"text/event-stream"===f?c:"multipart/form-data"===f?yield c.formData():yield c.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}}))}}var Rt=n(630);class Ft extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class Nt{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:"undefined"===typeof fetch?this.fetch=Rt.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async t=>{var e,n,i;let r=null,a=null,o=null,s=t.status,l=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?e:JSON.parse(e))}const i=null===(e=this.headers.Prefer)||void 0===e?void 0:e.match(/count=(exact|planned|estimated)/),c=null===(n=t.headers.get("content-range"))||void 0===n?void 0:n.split("/");i&&c&&c.length>1&&(o=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(r={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,s=406,l="Not Acceptable"):a=1===a.length?a[0]:null)}else{const e=await t.text();try{r=JSON.parse(e),Array.isArray(r)&&404===t.status&&(a=[],r=null,s=200,l="OK")}catch(c){404===t.status&&""===e?(s=204,l="No Content"):r={message:e}}if(r&&this.isMaybeSingle&&(null===(i=null===r||void 0===r?void 0:r.details)||void 0===i?void 0:i.includes("0 rows"))&&(r=null,s=200,l="OK"),r&&this.shouldThrowOnError)throw new Ft(r)}return{error:r,data:a,count:o,status:s,statusText:l}}));return this.shouldThrowOnError||(n=n.catch((t=>{var e,n,i;return{error:{message:"".concat(null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:"FetchError",": ").concat(null===t||void 0===t?void 0:t.message),details:"".concat(null!==(n=null===t||void 0===t?void 0:t.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(i=null===t||void 0===t?void 0:t.code)&&void 0!==i?i:"")},data:null,count:null,status:0,statusText:""}}))),n.then(t,e)}}class zt extends Nt{select(t){let e=!1;const n=(null!==t&&void 0!==t?t:"*").split("").map((t=>/\s/.test(t)&&!e?"":('"'===t&&(e=!e),t))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t){let{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?"".concat(r,".order"):"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(o?"".concat(o,","):"").concat(t,".").concat(e?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(t){let{foreignTable:e,referencedTable:n=e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(i,"".concat(t)),this}range(t,e){let{foreignTable:n,referencedTable:i=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof i?"offset":"".concat(i,".offset"),a="undefined"===typeof i?"limit":"".concat(i,".limit");return this.url.searchParams.set(r,"".concat(t)),this.url.searchParams.set(a,"".concat(e-t+1)),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(s,";"),this}rollback(){var t;return(null!==(t=this.headers.Prefer)&&void 0!==t?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Bt extends zt{eq(t,e){return this.url.searchParams.append(t,"eq.".concat(e)),this}neq(t,e){return this.url.searchParams.append(t,"neq.".concat(e)),this}gt(t,e){return this.url.searchParams.append(t,"gt.".concat(e)),this}gte(t,e){return this.url.searchParams.append(t,"gte.".concat(e)),this}lt(t,e){return this.url.searchParams.append(t,"lt.".concat(e)),this}lte(t,e){return this.url.searchParams.append(t,"lte.".concat(e)),this}like(t,e){return this.url.searchParams.append(t,"like.".concat(e)),this}likeAllOf(t,e){return this.url.searchParams.append(t,"like(all).{".concat(e.join(","),"}")),this}likeAnyOf(t,e){return this.url.searchParams.append(t,"like(any).{".concat(e.join(","),"}")),this}ilike(t,e){return this.url.searchParams.append(t,"ilike.".concat(e)),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,"ilike(all).{".concat(e.join(","),"}")),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,"ilike(any).{".concat(e.join(","),"}")),this}is(t,e){return this.url.searchParams.append(t,"is.".concat(e)),this}in(t,e){const n=Array.from(new Set(e)).map((t=>"string"===typeof t&&new RegExp("[,()]").test(t)?'"'.concat(t,'"'):"".concat(t))).join(",");return this.url.searchParams.append(t,"in.(".concat(n,")")),this}contains(t,e){return"string"===typeof e?this.url.searchParams.append(t,"cs.".concat(e)):Array.isArray(e)?this.url.searchParams.append(t,"cs.{".concat(e.join(","),"}")):this.url.searchParams.append(t,"cs.".concat(JSON.stringify(e))),this}containedBy(t,e){return"string"===typeof e?this.url.searchParams.append(t,"cd.".concat(e)):Array.isArray(e)?this.url.searchParams.append(t,"cd.{".concat(e.join(","),"}")):this.url.searchParams.append(t,"cd.".concat(JSON.stringify(e))),this}rangeGt(t,e){return this.url.searchParams.append(t,"sr.".concat(e)),this}rangeGte(t,e){return this.url.searchParams.append(t,"nxl.".concat(e)),this}rangeLt(t,e){return this.url.searchParams.append(t,"sl.".concat(e)),this}rangeLte(t,e){return this.url.searchParams.append(t,"nxr.".concat(e)),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,"adj.".concat(e)),this}overlaps(t,e){return"string"===typeof e?this.url.searchParams.append(t,"ov.".concat(e)):this.url.searchParams.append(t,"ov.{".concat(e.join(","),"}")),this}textSearch(t,e){let{config:n,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===i?r="pl":"phrase"===i?r="ph":"websearch"===i&&(r="w");const a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(t,"".concat(r,"fts").concat(a,".").concat(e)),this}match(t){return Object.entries(t).forEach((t=>{let[e,n]=t;this.url.searchParams.append(e,"eq.".concat(n))})),this}not(t,e,n){return this.url.searchParams.append(t,"not.".concat(e,".").concat(n)),this}or(t){let{foreignTable:e,referencedTable:n=e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n?"".concat(n,".or"):"or";return this.url.searchParams.append(i,"(".concat(t,")")),this}filter(t,e,n){return this.url.searchParams.append(t,"".concat(e,".").concat(n)),this}}class Ut{constructor(t,e){let{headers:n={},schema:i,fetch:r}=e;this.url=t,this.headers=n,this.schema=i,this.fetch=r}select(t){let{head:e=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e?"HEAD":"GET";let r=!1;const a=(null!==t&&void 0!==t?t:"*").split("").map((t=>/\s/.test(t)&&!r?"":('"'===t&&(r=!r),t))).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer="count=".concat(n)),new Bt({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t){let{count:e,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push("count=".concat(e)),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const e=t.reduce(((t,e)=>t.concat(Object.keys(e))),[]);if(e.length>0){const t=[...new Set(e)].map((t=>'"'.concat(t,'"')));this.url.searchParams.set("columns",t.join(","))}}return new Bt({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t){let{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==e&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push("count=".concat(i)),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const e=t.reduce(((t,e)=>t.concat(Object.keys(e))),[]);if(e.length>0){const t=[...new Set(e)].map((t=>'"'.concat(t,'"')));this.url.searchParams.set("columns",t.join(","))}}return new Bt({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t){let{count:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push("count=".concat(e)),this.headers.Prefer=n.join(","),new Bt({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[];return t&&e.push("count=".concat(t)),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new Bt({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Wt={"X-Client-Info":"postgrest-js/".concat("1.15.2")};class Ht{constructor(t){let{headers:e={},schema:n,fetch:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.headers=Object.assign(Object.assign({},Wt),e),this.schemaName=n,this.fetch=i}from(t){const e=new URL("".concat(this.url,"/").concat(t));return new Ut(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ht(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:i=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new URL("".concat(this.url,"/rpc/").concat(t));let s;i||r?(e=i?"HEAD":"GET",Object.entries(n).filter((t=>{let[e,n]=t;return void 0!==n})).map((t=>{let[e,n]=t;return[e,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]})).forEach((t=>{let[e,n]=t;o.searchParams.append(e,n)}))):(e="POST",s=n);const l=Object.assign({},this.headers);return a&&(l.Prefer="count=".concat(a)),new Bt({method:e,url:o,headers:l,schema:this.schemaName,body:s,fetch:this.fetch,allowEmpty:!1})}}const Yt={"X-Client-Info":"realtime-js/".concat("2.9.5")};var Xt,Vt,Gt,qt,Kt,Jt,$t;!function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"}(Xt||(Xt={})),function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"}(Vt||(Vt={})),function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"}(Gt||(Gt={})),function(t){t.websocket="websocket"}(qt||(qt={})),function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"}(Kt||(Kt={}));class Qt{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Zt{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e("string"===typeof t?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,e,n)}_decodeBroadcast(t,e,n){const i=e.getUint8(1),r=e.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(t.slice(a,a+i));a+=i;const s=n.decode(t.slice(a,a+r));a+=r;return{ref:null,topic:o,event:s,payload:JSON.parse(n.decode(t.slice(a,t.byteLength)))}}}class te{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=t,this.event=e,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(t){let{status:e,response:n}=t;this.recHooks.filter((t=>t.status===e)).forEach((t=>t.callback(n)))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}!function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"}(Jt||(Jt={}));class ee{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===e||void 0===e?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(t=>{const{onJoin:e,onLeave:n,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ee.syncState(this.state,t,e,n),this.pendingDiffs.forEach((t=>{this.state=ee.syncDiff(this.state,t,e,n)})),this.pendingDiffs=[],i()})),this.channel._on(n.diff,{},(t=>{const{onJoin:e,onLeave:n,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=ee.syncDiff(this.state,t,e,n),i())})),this.onJoin(((t,e,n)=>{this.channel._trigger("presence",{event:"join",key:t,currentPresences:e,newPresences:n})})),this.onLeave(((t,e,n)=>{this.channel._trigger("presence",{event:"leave",key:t,currentPresences:e,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(t,e,n,i){const r=this.cloneDeep(t),a=this.transformState(e),o={},s={};return this.map(r,((t,e)=>{a[t]||(s[t]=e)})),this.map(a,((t,e)=>{const n=r[t];if(n){const i=e.map((t=>t.presence_ref)),r=n.map((t=>t.presence_ref)),a=e.filter((t=>r.indexOf(t.presence_ref)<0)),l=n.filter((t=>i.indexOf(t.presence_ref)<0));a.length>0&&(o[t]=a),l.length>0&&(s[t]=l)}else o[t]=e})),this.syncDiff(r,{joins:o,leaves:s},n,i)}static syncDiff(t,e,n,i){const{joins:r,leaves:a}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,((e,i)=>{var r;const a=null!==(r=t[e])&&void 0!==r?r:[];if(t[e]=this.cloneDeep(i),a.length>0){const n=t[e].map((t=>t.presence_ref)),i=a.filter((t=>n.indexOf(t.presence_ref)<0));t[e].unshift(...i)}n(e,a,i)})),this.map(a,((e,n)=>{let r=t[e];if(!r)return;const a=n.map((t=>t.presence_ref));r=r.filter((t=>a.indexOf(t.presence_ref)<0)),t[e]=r,i(e,r,n),0===r.length&&delete t[e]})),t}static map(t,e){return Object.getOwnPropertyNames(t).map((n=>e(n,t[n])))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce(((e,n)=>{const i=t[n];return e[n]="metas"in i?i.metas.map((t=>(t.presence_ref=t.phx_ref,delete t.phx_ref,delete t.phx_ref_prev,t))):i,e}),{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"}($t||($t={}));const ne=function(t,e){var n;const i=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(e).reduce(((n,r)=>(n[r]=ie(r,t,e,i),n)),{})},ie=(t,e,n,i)=>{const r=e.find((e=>e.name===t)),a=null===r||void 0===r?void 0:r.type,o=n[t];return a&&!i.includes(a)?re(a,o):ae(o)},re=(t,e)=>{if("_"===t.charAt(0)){const n=t.slice(1,t.length);return ce(e,n)}switch(t){case $t.bool:return oe(e);case $t.float4:case $t.float8:case $t.int2:case $t.int4:case $t.int8:case $t.numeric:case $t.oid:return se(e);case $t.json:case $t.jsonb:return le(e);case $t.timestamp:return ue(e);case $t.abstime:case $t.date:case $t.daterange:case $t.int4range:case $t.int8range:case $t.money:case $t.reltime:case $t.text:case $t.time:case $t.timestamptz:case $t.timetz:case $t.tsrange:case $t.tstzrange:default:return ae(e)}},ae=t=>t,oe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},se=t=>{if("string"===typeof t){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},le=t=>{if("string"===typeof t)try{return JSON.parse(t)}catch(e){return console.log("JSON parse error: ".concat(e)),t}return t},ce=(t,e)=>{if("string"!==typeof t)return t;const n=t.length-1,i=t[n];if("{"===t[0]&&"}"===i){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch(r){i=a?a.split(","):[]}return i.map((t=>re(e,t)))}return t},ue=t=>"string"===typeof t?t.replace(" ","T"):t;var he,fe,de;!function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"}(he||(he={})),function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"}(fe||(fe={})),function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"}(de||(de={}));class pe{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new te(this,Gt.join,this.params,this.timeout),this.rejoinTimer=new Qt((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((t=>t.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Vt.closed,this.socket._remove(this)})),this._onError((t=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),t),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Gt.reply,{},((t,e)=>{this._trigger(this._replyEventName(e),t)})),this.presence=new ee(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:a}}=this.params;this._onError((e=>t&&t("CHANNEL_ERROR",e))),this._onClose((()=>t&&t("CLOSED")));const o={},s={broadcast:r,presence:a,postgres_changes:null!==(i=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((t=>t.filter)))&&void 0!==i?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:s},o)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",(e=>{let{postgres_changes:n}=e;var i;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==n){const e=this.bindings.postgres_changes,r=null!==(i=null===e||void 0===e?void 0:e.length)&&void 0!==i?i:0,a=[];for(let i=0;i<r;i++){const r=e[i],{filter:{event:o,schema:s,table:l,filter:c}}=r,u=n&&n[i];if(!u||u.event!==o||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),void(t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=a,void(t&&t("SUBSCRIBED"))}t&&t("SUBSCRIBED")})).receive("error",(e=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(e).join(", ")||"error")))})).receive("timeout",(()=>{t&&t("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this._on(t,e,n)}async send(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;if(this._canPush()||"broadcast"!==t.type)return new Promise((n=>{var i,r,a;const o=this._push(t.type,t,e.timeout||this.timeout);"broadcast"!==t.type||(null===(a=null===(r=null===(i=this.params)||void 0===i?void 0:i.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.ack)||n("ok"),o.receive("ok",(()=>n("ok"))),o.receive("error",(()=>n("error"))),o.receive("timeout",(()=>n("timed out")))}));{const{event:a,payload:o}=t,s={method:"POST",headers:{apikey:null!==(n=this.socket.apiKey)&&void 0!==n?n:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(i=e.timeout)&&void 0!==i?i:this.timeout)).ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Vt.leaving;const e=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(Gt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const i=new te(this,Gt.leave,{},t);i.receive("ok",(()=>{e(),n("ok")})).receive("timeout",(()=>{e(),n("timed out")})).receive("error",(()=>{n("error")})),i.send(),this._canPush()||i.trigger("ok",{})}))}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,e,n){const i=new AbortController,r=setTimeout((()=>i.abort()),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(r),a}_push(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(t,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let i=new te(this,t,e,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var i,r;const a=t.toLocaleLowerCase(),{close:o,error:s,leave:l,join:c}=Gt;if(n&&[o,s,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,e,n);if(e&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(i=this.bindings.postgres_changes)||void 0===i||i.filter((t=>{var e,n,i;return"*"===(null===(e=t.filter)||void 0===e?void 0:e.event)||(null===(i=null===(n=t.filter)||void 0===n?void 0:n.event)||void 0===i?void 0:i.toLocaleLowerCase())===a})).map((t=>t.callback(u,n))):null===(r=this.bindings[a])||void 0===r||r.filter((t=>{var n,i,r,o,s,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in t){const a=t.id,o=null===(n=t.filter)||void 0===n?void 0:n.event;return a&&(null===(i=e.ids)||void 0===i?void 0:i.includes(a))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(r=e.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(s=null===(o=null===t||void 0===t?void 0:t.filter)||void 0===o?void 0:o.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===e||void 0===e?void 0:e.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return t.type.toLocaleLowerCase()===a})).map((t=>{if("object"===typeof u&&"ids"in u){const t=u.data,{schema:e,table:n,commit_timestamp:i,type:r,errors:a}=t,o={schema:e,table:n,commit_timestamp:i,eventType:r,new:{},old:{},errors:a};u=Object.assign(Object.assign({},o),this._getPayloadRecords(t))}t.callback(u,n)}))}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(t){return"chan_reply_".concat(t)}_on(t,e,n){const i=t.toLocaleLowerCase(),r={type:i,filter:e,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((t=>{var i;return!((null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&pe.isEqual(t.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Gt.close,{},t)}_onError(t){this._on(Gt.error,{},(e=>t(e)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return"INSERT"!==t.type&&"UPDATE"!==t.type||(e.new=ne(t.columns,t.record)),"UPDATE"!==t.type&&"DELETE"!==t.type||(e.old=ne(t.columns,t.old_record)),e}}const ge=()=>{},me="undefined"!==typeof WebSocket;class ve{constructor(t,e){var i;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Yt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ge,this.conn=null,this.sendBuffer=[],this.serializer=new Zt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=t=>{let e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then((t=>{let{default:n}=t;return n(...e)}))}:fetch),function(){return e(...arguments)}},this.endPoint="".concat(t,"/").concat(qt.websocket),(null===e||void 0===e?void 0:e.transport)?this.transport=e.transport:this.transport=null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),(null===e||void 0===e?void 0:e.timeout)&&(this.timeout=e.timeout),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),(null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);const r=null===(i=null===e||void 0===e?void 0:e.params)||void 0===i?void 0:i.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=(null===e||void 0===e?void 0:e.reconnectAfterMs)?e.reconnectAfterMs:t=>[1e3,2e3,5e3,1e4][t-1]||1e4,this.encode=(null===e||void 0===e?void 0:e.encode)?e.encode:(t,e)=>e(JSON.stringify(t)),this.decode=(null===e||void 0===e?void 0:e.decode)?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Qt((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null===e||void 0===e?void 0:e.fetch)}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(me)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new ye(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),n.e(952).then(n.t.bind(n,952,23)).then((t=>{let{default:e}=t;this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,null!==e&&void 0!==e?e:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return 0===this.channels.length&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map((t=>t.unsubscribe())));return this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xt.connecting:return Kt.Connecting;case Xt.open:return Kt.Open;case Xt.closing:return Kt.Closing;default:return Kt.Closed}}isConnected(){return this.connectionState()===Kt.Open}channel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=new pe("realtime:".concat(t),e,this);return this.channels.push(n),n}push(t){const{topic:e,event:n,payload:i,ref:r}=t,a=()=>{this.encode(t,(t=>{var e;null===(e=this.conn)||void 0===e||e.send(t)}))};this.log("push","".concat(e," ").concat(n," (").concat(r,")"),i),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(Gt.access_token,{access_token:t})}))}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find((e=>e.topic===t&&(e._isJoined()||e._isJoining())));e&&(this.log("transport",'leaving duplicate topic "'.concat(t,'"')),e.unsubscribe())}_remove(t){this.channels=this.channels.filter((e=>e._joinRef()!==t._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(t){this.decode(t.data,(t=>{let{topic:e,event:n,payload:i,ref:r}=t;(r&&r===this.pendingHeartbeatRef||n===(null===i||void 0===i?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(i.status||""," ").concat(e," ").concat(n," ").concat(r&&"("+r+")"||""),i),this.channels.filter((t=>t._isMember(e))).forEach((t=>t._trigger(n,i,r))),this.stateChangeCallbacks.message.forEach((e=>e(t)))}))}_onConnOpen(){this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((t=>t()))}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((e=>e(t)))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((e=>e(t)))}_triggerChanError(){this.channels.forEach((t=>t._trigger(Gt.error)))}_appendParams(t,e){if(0===Object.keys(e).length)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return"".concat(t).concat(n).concat(i)}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((t=>t())),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(t=this.conn)||void 0===t||t.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ye{constructor(t,e,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Xt.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class be extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function xe(t){return"object"===typeof t&&null!==t&&"__isStorageError"in t}class _e extends be{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class we extends be{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var Ce=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};const Se=t=>{let e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then((t=>{let{default:n}=t;return n(...e)}))}:fetch),function(){return e(...arguments)}};var ke=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};const Te=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oe=(t,e)=>ke(void 0,void 0,void 0,(function*(){const i=yield Ce(void 0,void 0,void 0,(function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response}));t instanceof i?t.json().then((n=>{e(new _e(Te(n),t.status||500))})).catch((t=>{e(new we(Te(t),t))})):e(new we(Te(t),t))})),je=(t,e,n,i)=>{const r={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"===t?r:(r.headers=Object.assign({"Content-Type":"application/json"},null===e||void 0===e?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};function Ee(t,e,n,i,r,a){return ke(this,void 0,void 0,(function*(){return new Promise(((o,s)=>{t(n,je(e,i,r,a)).then((t=>{if(!t.ok)throw t;return(null===i||void 0===i?void 0:i.noResolveJson)?t:t.json()})).then((t=>o(t))).catch((t=>Oe(t,s)))}))}))}function Pe(t,e,n,i){return ke(this,void 0,void 0,(function*(){return Ee(t,"GET",e,n,i)}))}function Ae(t,e,n,i,r){return ke(this,void 0,void 0,(function*(){return Ee(t,"POST",e,i,r,n)}))}function Me(t,e,n,i,r){return ke(this,void 0,void 0,(function*(){return Ee(t,"DELETE",e,i,r,n)}))}var De=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};const Ie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Le={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Re{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.url=t,this.headers=e,this.bucketId=n,this.fetch=Se(i)}uploadOrUpdate(t,e,n,i){return De(this,void 0,void 0,(function*(){try{let r;const a=Object.assign(Object.assign({},Le),i),o=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(a.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),r.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",a.cacheControl)):(r=n,o["cache-control"]="max-age=".concat(a.cacheControl),o["content-type"]=a.contentType);const s=this._removeEmptyFolders(e),l=this._getFinalPath(s),c=yield this.fetch("".concat(this.url,"/object/").concat(l),Object.assign({method:t,body:r,headers:o},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{})),u=yield c.json();if(c.ok)return{data:{path:s,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(r){if(xe(r))return{data:null,error:r};throw r}}))}upload(t,e,n){return De(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",t,e,n)}))}uploadToSignedUrl(t,e,n,i){return De(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(t),a=this._getFinalPath(r),o=new URL(this.url+"/object/upload/sign/".concat(a));o.searchParams.set("token",e);try{let t;const e=Object.assign({upsert:Le.upsert},i),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(e.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(t=new FormData,t.append("cacheControl",e.cacheControl),t.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(t=n,t.append("cacheControl",e.cacheControl)):(t=n,a["cache-control"]="max-age=".concat(e.cacheControl),a["content-type"]=e.contentType);const s=yield this.fetch(o.toString(),{method:"PUT",body:t,headers:a}),l=yield s.json();if(s.ok)return{data:{path:r,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(xe(s))return{data:null,error:s};throw s}}))}createSignedUploadUrl(t){return De(this,void 0,void 0,(function*(){try{let e=this._getFinalPath(t);const n=yield Ae(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(e),{},{headers:this.headers}),i=new URL(this.url+n.url),r=i.searchParams.get("token");if(!r)throw new be("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:r},error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}}))}update(t,e,n){return De(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",t,e,n)}))}move(t,e){return De(this,void 0,void 0,(function*(){try{return{data:yield Ae(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}))}copy(t,e){return De(this,void 0,void 0,(function*(){try{return{data:{path:(yield Ae(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}))}createSignedUrl(t,e,n){return De(this,void 0,void 0,(function*(){try{let i=this._getFinalPath(t),r=yield Ae(this.fetch,"".concat(this.url,"/object/sign/").concat(i),Object.assign({expiresIn:e},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(a))},{data:r,error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}))}createSignedUrls(t,e,n){return De(this,void 0,void 0,(function*(){try{const i=yield Ae(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:e,paths:t},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:i.map((t=>Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI("".concat(this.url).concat(t.signedURL).concat(r)):null}))),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}))}download(t,e){return De(this,void 0,void 0,(function*(){const n="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{}),r=i?"?".concat(i):"";try{const e=this._getFinalPath(t),i=yield Pe(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(e).concat(r),{headers:this.headers,noResolveJson:!0});return{data:yield i.blob(),error:null}}catch(a){if(xe(a))return{data:null,error:a};throw a}}))}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],r=(null===e||void 0===e?void 0:e.download)?"download=".concat(!0===e.download?"":e.download):"";""!==r&&i.push(r);const a="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{});""!==o&&i.push(o);let s=i.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(n).concat(s))}}}remove(t){return De(this,void 0,void 0,(function*(){try{return{data:yield Me(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}}))}list(t,e,n){return De(this,void 0,void 0,(function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ie),e),{prefix:t||""});return{data:yield Ae(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),i,{headers:this.headers},n),error:null}}catch(i){if(xe(i))return{data:null,error:i};throw i}}))}_getFinalPath(t){return"".concat(this.bucketId,"/").concat(t)}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push("width=".concat(t.width)),t.height&&e.push("height=".concat(t.height)),t.resize&&e.push("resize=".concat(t.resize)),t.format&&e.push("format=".concat(t.format)),t.quality&&e.push("quality=".concat(t.quality)),e.join("&")}}const Fe={"X-Client-Info":"storage-js/".concat("2.5.5")};var Ne=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};class ze{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=t,this.headers=Object.assign(Object.assign({},Fe),e),this.fetch=Se(n)}listBuckets(){return Ne(this,void 0,void 0,(function*(){try{return{data:yield Pe(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}))}getBucket(t){return Ne(this,void 0,void 0,(function*(){try{return{data:yield Pe(this.fetch,"".concat(this.url,"/bucket/").concat(t),{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}}))}createBucket(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Ne(this,void 0,void 0,(function*(){try{return{data:yield Ae(this.fetch,"".concat(this.url,"/bucket"),{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}))}updateBucket(t,e){return Ne(this,void 0,void 0,(function*(){try{const n=yield function(t,e,n,i,r){return ke(this,void 0,void 0,(function*(){return Ee(t,"PUT",e,i,r,n)}))}(this.fetch,"".concat(this.url,"/bucket/").concat(t),{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}))}emptyBucket(t){return Ne(this,void 0,void 0,(function*(){try{return{data:yield Ae(this.fetch,"".concat(this.url,"/bucket/").concat(t,"/empty"),{},{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}}))}deleteBucket(t){return Ne(this,void 0,void 0,(function*(){try{return{data:yield Me(this.fetch,"".concat(this.url,"/bucket/").concat(t),{},{headers:this.headers}),error:null}}catch(e){if(xe(e))return{data:null,error:e};throw e}}))}}class Be extends ze{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(t){return new Re(this.url,this.headers,t,this.fetch)}}let Ue="";Ue="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const We={headers:{"X-Client-Info":"supabase-js-".concat(Ue,"/").concat("2.43.4")}},He={schema:"public"},Ye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xe={};var Ve=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};const Ge=t=>{let e;return e=t||("undefined"===typeof fetch?Rt.default:fetch),function(){return e(...arguments)}},qe=(t,e,n)=>{const i=Ge(n),r="undefined"===typeof Headers?Rt.Headers:Headers;return(n,a)=>Ve(void 0,void 0,void 0,(function*(){var o;const s=null!==(o=yield e())&&void 0!==o?o:t;let l=new r(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization","Bearer ".concat(s)),i(n,Object.assign(Object.assign({},a),{headers:l}))}))};const Ke="2.64.2",Je={"X-Client-Info":"gotrue-js/".concat(Ke)},$e="X-Supabase-Api-Version",Qe={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};const Ze=()=>"undefined"!==typeof document,tn={tested:!1,writable:!1},en=()=>{if(!Ze())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(il){return!1}if(tn.tested)return tn.writable;const t="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tn.tested=!0,tn.writable=!0}catch(il){tn.tested=!0,tn.writable=!1}return tn.writable};function nn(t){const e={},n=new URL(t);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((t,n)=>{e[n]=t}))}catch(il){}return n.searchParams.forEach(((t,n)=>{e[n]=t})),e}const rn=t=>{let e;return e=t||("undefined"===typeof fetch?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Promise.resolve().then(n.bind(n,630)).then((t=>{let{default:n}=t;return n(...e)}))}:fetch),function(){return e(...arguments)}},an=t=>"object"===typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"===typeof t.json,on=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},sn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch(i){return n}},ln=async(t,e)=>{await t.removeItem(e)};class cn{constructor(){this.promise=new cn.promiseConstructor(((t,e)=>{this.resolve=t,this.reject=e}))}}function un(t){const e=t.split(".");if(3!==e.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=e[1];return JSON.parse(function(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,i,r,a,o,s,l,c="",u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)a=e.indexOf(t.charAt(u++)),o=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),n=a<<2|o>>4,i=(15&o)<<4|s>>2,r=(3&s)<<6|l,c+=String.fromCharCode(n),64!=s&&0!=i&&(c+=String.fromCharCode(i)),64!=l&&0!=r&&(c+=String.fromCharCode(r));return c}(n))}function hn(t){return("0"+t.toString(16)).substr(-2)}async function fn(t){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await async function(t){const e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(n);return Array.from(i).map((t=>String.fromCharCode(t))).join("")}(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dn(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(){const t=new Uint32Array(56);if("undefined"===typeof crypto){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",e=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*e));return n}return crypto.getRandomValues(t),Array.from(t,hn).join("")}();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await on(t,"".concat(e,"-code-verifier"),r);const a=await fn(i);return[a,i===a?"plain":"s256"]}cn.promiseConstructor=Promise;const pn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class gn extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}}function mn(t){return"object"===typeof t&&null!==t&&"__isAuthError"in t}class vn extends gn{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}}class yn extends gn{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class bn extends gn{constructor(t,e,n,i){super(t,n,i),this.name=e,this.status=n}}class xn extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class _n extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wn extends bn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Cn extends bn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sn extends bn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kn extends bn{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Tn(t){return mn(t)&&"AuthRetryableFetchError"===t.name}class On extends bn{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}}var jn=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};const En=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pn=[502,503,504];async function An(t){var e;if(!an(t))throw new kn(En(t),0);if(Pn.includes(t.status))throw new kn(En(t),t.status);let n,i;try{n=await t.json()}catch(il){throw new yn(En(il),il)}const r=function(t){const e=t.headers.get($e);if(!e)return null;if(!e.match(pn))return null;try{return new Date("".concat(e,"T00:00:00.0Z"))}catch(il){return null}}(t);if(r&&r.getTime()>=Qe["2024-01-01"].timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?i=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new On(En(n),t.status,(null===(e=n.weak_password)||void 0===e?void 0:e.reasons)||[])}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((t,e)=>t&&"string"===typeof e),!0))throw new On(En(n),t.status,n.weak_password.reasons);throw new vn(En(n),t.status||500,i)}const Mn=(t,e,n,i)=>{const r={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"===t?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===e||void 0===e?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function Dn(t,e,n,i){var r;const a=Object.assign({},null===i||void 0===i?void 0:i.headers);a[$e]||(a[$e]=Qe["2024-01-01"].name),(null===i||void 0===i?void 0:i.jwt)&&(a.Authorization="Bearer ".concat(i.jwt));const o=null!==(r=null===i||void 0===i?void 0:i.query)&&void 0!==r?r:{};(null===i||void 0===i?void 0:i.redirectTo)&&(o.redirect_to=i.redirectTo);const s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(t,e,n,i,r,a){const o=Mn(e,i,r,a);let s;try{s=await t(n,Object.assign({},o))}catch(il){throw console.error(il),new kn(En(il),0)}s.ok||await An(s);if(null===i||void 0===i?void 0:i.noResolveJson)return s;try{return await s.json()}catch(il){await An(il)}}(t,e,n+s,{headers:a,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);return(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(l):{data:Object.assign({},l),error:null}}function In(t){var e;let n=null;var i;(function(t){return t.access_token&&t.refresh_token&&t.expires_in})(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=(i=t.expires_in,Math.round(Date.now()/1e3)+i)));return{data:{session:n,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function Ln(t){const e=In(t);return!e.error&&t.weak_password&&"object"===typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"===typeof t.weak_password.message&&t.weak_password.reasons.reduce(((t,e)=>t&&"string"===typeof e),!0)&&(e.data.weak_password=t.weak_password),e}function Rn(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function Fn(t){return{data:t,error:null}}function Nn(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a}=t,o=jn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a},user:Object.assign({},o)},error:null}}function zn(t){return t}var Bn=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};class Un{constructor(t){let{url:e="",headers:n={},fetch:i}=t;this.url=e,this.headers=n,this.fetch=rn(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await Dn(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(e),{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(mn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Dn(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Rn})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=Bn(t,["options"]),i=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(i.new_email=null===n||void 0===n?void 0:n.newEmail,delete i.newEmail),await Dn(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:i,headers:this.headers,xform:Nn,redirectTo:null===e||void 0===e?void 0:e.redirectTo})}catch(e){if(mn(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Dn(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:t,headers:this.headers,xform:Rn})}catch(e){if(mn(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,i,r,a,o,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Dn(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(e=null===t||void 0===t?void 0:t.page)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(i=null===t||void 0===t?void 0:t.perPage)||void 0===i?void 0:i.toString())&&void 0!==r?r:""},xform:zn});if(c.error)throw c.error;const u=await c.json(),h=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,f=null!==(s=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==s?s:[];return f.length>0&&(f.forEach((t=>{const e=parseInt(t.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(t.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=e})),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(mn(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){try{return await Dn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,xform:Rn})}catch(e){if(mn(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await Dn(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(t),{body:e,headers:this.headers,xform:Rn})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await Dn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t),{headers:this.headers,body:{should_soft_delete:e},xform:Rn})}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:e,error:n}=await Dn(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(t.userId,"/factors"),{headers:this.headers,xform:t=>({data:{factors:t},error:null})});return{data:e,error:n}}catch(e){if(mn(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await Dn(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(t.userId,"/factors/").concat(t.id),{headers:this.headers}),error:null}}catch(e){if(mn(e))return{data:null,error:e};throw e}}}const Wn={getItem:t=>en()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{en()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{en()&&globalThis.localStorage.removeItem(t)}};function Hn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Yn=!!(globalThis&&en()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Xn extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Vn extends Xn{}async function Gn(t,e,n){Yn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout((()=>{i.abort(),Yn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)}),e),await globalThis.navigator.locks.request(t,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},(async i=>{if(!i){if(0===e)throw Yn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Vn('Acquiring an exclusive Navigator LockManager lock "'.concat(t,'" immediately failed'));if(Yn)try{const t=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(t,null,"  "))}catch(il){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",il)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Yn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Yn&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(il){"undefined"!==typeof self&&(self.globalThis=self)}}();const qn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Je,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Kn=3e4;async function Jn(t,e,n){return await n()}class $n{constructor(t){var e,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$n.nextInstanceID,$n.nextInstanceID+=1,this.instanceID>0&&Ze()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},qn),t);if(this.logDebugMessages=!!i.debug,"function"===typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Un({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=rn(i.fetch),this.lock=i.lock||Jn,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ze()&&(null===(e=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===e?void 0:e.locks)?this.lock=Gn:this.lock=Jn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:en()?this.storage=Wn:(this.memoryStorage={},this.storage=Hn(this.memoryStorage)):(this.memoryStorage={},this.storage=Hn(this.memoryStorage)),Ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(il){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",il)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async t=>{this._debug("received broadcast notification from other tab or client",t),await this._notifyAllSubscribers(t.data.event,t.data.session,!1)}))}this.initialize()}_debug(){if(this.logDebugMessages){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Ke,") ").concat((new Date).toISOString()),...e)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const t=!!Ze()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:n}=await this._getSessionFromURL(t);if(n)return this._debug("#_initialize()","error detecting session from URL",n),"Identity is already linked"===(null===n||void 0===n?void 0:n.message)||"Identity is already linked to another user"===(null===n||void 0===n?void 0:n.message)||await this._removeSession(),{error:n};const{session:i,redirectType:r}=e;return this._debug("#_initialize()","detected session in URL",i,"redirect type",r),await this._saveSession(i),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return mn(t)?{error:t}:{error:new yn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,i;try{await this._removeSession();const r=await Dn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(e=null===t||void 0===t?void 0:t.options)||void 0===e?void 0:e.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(i=null===t||void 0===t?void 0:t.options)||void 0===i?void 0:i.captchaToken}},xform:In}),{data:a,error:o}=r;if(o||!a)return{data:{user:null,session:null},error:o};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var e,n,i;try{let r;if(await this._removeSession(),"email"in t){const{email:n,password:i,options:a}=t;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await dn(this.storage,this.storageKey)),r=await Dn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:i,data:null!==(e=null===a||void 0===a?void 0:a.data)&&void 0!==e?e:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:o,code_challenge_method:s},xform:In})}else{if(!("phone"in t))throw new wn("You must provide either an email or phone number and a password");{const{phone:e,password:a,options:o}=t;r=await Dn(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:e,password:a,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(i=null===o||void 0===o?void 0:o.channel)&&void 0!==i?i:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:In})}}const{data:a,error:o}=r;if(o||!a)return{data:{user:null,session:null},error:o};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(mn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{let e;if(await this._removeSession(),"email"in t){const{email:n,password:i,options:r}=t;e=await Dn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Ln})}else{if(!("phone"in t))throw new wn("You must provide either an email or phone number and a password");{const{phone:n,password:i,options:r}=t;e=await Dn(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Ln})}}const{data:n,error:i}=e;return i?{data:{user:null,session:null},error:i}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i}):{data:{user:null,session:null},error:new _n}}catch(e){if(mn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,n,i,r;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:null===(e=t.options)||void 0===e?void 0:e.redirectTo,scopes:null===(n=t.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=t.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(r=t.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(t)))}async _exchangeCodeForSession(t){const e=await sn(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,i]=(null!==e&&void 0!==e?e:"").split("/"),{data:r,error:a}=await Dn(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:In});return await ln(this.storage,"".concat(this.storageKey,"-code-verifier")),a?{data:{user:null,session:null,redirectType:null},error:a}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:null!==i&&void 0!==i?i:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new _n}}async signInWithIdToken(t){await this._removeSession();try{const{options:e,provider:n,token:i,access_token:r,nonce:a}=t,o=await Dn(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:null===e||void 0===e?void 0:e.captchaToken}},xform:In}),{data:s,error:l}=o;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new _n}}catch(e){if(mn(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,n,i,r,a;try{if(await this._removeSession(),"email"in t){const{email:i,options:r}=t;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await dn(this.storage,this.storageKey));const{error:s}=await Dn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:i,data:null!==(e=null===r||void 0===r?void 0:r.data)&&void 0!==e?e:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:o},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in t){const{phone:e,options:n}=t,{data:o,error:s}=await Dn(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:e,data:null!==(i=null===n||void 0===n?void 0:n.data)&&void 0!==i?i:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s}}throw new wn("You must provide either an email or phone number.")}catch(o){if(mn(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var e,n;try{let i,r;"email_change"!==t.type&&"phone_change"!==t.type&&await this._removeSession(),"options"in t&&(i=null===(e=t.options)||void 0===e?void 0:e.redirectTo,r=null===(n=t.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:o}=await Dn(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:In});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const s=a.session,l=a.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(mn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var e,n,i;try{await this._removeSession();let r=null,a=null;return"pkce"===this.flowType&&([r,a]=await dn(this.storage,this.storageKey)),await Dn(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(n=null===(e=t.options)||void 0===e?void 0:e.redirectTo)&&void 0!==n?n:void 0}),(null===(i=null===t||void 0===t?void 0:t.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:a}),headers:this.headers,xform:Fn})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new xn;const{error:i}=await Dn(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:i}}))}catch(t){if(mn(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{"email_change"!=t.type&&"phone_change"!=t.type&&await this._removeSession();const e="".concat(this.url,"/resend");if("email"in t){const{email:n,type:i,options:r}=t,{error:a}=await Dn(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in t){const{phone:n,type:i,options:r}=t,{data:a,error:o}=await Dn(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new wn("You must provide either an email or phone number and a type")}catch(e){if(mn(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async t=>t))))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const t=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await t,await e()))();return this.pendingInLock.push((async()=>{try{await n}catch(il){}})()),n}return await this.lock("lock:".concat(this.storageKey),t,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const t=e();for(this.pendingInLock.push((async()=>{try{await t}catch(il){}})()),await t;this.pendingInLock.length;){const t=[...this.pendingInLock];await Promise.all(t),this.pendingInLock.splice(0,t.length)}return await t}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let t=null;const e=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),null!==e&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=!!t.expires_at&&t.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",t.expires_at),!n){if(this.storage.isServer){const e=this.suppressGetSessionWarning;t=new Proxy(t,{get:(t,n,i)=>(e||"user"!==n||console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(t,n,i))})}return{data:{session:t},error:null}}const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(t){try{return t?await Dn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:t,xform:Rn}):await this._useSession((async t=>{var e,n,i;const{data:r,error:a}=t;if(a)throw a;return(null===(e=r.session)||void 0===e?void 0:e.access_token)||this.hasCustomAuthorizationHeader?await Dn(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(i=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0,xform:Rn}):{data:{user:null},error:new xn}}))}catch(e){if(mn(e))return{data:{user:null},error:e};throw e}}async updateUser(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(t,e)))}async _updateUser(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession((async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new xn;const a=i.session;let o=null,s=null;"pkce"===this.flowType&&null!=t.email&&([o,s]=await dn(this.storage,this.storageKey));const{data:l,error:c}=await Dn(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===e||void 0===e?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:s}),jwt:a.access_token,xform:Rn});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}}))}catch(n){if(mn(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return un(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(t)))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xn;const e=Date.now()/1e3;let n=e,i=!0,r=null;const a=un(t.access_token);if(a.exp&&(n=a.exp,i=n<=e),i){const{session:e,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!e)return{data:{user:null,session:null},error:null};r=e}else{const{data:i,error:a}=await this._getUser(t.access_token);if(a)throw a;r={access_token:t.access_token,refresh_token:t.refresh_token,user:i.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(mn(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(t)))}async _refreshSession(t){try{return await this._useSession((async e=>{var n;if(!t){const{data:i,error:r}=e;if(r)throw r;t=null!==(n=i.session)&&void 0!==n?n:void 0}if(!(null===t||void 0===t?void 0:t.refresh_token))throw new xn;const{session:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(mn(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t){try{if(!Ze())throw new Cn("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Cn("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!t)throw new Sn("Not a valid PKCE flow url.");const e=nn(window.location.href);if(t){if(!e.code)throw new Sn("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}if(e.error||e.error_description||e.error_code)throw new Cn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:a,expires_in:o,expires_at:s,token_type:l}=e;if(!r||!o||!a||!l)throw new Cn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(o);let h=c+u;s&&(h=parseInt(s));const f=h-c;1e3*f<=Kn&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(f,"s, should have been closer to ").concat(u,"s"));const d=h-u;c-d>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",d,h,c):c-d<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",d,h,c);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:u,expires_at:h,refresh_token:a,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(e){if(mn(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const t=nn(window.location.href);return!(!Ze()||!t.access_token&&!t.error_description)}async _isPKCEFlow(){const t=nn(window.location.href),e=await sn(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!t.code||!e)}async signOut(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(t)))}async _signOut(){let{scope:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession((async e=>{var n;const{data:i,error:r}=e;if(r)return{error:r};const a=null===(n=i.session)||void 0===n?void 0:n.access_token;if(a){const{error:e}=await this.admin.signOut(a,t);if(e&&(!function(t){return mn(t)&&"AuthApiError"===t.name}(e)||404!==e.status&&401!==e.status&&403!==e.status))return{error:e}}return"others"!==t&&(await this._removeSession(),await ln(this.storage,"".concat(this.storageKey,"-code-verifier")),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))}onAuthStateChange(t){const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(e)}))})(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession((async e=>{var n,i;try{const{data:{session:i},error:r}=e;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(t))||void 0===n?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(r){await(null===(i=this.stateChangeEmitters.get(t))||void 0===i?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}}))}async resetPasswordForEmail(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,i=null;"pkce"===this.flowType&&([n,i]=await dn(this.storage,this.storageKey,!0));try{return await Dn(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(mn(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(t=e.user.identities)&&void 0!==t?t:[]},error:null}}catch(e){if(mn(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:n,error:i}=await this._useSession((async e=>{var n,i,r,a,o;const{data:s,error:l}=e;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),t.provider,{redirectTo:null===(n=t.options)||void 0===n?void 0:n.redirectTo,scopes:null===(i=t.options)||void 0===i?void 0:i.scopes,queryParams:null===(r=t.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await Dn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(o=null===(a=s.session)||void 0===a?void 0:a.access_token)&&void 0!==o?o:void 0})}));if(i)throw i;return Ze()&&!(null===(e=t.options)||void 0===e?void 0:e.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:t.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(mn(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession((async e=>{var n,i;const{data:r,error:a}=e;if(a)throw a;return await Dn(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(t.identity_id),{headers:this.headers,jwt:null!==(i=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})}))}catch(e){if(mn(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e="#_refreshAccessToken(".concat(t.substring(0,5),"...)");this._debug(e,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(t){return await new Promise((e=>{setTimeout((()=>e(null)),t)}))}(200*Math.pow(2,n-1)),this._debug(e,"refreshing attempt",n),await Dn(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:t},headers:this.headers,xform:In})),i=(t,e)=>{const n=200*Math.pow(2,t);return e&&Tn(e)&&Date.now()+n-r<Kn},new Promise(((t,e)=>{(async()=>{for(let r=0;r<1/0;r++)try{const e=await n(r);if(!i(r,null,e))return void t(e)}catch(il){if(!i(r,il))return void e(il)}})()})))}catch(r){if(this._debug(e,"error",r),mn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(e,"end")}var n,i}_isValidSession(t){return"object"===typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),Ze()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const e="#_recoverAndRefresh()";this._debug(e,"begin");try{const n=await sn(this.storage,this.storageKey);if(this._debug(e,"session from storage",n),!this._isValidSession(n))return this._debug(e,"session is not valid"),void(null!==n&&await this._removeSession());const i=Math.round(Date.now()/1e3),r=(null!==(t=n.expires_at)&&void 0!==t?t:1/0)<i+10;if(this._debug(e,"session has".concat(r?"":" not"," expired with margin of ").concat(10,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:t}=await this._callRefreshToken(n.refresh_token);t&&(console.error(t),Tn(t)||(this._debug(e,"refresh failed with a non-retryable error, removing the session",t),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(e,"error",n),void console.error(n)}finally{this._debug(e,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i="#_callRefreshToken(".concat(t.substring(0,5),"...)");this._debug(i,"begin");try{this.refreshingDeferred=new cn;const{data:e,error:n}=await this._refreshAccessToken(t);if(n)throw n;if(!e.session)throw new xn;await this._saveSession(e.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",e.session);const i={session:e.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(r){if(this._debug(i,"error",r),mn(r)){const t={session:null,error:r};return Tn(r)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(e=this.refreshingDeferred)||void 0===e||e.resolve(t),t}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i="#_notifyAllSubscribers(".concat(t,")");this._debug(i,"begin",e,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const i=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(t,e)}catch(il){i.push(il)}}));if(await Promise.all(r),i.length>0){for(let t=0;t<i.length;t+=1)console.error(i[t]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await on(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ln(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ze()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(il){console.error("removing visibilitychange callback failed",il)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval((()=>this._autoRefreshTokenTick()),Kn);this.autoRefreshTicker=t,t&&"object"===typeof t&&"function"===typeof t.unref?t.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(t),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const t=Date.now();try{return await this._useSession((async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const i=Math.floor((1e3*n.expires_at-t)/Kn);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(i," ticks, a tick lasts ").concat(Kn,"ms, refresh threshold is ").concat(3," ticks")),i<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(il){console.error("Auto refresh tick failed with error. This is likely a transient error.",il)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(il){if(!(il.isAcquireTimeout||il instanceof Xn))throw il;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ze()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e="#_onVisibilityChanged(".concat(t,")");this._debug(e,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const i=["provider=".concat(encodeURIComponent(e))];if((null===n||void 0===n?void 0:n.redirectTo)&&i.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&i.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[t,e]=await dn(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(t)),code_challenge_method:"".concat(encodeURIComponent(e))});i.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const t=new URLSearchParams(n.queryParams);i.push(t.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&i.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(t,"?").concat(i.join("&"))}async _unenroll(t){try{return await this._useSession((async e=>{var n;const{data:i,error:r}=e;return r?{data:null,error:r}:await Dn(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(t.factorId),{headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(mn(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession((async e=>{var n,i;const{data:r,error:a}=e;if(a)return{data:null,error:a};const{data:o,error:s}=await Dn(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:((null===(i=null===o||void 0===o?void 0:o.totp)||void 0===i?void 0:i.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})}))}catch(e){if(mn(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async e=>{var n;const{data:i,error:r}=e;if(r)return{data:null,error:r};const{data:a,error:o}=await Dn(this.fetch,"POST","".concat(this.url,"/factors/").concat(t.factorId,"/verify"),{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})}))}catch(e){if(mn(e))return{data:null,error:e};throw e}}))}async _challenge(t){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async e=>{var n;const{data:i,error:r}=e;return r?{data:null,error:r}:await Dn(this.fetch,"POST","".concat(this.url,"/factors/").concat(t.factorId,"/challenge"),{headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(mn(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const n=(null===t||void 0===t?void 0:t.factors)||[],i=n.filter((t=>"totp"===t.factor_type&&"verified"===t.status));return{data:{all:n,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async t=>{var e,n;const{data:{session:i},error:r}=t;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let o=null;a.aal&&(o=a.aal);let s=o;(null!==(n=null===(e=i.user.factors)||void 0===e?void 0:e.filter((t=>"verified"===t.status)))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:o,nextLevel:s,currentAuthenticationMethods:a.amr||[]},error:null}}))))}}$n.nextInstanceID=0;const Qn=$n;class Zn extends Qn{constructor(t){super(t)}}var ti=function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function o(t){try{l(i.next(t))}catch(il){a(il)}}function s(t){try{l(i.throw(t))}catch(il){a(il)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((i=i.apply(t,e||[])).next())}))};class ei{constructor(t,e,n){var i,r,a;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");const o=t.replace(/\/$/,"");this.realtimeUrl="".concat(o,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(o,"/auth/v1"),this.storageUrl="".concat(o,"/storage/v1"),this.functionsUrl="".concat(o,"/functions/v1");const s="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),l=function(t,e){const{db:n,auth:i,realtime:r,global:a}=t,{db:o,auth:s,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},s),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),a)}}(null!==n&&void 0!==n?n:{},{db:He,realtime:Xe,auth:Object.assign(Object.assign({},Ye),{storageKey:s}),global:We});this.storageKey=null!==(i=l.auth.storageKey)&&void 0!==i?i:"",this.headers=null!==(r=l.global.headers)&&void 0!==r?r:{},this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=qe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},l.realtime)),this.rest=new Ht("".concat(o,"/rest/v1"),{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Lt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Be(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(t,e,n)}channel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return ti(this,void 0,void 0,(function*(){const{data:n}=yield this.auth.getSession();return null!==(e=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:null}))}_initSupabaseAuthClient(t,e,n){let{autoRefreshToken:i,persistSession:r,detectSessionInUrl:a,storage:o,storageKey:s,flowType:l,debug:c}=t;var u;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Zn({url:this.authUrl,headers:Object.assign(Object.assign({},h),e),storageKey:s,autoRefreshToken:i,persistSession:r,detectSessionInUrl:a,storage:o,flowType:l,debug:c,fetch:n,hasCustomAuthorizationHeader:null!==(u="Authorization"in this.headers)&&void 0!==u&&u})}_initRealtimeClient(t){return new ve(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},null===t||void 0===t?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((t,e)=>{this._handleTokenChanged(t,"CLIENT",null===e||void 0===e?void 0:e.access_token)}))}_handleTokenChanged(t,e,n){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===n?"SIGNED_OUT"===t&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!==n&&void 0!==n?n:null),this.changedAccessToken=n)}}const ni=(t,e,n)=>new ei(t,e,n),ii={container:"Profile_container__uJHvm",profileBlock:"Profile_profileBlock__A9UO-",profileHeader:"Profile_profileHeader__xhLDF",profileCover:"Profile_profileCover__J-xTy",profileAvatar:"Profile_profileAvatar__MGVy0",profileInfo:"Profile_profileInfo__MGVsd",profileNames:"Profile_profileNames__nxvPE",profileTags:"Profile_profileTags__Ril4A",tag:"Profile_tag__uc9qs",addTag:"Profile_addTag__UIwFy",profileActions:"Profile_profileActions__vPfDF",actionButton:"Profile_actionButton__3nWbo",addFriend:"Profile_addFriend__WE65p",addFriendItem:"Profile_addFriendItem__0QPAA",profileMenu:"Profile_profileMenu__8FfnC",menuItem:"Profile_menuItem__js1y1",profileContent:"Profile_profileContent__sSsWg",contentSection:"Profile_contentSection__M4-L+",menuCollapsed:"Profile_menuCollapsed__Z084h",addFriendBtn:"Profile_addFriendBtn__FI3L8",moreOptionsBtn:"Profile_moreOptionsBtn__cUZXq",moreOptionsMenu:"Profile_moreOptionsMenu__XXIQK",friendAdd:"Profile_friendAdd__BgqVC",guestView:"Profile_guestView__FOoDw",ownerControls:"Profile_ownerControls__avqzk"},ri=ni("https://cnicyffiqvdhgyzkogtl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8"),ai=()=>{const{username:t}=function(){let{matches:t}=e.useContext(q),n=t[t.length-1];return n?n.params:{}}(),[n,i]=(0,e.useState)(null),[r,a]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{const{data:e,error:n}=await ri.auth.getUser();a(n?null:e.user);const{data:r,error:o}=await ri.from("users_public_information").select("id, auth_id, username, first_name, last_name, avatar_url, cover_url, status").eq("username",t).single();o?console.error("Error fetching user information:",o.message):i(r)})()}),[t]);const o=r&&n&&r.id===n.auth_id;return(0,Ot.jsx)("div",{className:ii.container,children:n&&(0,Ot.jsxs)("div",{className:ii.profileBlock,children:[(0,Ot.jsxs)("div",{className:ii.profileHeader,children:[(0,Ot.jsx)("div",{className:ii.profileCover,children:(0,Ot.jsx)("img",{id:"profile-cover",src:n.cover_url,alt:"Cover Photo"})}),(0,Ot.jsx)("div",{className:ii.profileAvatar,children:(0,Ot.jsx)("img",{id:"profile-avatar",src:n.avatar_url,alt:"User Photo"})}),(0,Ot.jsxs)("div",{className:ii.profileInfo,children:[(0,Ot.jsx)("h2",{className:ii.profileNames,children:"".concat(n.first_name," ").concat(n.last_name)}),(0,Ot.jsx)("div",{className:ii.profileTags})]})]}),o?(0,Ot.jsx)("div",{children:(0,Ot.jsx)("div",{className:ii.addFriend,children:(0,Ot.jsxs)("div",{className:ii.friendAdd,children:[(0,Ot.jsx)("div",{className:ii.addFriendBtn,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),(0,Ot.jsx)("div",{className:ii.addFriendBtn,children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0447\u0430\u0442"})]})})}):r?(0,Ot.jsx)("div",{className:ii.addFriend,children:(0,Ot.jsxs)("div",{className:ii.friendAdd,children:[(0,Ot.jsx)("div",{className:ii.addFriendBtn,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),(0,Ot.jsx)("div",{className:ii.addFriendBtn,children:"\u0414\u0440\u0443\u0436\u0438\u0442\u044c"}),(0,Ot.jsxs)("div",{className:ii.addFriendBtn,children:[(0,Ot.jsx)("i",{className:ii.fas,children:"\u0415\u0449\u0451"}),(0,Ot.jsxs)("div",{className:ii.moreOptionsMenu,children:[(0,Ot.jsx)("a",{href:"#",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443"}),(0,Ot.jsx)("a",{href:"#",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439"}),(0,Ot.jsx)("a",{href:"#",children:"\u0415\u0449\u0435 \u043e\u0434\u043d\u0430 \u043e\u043f\u0446\u0438\u044f"})]})]})]})}):(0,Ot.jsx)("div",{className:ii.guestView,children:(0,Ot.jsx)("p",{children:"\u0412\u044b \u043d\u0435 \u0432\u043e\u0448\u043b\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443. \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u0430 \u0432 \u0413\u043e\u0441\u0442\u0435\u0432\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435."})}),(0,Ot.jsxs)("div",{className:ii.profileMenu,children:[(0,Ot.jsx)("div",{className:ii.menuItem,children:"About"}),(0,Ot.jsx)("div",{className:ii.menuItem,children:"Events"}),(0,Ot.jsx)("div",{className:ii.menuItem,children:"Media"}),(0,Ot.jsx)("div",{className:ii.menuItem,children:"Friends"}),(0,Ot.jsx)("div",{className:ii.menuItem,children:"Groups"}),(0,Ot.jsx)("div",{className:ii.menuItem,children:"Settings"})]}),(0,Ot.jsx)("div",{className:ii.profileContent})]})})},oi=()=>(0,Ot.jsxs)("div",{className:"profile-page",children:[(0,Ot.jsx)("h2",{children:"\u041c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440"}),(0,Ot.jsx)("p",{children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c!"})]}),si=()=>(0,Ot.jsxs)("div",{className:"profile-page",children:[(0,Ot.jsx)("h2",{children:"\u0413\u0440\u0443\u043f\u043f\u044b"}),(0,Ot.jsx)("p",{children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c!"})]}),li="SearchPage_searchPage__0kXTB",ci="SearchPage_searchBar__g8Ux4",ui="SearchPage_filterButton__KDihQ",hi="SearchPage_filters__FpYE3",fi="SearchPage_filter__P1e5A",di="SearchPage_searchSummary__GZ27+",pi="SearchPage_spinner__Wv3Jp",gi="SearchPage_results__GnkIa",mi="SearchPage_profileCard__dXFt2",vi="SearchPage_expanded__kS65t",yi="SearchPage_avatar__n7PgY",bi="SearchPage_profileInfo__41j7v",xi="SearchPage_highlight__PlPGB",_i="SearchPage_toggleButton__C159C",wi="SearchPage_expandedInfo__DkpTD",Ci="SearchPage_actions__Wt87w",Si="SearchPage_actionIcon__wRiY4";function ki(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ti(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(n),!0).forEach((function(e){Ei(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Oi(t){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(t)}function ji(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(t,e)||Mi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(t){return function(t){if(Array.isArray(t))return Di(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Mi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(t,e){if(t){if("string"===typeof t)return Di(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(t,e):void 0}}function Di(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ii=function(){},Li={},Ri={},Fi=null,Ni={mark:Ii,measure:Ii};try{"undefined"!==typeof window&&(Li=window),"undefined"!==typeof document&&(Ri=document),"undefined"!==typeof MutationObserver&&(Fi=MutationObserver),"undefined"!==typeof performance&&(Ni=performance)}catch(il){}var zi,Bi,Ui,Wi,Hi,Yi=(Li.navigator||{}).userAgent,Xi=void 0===Yi?"":Yi,Vi=Li,Gi=Ri,qi=Fi,Ki=Ni,Ji=(Vi.document,!!Gi.documentElement&&!!Gi.head&&"function"===typeof Gi.addEventListener&&"function"===typeof Gi.createElement),$i=~Xi.indexOf("MSIE")||~Xi.indexOf("Trident/"),Qi="___FONT_AWESOME___",Zi=16,tr="fa",er="svg-inline--fa",nr="data-fa-i2svg",ir="data-fa-pseudo-element",rr="data-fa-pseudo-element-pending",ar="data-prefix",or="data-icon",sr="fontawesome-i2svg",lr="async",cr=["HTML","HEAD","STYLE","SCRIPT"],ur=function(){try{return!0}catch(il){return!1}}(),hr="classic",fr="sharp",dr=[hr,fr];function pr(t){return new Proxy(t,{get:function(t,e){return e in t?t[e]:t[hr]}})}var gr=pr((Ei(zi={},hr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Ei(zi,fr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),zi)),mr=pr((Ei(Bi={},hr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ei(Bi,fr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Bi)),vr=pr((Ei(Ui={},hr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ei(Ui,fr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Ui)),yr=pr((Ei(Wi={},hr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ei(Wi,fr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Wi)),br=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,xr="fa-layers-text",_r=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,wr=pr((Ei(Hi={},hr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ei(Hi,fr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Hi)),Cr=[1,2,3,4,5,6,7,8,9,10],Sr=Cr.concat([11,12,13,14,15,16,17,18,19,20]),kr=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Tr={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Or=new Set;Object.keys(mr[hr]).map(Or.add.bind(Or)),Object.keys(mr[fr]).map(Or.add.bind(Or));var jr=[].concat(dr,Ai(Or),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Tr.GROUP,Tr.SWAP_OPACITY,Tr.PRIMARY,Tr.SECONDARY]).concat(Cr.map((function(t){return"".concat(t,"x")}))).concat(Sr.map((function(t){return"w-".concat(t)}))),Er=Vi.FontAwesomeConfig||{};if(Gi&&"function"===typeof Gi.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(t){var e=Pi(t,2),n=e[0],i=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=Gi.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(n));void 0!==r&&null!==r&&(Er[i]=r)}))}var Pr={styleDefault:"solid",familyDefault:"classic",cssPrefix:tr,replacementClass:er,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Er.familyPrefix&&(Er.cssPrefix=Er.familyPrefix);var Ar=Ti(Ti({},Pr),Er);Ar.autoReplaceSvg||(Ar.observeMutations=!1);var Mr={};Object.keys(Pr).forEach((function(t){Object.defineProperty(Mr,t,{enumerable:!0,set:function(e){Ar[t]=e,Dr.forEach((function(t){return t(Mr)}))},get:function(){return Ar[t]}})})),Object.defineProperty(Mr,"familyPrefix",{enumerable:!0,set:function(t){Ar.cssPrefix=t,Dr.forEach((function(t){return t(Mr)}))},get:function(){return Ar.cssPrefix}}),Vi.FontAwesomeConfig=Mr;var Dr=[];var Ir=Zi,Lr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var Rr="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Fr(){for(var t=12,e="";t-- >0;)e+=Rr[62*Math.random()|0];return e}function Nr(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function zr(t){return t.classList?Nr(t.classList):(t.getAttribute("class")||"").split(" ").filter((function(t){return t}))}function Br(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ur(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")}),"")}function Wr(t){return t.size!==Lr.size||t.x!==Lr.x||t.y!==Lr.y||t.rotate!==Lr.rotate||t.flipX||t.flipY}var Hr=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function Yr(){var t=tr,e=er,n=Mr.cssPrefix,i=Mr.replacementClass,r=Hr;if(n!==t||i!==e){var a=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),s=new RegExp("\\.".concat(e),"g");r=r.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(i))}return r}var Xr=!1;function Vr(){Mr.autoAddCss&&!Xr&&(!function(t){if(t&&Ji){var e=Gi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Gi.head.childNodes,i=null,r=n.length-1;r>-1;r--){var a=n[r],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=a)}Gi.head.insertBefore(e,i)}}(Yr()),Xr=!0)}var Gr={mixout:function(){return{dom:{css:Yr,insertCss:Vr}}},hooks:function(){return{beforeDOMElementCreation:function(){Vr()},beforeI2svg:function(){Vr()}}}},qr=Vi||{};qr[Qi]||(qr[Qi]={}),qr[Qi].styles||(qr[Qi].styles={}),qr[Qi].hooks||(qr[Qi].hooks={}),qr[Qi].shims||(qr[Qi].shims=[]);var Kr=qr[Qi],Jr=[],$r=!1;function Qr(t){var e=t.tag,n=t.attributes,i=void 0===n?{}:n,r=t.children,a=void 0===r?[]:r;return"string"===typeof t?Br(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce((function(e,n){return e+"".concat(n,'="').concat(Br(t[n]),'" ')}),"").trim()}(i),">").concat(a.map(Qr).join(""),"</").concat(e,">")}function Zr(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}Ji&&(($r=(Gi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Gi.readyState))||Gi.addEventListener("DOMContentLoaded",(function t(){Gi.removeEventListener("DOMContentLoaded",t),$r=1,Jr.map((function(t){return t()}))})));var ta=function(t,e,n,i){var r,a,o,s=Object.keys(t),l=s.length,c=void 0!==i?function(t,e){return function(n,i,r,a){return t.call(e,n,i,r,a)}}(e,i):e;for(void 0===n?(r=1,o=t[s[0]]):(r=0,o=n);r<l;r++)o=c(o,t[a=s[r]],a,t);return o};function ea(t){var e=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&r)<<10)+(1023&a)+65536):(e.push(r),n--)}else e.push(r)}return e}(t);return 1===e.length?e[0].toString(16):null}function na(t){return Object.keys(t).reduce((function(e,n){var i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e}),{})}function ia(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,i=void 0!==n&&n,r=na(e);"function"!==typeof Kr.hooks.addPack||i?Kr.styles[t]=Ti(Ti({},Kr.styles[t]||{}),r):Kr.hooks.addPack(t,na(e)),"fas"===t&&ia("fa",e)}var ra,aa,oa,sa=Kr.styles,la=Kr.shims,ca=(Ei(ra={},hr,Object.values(vr[hr])),Ei(ra,fr,Object.values(vr[fr])),ra),ua=null,ha={},fa={},da={},pa={},ga={},ma=(Ei(aa={},hr,Object.keys(gr[hr])),Ei(aa,fr,Object.keys(gr[fr])),aa);function va(t,e){var n,i=e.split("-"),r=i[0],a=i.slice(1).join("-");return r!==t||""===a||(n=a,~jr.indexOf(n))?null:a}var ya,ba=function(){var t=function(t){return ta(sa,(function(e,n,i){return e[i]=ta(n,t,{}),e}),{})};ha=t((function(t,e,n){if(e[3]&&(t[e[3]]=n),e[2]){var i=e[2].filter((function(t){return"number"===typeof t}));i.forEach((function(e){t[e.toString(16)]=n}))}return t})),fa=t((function(t,e,n){if(t[n]=n,e[2]){var i=e[2].filter((function(t){return"string"===typeof t}));i.forEach((function(e){t[e]=n}))}return t})),ga=t((function(t,e,n){var i=e[2];return t[n]=n,i.forEach((function(e){t[e]=n})),t}));var e="far"in sa||Mr.autoFetchSvg,n=ta(la,(function(t,n){var i=n[0],r=n[1],a=n[2];return"far"!==r||e||(r="fas"),"string"===typeof i&&(t.names[i]={prefix:r,iconName:a}),"number"===typeof i&&(t.unicodes[i.toString(16)]={prefix:r,iconName:a}),t}),{names:{},unicodes:{}});da=n.names,pa=n.unicodes,ua=ka(Mr.styleDefault,{family:Mr.familyDefault})};function xa(t,e){return(ha[t]||{})[e]}function _a(t,e){return(ga[t]||{})[e]}function wa(t){return da[t]||{prefix:null,iconName:null}}function Ca(){return ua}ya=function(t){ua=ka(t.styleDefault,{family:Mr.familyDefault})},Dr.push(ya),ba();var Sa=function(){return{prefix:null,iconName:null,rest:[]}};function ka(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===e?hr:e,i=gr[n][t],r=mr[n][t]||mr[n][i],a=t in Kr.styles?t:null;return r||a||null}var Ta=(Ei(oa={},hr,Object.keys(vr[hr])),Ei(oa,fr,Object.keys(vr[fr])),oa);function Oa(t){var e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,i=void 0!==n&&n,r=(Ei(e={},hr,"".concat(Mr.cssPrefix,"-").concat(hr)),Ei(e,fr,"".concat(Mr.cssPrefix,"-").concat(fr)),e),a=null,o=hr;(t.includes(r[hr])||t.some((function(t){return Ta[hr].includes(t)})))&&(o=hr),(t.includes(r[fr])||t.some((function(t){return Ta[fr].includes(t)})))&&(o=fr);var s=t.reduce((function(t,e){var n=va(Mr.cssPrefix,e);if(sa[e]?(e=ca[o].includes(e)?yr[o][e]:e,a=e,t.prefix=e):ma[o].indexOf(e)>-1?(a=e,t.prefix=ka(e,{family:o})):n?t.iconName=n:e!==Mr.replacementClass&&e!==r[hr]&&e!==r[fr]&&t.rest.push(e),!i&&t.prefix&&t.iconName){var s="fa"===a?wa(t.iconName):{},l=_a(t.prefix,t.iconName);s.prefix&&(a=null),t.iconName=s.iconName||l||t.iconName,t.prefix=s.prefix||t.prefix,"far"!==t.prefix||sa.far||!sa.fas||Mr.autoFetchSvg||(t.prefix="fas")}return t}),Sa());return(t.includes("fa-brands")||t.includes("fab"))&&(s.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(s.prefix="fad"),s.prefix||o!==fr||!sa.fass&&!Mr.autoFetchSvg||(s.prefix="fass",s.iconName=_a(s.prefix,s.iconName)||s.iconName),"fa"!==s.prefix&&"fa"!==a||(s.prefix=Ca()||"fas"),s}var ja=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e,n,i;return e=t,n=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(e){t.definitions[e]=Ti(Ti({},t.definitions[e]||{}),r[e]),ia(e,r[e]);var n=vr[hr][e];n&&ia(n,r[e]),ba()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map((function(e){var i=n[e],r=i.prefix,a=i.iconName,o=i.icon,s=o[2];t[r]||(t[r]={}),s.length>0&&s.forEach((function(e){"string"===typeof e&&(t[r][e]=o)})),t[r][a]=o})),t}}],n&&ji(e.prototype,n),i&&ji(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ea=[],Pa={},Aa={},Ma=Object.keys(Aa);function Da(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Pa[t]||[]).forEach((function(t){e=t.apply(null,[e].concat(i))})),e}function Ia(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Pa[t]||[]).forEach((function(t){t.apply(null,n)}))}function La(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Aa[t]?Aa[t].apply(null,e):void 0}function Ra(t){"fa"===t.prefix&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Ca();if(e)return e=_a(n,e)||e,Zr(Fa.definitions,n,e)||Zr(Kr.styles,n,e)}var Fa=new ja,Na={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ji?(Ia("beforeI2svg",t),La("pseudoElements2svg",t),La("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoReplaceSvgRoot;!1===Mr.autoReplaceSvg&&(Mr.autoReplaceSvg=!0),Mr.observeMutations=!0,t=function(){Ua({autoReplaceSvgRoot:n}),Ia("watch",e)},Ji&&($r?setTimeout(t,0):Jr.push(t))}},za={icon:function(t){if(null===t)return null;if("object"===Oi(t)&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:_a(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&2===t.length){var e=0===t[1].indexOf("fa-")?t[1].slice(3):t[1],n=ka(t[0]);return{prefix:n,iconName:_a(n,e)||e}}if("string"===typeof t&&(t.indexOf("".concat(Mr.cssPrefix,"-"))>-1||t.match(br))){var i=Oa(t.split(" "),{skipLookups:!0});return{prefix:i.prefix||Ca(),iconName:_a(i.prefix,i.iconName)||i.iconName}}if("string"===typeof t){var r=Ca();return{prefix:r,iconName:_a(r,t)||t}}}},Ba={noAuto:function(){Mr.autoReplaceSvg=!1,Mr.observeMutations=!1,Ia("noAuto")},config:Mr,dom:Na,parse:za,library:Fa,findIconDefinition:Ra,toHtml:Qr},Ua=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,e=void 0===t?Gi:t;(Object.keys(Kr.styles).length>0||Mr.autoFetchSvg)&&Ji&&Mr.autoReplaceSvg&&Ba.dom.i2svg({node:e})};function Wa(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map((function(t){return Qr(t)}))}}),Object.defineProperty(t,"node",{get:function(){if(Ji){var e=Gi.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function Ha(t){var e=t.icons,n=e.main,i=e.mask,r=t.prefix,a=t.iconName,o=t.transform,s=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,f=t.watchable,d=void 0!==f&&f,p=i.found?i:n,g=p.width,m=p.height,v="fak"===r,y=[Mr.replacementClass,a?"".concat(Mr.cssPrefix,"-").concat(a):""].filter((function(t){return-1===h.classes.indexOf(t)})).filter((function(t){return""!==t||!!t})).concat(h.classes).join(" "),b={children:[],attributes:Ti(Ti({},h.attributes),{},{"data-prefix":r,"data-icon":a,class:y,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},x=v&&!~h.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};d&&(b.attributes[nr]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||Fr())},children:[l]}),delete b.attributes.title);var _=Ti(Ti({},b),{},{prefix:r,iconName:a,main:n,mask:i,maskId:c,transform:o,symbol:s,styles:Ti(Ti({},x),h.styles)}),w=i.found&&n.found?La("generateAbstractMask",_)||{children:[],attributes:{}}:La("generateAbstractIcon",_)||{children:[],attributes:{}},C=w.children,S=w.attributes;return _.children=C,_.attributes=S,s?function(t){var e=t.prefix,n=t.iconName,i=t.children,r=t.attributes,a=t.symbol,o=!0===a?"".concat(e,"-").concat(Mr.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ti(Ti({},r),{},{id:o}),children:i}]}]}(_):function(t){var e=t.children,n=t.main,i=t.mask,r=t.attributes,a=t.styles,o=t.transform;if(Wr(o)&&n.found&&!i.found){var s={x:n.width/n.height/2,y:.5};r.style=Ur(Ti(Ti({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(_)}function Ya(t){var e=t.content,n=t.width,i=t.height,r=t.transform,a=t.title,o=t.extra,s=t.watchable,l=void 0!==s&&s,c=Ti(Ti(Ti({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});l&&(c[nr]="");var u=Ti({},o.styles);Wr(r)&&(u.transform=function(t){var e=t.transform,n=t.width,i=void 0===n?Zi:n,r=t.height,a=void 0===r?Zi:r,o=t.startCentered,s=void 0!==o&&o,l="";return l+=s&&$i?"translate(".concat(e.x/Ir-i/2,"em, ").concat(e.y/Ir-a/2,"em) "):s?"translate(calc(-50% + ".concat(e.x/Ir,"em), calc(-50% + ").concat(e.y/Ir,"em)) "):"translate(".concat(e.x/Ir,"em, ").concat(e.y/Ir,"em) "),l+="scale(".concat(e.size/Ir*(e.flipX?-1:1),", ").concat(e.size/Ir*(e.flipY?-1:1),") "),l+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);var h=Ur(u);h.length>0&&(c.style=h);var f=[];return f.push({tag:"span",attributes:c,children:[e]}),a&&f.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),f}var Xa=Kr.styles;function Va(t){var e=t[0],n=t[1],i=Pi(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(i)?{tag:"g",attributes:{class:"".concat(Mr.cssPrefix,"-").concat(Tr.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Mr.cssPrefix,"-").concat(Tr.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Mr.cssPrefix,"-").concat(Tr.PRIMARY),fill:"currentColor",d:i[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:i}}}}var Ga={found:!1,width:512,height:512};function qa(t,e){var n=e;return"fa"===e&&null!==Mr.styleDefault&&(e=Ca()),new Promise((function(i,r){La("missingIconAbstract");if("fa"===n){var a=wa(t)||{};t=a.iconName||t,e=a.prefix||e}if(t&&e&&Xa[e]&&Xa[e][t])return i(Va(Xa[e][t]));!function(t,e){ur||Mr.showMissingIcons||!t||console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}(t,e),i(Ti(Ti({},Ga),{},{icon:Mr.showMissingIcons&&t&&La("missingIconAbstract")||{}}))}))}var Ka=function(){},Ja=Mr.measurePerformance&&Ki&&Ki.mark&&Ki.measure?Ki:{mark:Ka,measure:Ka},$a='FA "6.5.2"',Qa=function(t){Ja.mark("".concat($a," ").concat(t," ends")),Ja.measure("".concat($a," ").concat(t),"".concat($a," ").concat(t," begins"),"".concat($a," ").concat(t," ends"))},Za={begin:function(t){return Ja.mark("".concat($a," ").concat(t," begins")),function(){return Qa(t)}},end:Qa},to=function(){};function eo(t){return"string"===typeof(t.getAttribute?t.getAttribute(nr):null)}function no(t){return Gi.createElementNS("http://www.w3.org/2000/svg",t)}function io(t){return Gi.createElement(t)}function ro(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===e?"svg"===t.tag?no:io:e;if("string"===typeof t)return Gi.createTextNode(t);var i=n(t.tag);return Object.keys(t.attributes||[]).forEach((function(e){i.setAttribute(e,t.attributes[e])})),(t.children||[]).forEach((function(t){i.appendChild(ro(t,{ceFn:n}))})),i}var ao={replace:function(t){var e=t[0];if(e.parentNode)if(t[1].forEach((function(t){e.parentNode.insertBefore(ro(t),e)})),null===e.getAttribute(nr)&&Mr.keepOriginalSource){var n=Gi.createComment(function(t){var e=" ".concat(t.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){var e=t[0],n=t[1];if(~zr(e).indexOf(Mr.replacementClass))return ao.replace(t);var i=new RegExp("".concat(Mr.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce((function(t,e){return e===Mr.replacementClass||e.match(i)?t.toSvg.push(e):t.toNode.push(e),t}),{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),0===r.toNode.length?e.removeAttribute("class"):e.setAttribute("class",r.toNode.join(" "))}var a=n.map((function(t){return Qr(t)})).join("\n");e.setAttribute(nr,""),e.innerHTML=a}};function oo(t){t()}function so(t,e){var n="function"===typeof e?e:to;if(0===t.length)n();else{var i=oo;Mr.mutateApproach===lr&&(i=Vi.requestAnimationFrame||oo),i((function(){var e=!0===Mr.autoReplaceSvg?ao.replace:ao[Mr.autoReplaceSvg]||ao.replace,i=Za.begin("mutate");t.map(e),i(),n()}))}}var lo=!1;function co(){lo=!0}function uo(){lo=!1}var ho=null;function fo(t){if(qi&&Mr.observeMutations){var e=t.treeCallback,n=void 0===e?to:e,i=t.nodeCallback,r=void 0===i?to:i,a=t.pseudoElementsCallback,o=void 0===a?to:a,s=t.observeMutationsRoot,l=void 0===s?Gi:s;ho=new qi((function(t){if(!lo){var e=Ca();Nr(t).forEach((function(t){if("childList"===t.type&&t.addedNodes.length>0&&!eo(t.addedNodes[0])&&(Mr.searchPseudoElements&&o(t.target),n(t.target)),"attributes"===t.type&&t.target.parentNode&&Mr.searchPseudoElements&&o(t.target.parentNode),"attributes"===t.type&&eo(t.target)&&~kr.indexOf(t.attributeName))if("class"===t.attributeName&&function(t){var e=t.getAttribute?t.getAttribute(ar):null,n=t.getAttribute?t.getAttribute(or):null;return e&&n}(t.target)){var i=Oa(zr(t.target)),a=i.prefix,s=i.iconName;t.target.setAttribute(ar,a||e),s&&t.target.setAttribute(or,s)}else(l=t.target)&&l.classList&&l.classList.contains&&l.classList.contains(Mr.replacementClass)&&r(t.target);var l}))}})),Ji&&ho.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function po(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=void 0!==t.innerText?t.innerText.trim():"",r=Oa(zr(t));return r.prefix||(r.prefix=Ca()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function(t,e){return(fa[t]||{})[e]}(r.prefix,t.innerText)||xa(r.prefix,ea(t.innerText))),!r.iconName&&Mr.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function go(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=po(t),i=n.iconName,r=n.prefix,a=n.rest,o=function(t){var e=Nr(t.attributes).reduce((function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t}),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Mr.autoA11y&&(n?e["aria-labelledby"]="".concat(Mr.replacementClass,"-title-").concat(i||Fr()):(e["aria-hidden"]="true",e.focusable="false")),e}(t),s=Da("parseNodeAttributes",{},t),l=e.styleParser?function(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce((function(t,e){var n=e.split(":"),i=n[0],r=n.slice(1);return i&&r.length>0&&(t[i]=r.join(":").trim()),t}),{})),n}(t):[];return Ti({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:Lr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:l,attributes:o}},s)}var mo=Kr.styles;function vo(t){var e="nest"===Mr.autoReplaceSvg?go(t,{styleParser:!1}):go(t);return~e.extra.classes.indexOf(xr)?La("generateLayersText",t,e):La("generateSvgReplacementMutation",t,e)}var yo=new Set;function bo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Ji)return Promise.resolve();var n=Gi.documentElement.classList,i=function(t){return n.add("".concat(sr,"-").concat(t))},r=function(t){return n.remove("".concat(sr,"-").concat(t))},a=Mr.autoFetchSvg?yo:dr.map((function(t){return"fa-".concat(t)})).concat(Object.keys(mo));a.includes("fa")||a.push("fa");var o=[".".concat(xr,":not([").concat(nr,"])")].concat(a.map((function(t){return".".concat(t,":not([").concat(nr,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=Nr(t.querySelectorAll(o))}catch(il){}if(!(s.length>0))return Promise.resolve();i("pending"),r("complete");var l=Za.begin("onTree"),c=s.reduce((function(t,e){try{var n=vo(e);n&&t.push(n)}catch(il){ur||"MissingIcon"===il.name&&console.error(il)}return t}),[]);return new Promise((function(t,n){Promise.all(c).then((function(n){so(n,(function(){i("active"),i("complete"),r("pending"),"function"===typeof e&&e(),l(),t()}))})).catch((function(t){l(),n(t)}))}))}function xo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;vo(t).then((function(t){t&&so([t],e)}))}dr.map((function(t){yo.add("fa-".concat(t))})),Object.keys(gr[hr]).map(yo.add.bind(yo)),Object.keys(gr[fr]).map(yo.add.bind(yo)),yo=Ai(yo);var _o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,i=void 0===n?Lr:n,r=e.symbol,a=void 0!==r&&r,o=e.mask,s=void 0===o?null:o,l=e.maskId,c=void 0===l?null:l,u=e.title,h=void 0===u?null:u,f=e.titleId,d=void 0===f?null:f,p=e.classes,g=void 0===p?[]:p,m=e.attributes,v=void 0===m?{}:m,y=e.styles,b=void 0===y?{}:y;if(t){var x=t.prefix,_=t.iconName,w=t.icon;return Wa(Ti({type:"icon"},t),(function(){return Ia("beforeDOMElementCreation",{iconDefinition:t,params:e}),Mr.autoA11y&&(h?v["aria-labelledby"]="".concat(Mr.replacementClass,"-title-").concat(d||Fr()):(v["aria-hidden"]="true",v.focusable="false")),Ha({icons:{main:Va(w),mask:s?Va(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:x,iconName:_,transform:Ti(Ti({},Lr),i),symbol:a,title:h,maskId:c,titleId:d,extra:{attributes:v,styles:b,classes:g}})}))}},wo={mixout:function(){return{icon:(t=_o,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:Ra(e||{}),r=n.mask;return r&&(r=(r||{}).icon?r:Ra(r||{})),t(i,Ti(Ti({},n),{},{mask:r}))})};var t},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=bo,t.nodeCallback=xo,t}}},provides:function(t){t.i2svg=function(t){var e=t.node,n=void 0===e?Gi:e,i=t.callback;return bo(n,void 0===i?function(){}:i)},t.generateSvgReplacementMutation=function(t,e){var n=e.iconName,i=e.title,r=e.titleId,a=e.prefix,o=e.transform,s=e.symbol,l=e.mask,c=e.maskId,u=e.extra;return new Promise((function(e,h){Promise.all([qa(n,a),l.iconName?qa(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=Pi(l,2),f=h[0],d=h[1];e([t,Ha({icons:{main:f,mask:d},prefix:a,iconName:n,transform:o,symbol:s,maskId:c,title:i,titleId:r,extra:u,watchable:!0})])})).catch(h)}))},t.generateAbstractIcon=function(t){var e,n=t.children,i=t.attributes,r=t.main,a=t.transform,o=Ur(t.styles);return o.length>0&&(i.style=o),Wr(a)&&(e=La("generateAbstractTransformGrouping",{main:r,transform:a,containerWidth:r.width,iconWidth:r.width})),n.push(e||r.icon),{children:n,attributes:i}}}},Co={mixout:function(){return{layer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.classes,i=void 0===n?[]:n;return Wa({type:"layer"},(function(){Ia("beforeDOMElementCreation",{assembler:t,params:e});var n=[];return t((function(t){Array.isArray(t)?t.map((function(t){n=n.concat(t.abstract)})):n=n.concat(t.abstract)})),[{tag:"span",attributes:{class:["".concat(Mr.cssPrefix,"-layers")].concat(Ai(i)).join(" ")},children:n}]}))}}}},So={mixout:function(){return{counter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.title,i=void 0===n?null:n,r=e.classes,a=void 0===r?[]:r,o=e.attributes,s=void 0===o?{}:o,l=e.styles,c=void 0===l?{}:l;return Wa({type:"counter",content:t},(function(){return Ia("beforeDOMElementCreation",{content:t,params:e}),function(t){var e=t.content,n=t.title,i=t.extra,r=Ti(Ti(Ti({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),a=Ur(i.styles);a.length>0&&(r.style=a);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:t.toString(),title:i,extra:{attributes:s,styles:c,classes:["".concat(Mr.cssPrefix,"-layers-counter")].concat(Ai(a))}})}))}}}},ko={mixout:function(){return{text:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,i=void 0===n?Lr:n,r=e.title,a=void 0===r?null:r,o=e.classes,s=void 0===o?[]:o,l=e.attributes,c=void 0===l?{}:l,u=e.styles,h=void 0===u?{}:u;return Wa({type:"text",content:t},(function(){return Ia("beforeDOMElementCreation",{content:t,params:e}),Ya({content:t,transform:Ti(Ti({},Lr),i),title:a,extra:{attributes:c,styles:h,classes:["".concat(Mr.cssPrefix,"-layers-text")].concat(Ai(s))}})}))}}},provides:function(t){t.generateLayersText=function(t,e){var n=e.title,i=e.transform,r=e.extra,a=null,o=null;if($i){var s=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();a=l.width/s,o=l.height/s}return Mr.autoA11y&&!n&&(r.attributes["aria-hidden"]="true"),Promise.resolve([t,Ya({content:t.innerHTML,width:a,height:o,transform:i,title:n,extra:r,watchable:!0})])}}},To=new RegExp('"',"ug"),Oo=[1105920,1112319];function jo(t,e){var n="".concat(rr).concat(e.replace(":","-"));return new Promise((function(i,r){if(null!==t.getAttribute(n))return i();var a=Nr(t.children).filter((function(t){return t.getAttribute(ir)===e}))[0],o=Vi.getComputedStyle(t,e),s=o.getPropertyValue("font-family").match(_r),l=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(a&&!s)return t.removeChild(a),i();if(s&&"none"!==c&&""!==c){var u=o.getPropertyValue("content"),h=~["Sharp"].indexOf(s[2])?fr:hr,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?mr[h][s[2].toLowerCase()]:wr[h][l],d=function(t){var e=t.replace(To,""),n=function(t,e){var n,i=t.length,r=t.charCodeAt(e);return r>=55296&&r<=56319&&i>e+1&&(n=t.charCodeAt(e+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}(e,0),i=n>=Oo[0]&&n<=Oo[1],r=2===e.length&&e[0]===e[1];return{value:ea(r?e[0]:e),isSecondary:i||r}}(u),p=d.value,g=d.isSecondary,m=s[0].startsWith("FontAwesome"),v=xa(f,p),y=v;if(m){var b=function(t){var e=pa[t],n=xa("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);b.iconName&&b.prefix&&(v=b.iconName,f=b.prefix)}if(!v||g||a&&a.getAttribute(ar)===f&&a.getAttribute(or)===y)i();else{t.setAttribute(n,y),a&&t.removeChild(a);var x={iconName:null,title:null,titleId:null,prefix:null,transform:Lr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},_=x.extra;_.attributes[ir]=e,qa(v,f).then((function(r){var a=Ha(Ti(Ti({},x),{},{icons:{main:r,mask:Sa()},prefix:f,iconName:y,extra:_,watchable:!0})),o=Gi.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?t.insertBefore(o,t.firstChild):t.appendChild(o),o.outerHTML=a.map((function(t){return Qr(t)})).join("\n"),t.removeAttribute(n),i()})).catch(r)}}else i()}))}function Eo(t){return Promise.all([jo(t,"::before"),jo(t,"::after")])}function Po(t){return t.parentNode!==document.head&&!~cr.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(ir)&&(!t.parentNode||"svg"!==t.parentNode.tagName)}function Ao(t){if(Ji)return new Promise((function(e,n){var i=Nr(t.querySelectorAll("*")).filter(Po).map(Eo),r=Za.begin("searchPseudoElements");co(),Promise.all(i).then((function(){r(),uo(),e()})).catch((function(){r(),uo(),n()}))}))}var Mo=!1,Do=function(t){return t.toLowerCase().split(" ").reduce((function(t,e){var n=e.toLowerCase().split("-"),i=n[0],r=n.slice(1).join("-");if(i&&"h"===r)return t.flipX=!0,t;if(i&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(i){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Io={mixout:function(){return{parse:{transform:function(t){return Do(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-transform");return n&&(t.transform=Do(n)),t}}},provides:function(t){t.generateAbstractTransformGrouping=function(t){var e=t.main,n=t.transform,i=t.containerWidth,r=t.iconWidth,a={transform:"translate(".concat(i/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:Ti({},c.outer),children:[{tag:"g",attributes:Ti({},c.inner),children:[{tag:e.icon.tag,children:e.icon.children,attributes:Ti(Ti({},e.icon.attributes),c.path)}]}]}}}},Lo={x:0,y:0,width:"100%",height:"100%"};function Ro(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}var Fo={hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-mask"),i=n?Oa(n.split(" ").map((function(t){return t.trim()}))):Sa();return i.prefix||(i.prefix=Ca()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides:function(t){t.generateAbstractMask=function(t){var e,n=t.children,i=t.attributes,r=t.main,a=t.mask,o=t.maskId,s=t.transform,l=r.width,c=r.icon,u=a.width,h=a.icon,f=function(t){var e=t.transform,n=t.containerWidth,i=t.iconWidth,r={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:s,containerWidth:u,iconWidth:l}),d={tag:"rect",attributes:Ti(Ti({},Lo),{},{fill:"white"})},p=c.children?{children:c.children.map(Ro)}:{},g={tag:"g",attributes:Ti({},f.inner),children:[Ro(Ti({tag:c.tag,attributes:Ti(Ti({},c.attributes),f.path)},p))]},m={tag:"g",attributes:Ti({},f.outer),children:[g]},v="mask-".concat(o||Fr()),y="clip-".concat(o||Fr()),b={tag:"mask",attributes:Ti(Ti({},Lo),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},x={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(e=h,"g"===e.tag?e.children:[e])},b]};return n.push(x,{tag:"rect",attributes:Ti({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},Lo)}),{children:n,attributes:i}}}},No={provides:function(t){var e=!1;Vi.matchMedia&&(e=Vi.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var t=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:Ti(Ti({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var r=Ti(Ti({},i),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ti(Ti({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||a.children.push({tag:"animate",attributes:Ti(Ti({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ti(Ti({},r),{},{values:"1;0;1;1;0;1;"})}),t.push(a),t.push({tag:"path",attributes:Ti(Ti({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:Ti(Ti({},r),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:Ti(Ti({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ti(Ti({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}};!function(t,e){var n=e.mixoutsTo;Ea=t,Pa={},Object.keys(Aa).forEach((function(t){-1===Ma.indexOf(t)&&delete Aa[t]})),Ea.forEach((function(t){var e=t.mixout?t.mixout():{};if(Object.keys(e).forEach((function(t){"function"===typeof e[t]&&(n[t]=e[t]),"object"===Oi(e[t])&&Object.keys(e[t]).forEach((function(i){n[t]||(n[t]={}),n[t][i]=e[t][i]}))})),t.hooks){var i=t.hooks();Object.keys(i).forEach((function(t){Pa[t]||(Pa[t]=[]),Pa[t].push(i[t])}))}t.provides&&t.provides(Aa)}))}([Gr,wo,Co,So,ko,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=Ao,t}}},provides:function(t){t.pseudoElements2svg=function(t){var e=t.node,n=void 0===e?Gi:e;Mr.searchPseudoElements&&Ao(n)}}},{mixout:function(){return{dom:{unwatch:function(){co(),Mo=!0}}}},hooks:function(){return{bootstrap:function(){fo(Da("mutationObserverCallbacks",{}))},noAuto:function(){ho&&ho.disconnect()},watch:function(t){var e=t.observeMutationsRoot;Mo?uo():fo(Da("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}},Io,Fo,No,{hooks:function(){return{parseNodeAttributes:function(t,e){var n=e.getAttribute("data-fa-symbol"),i=null!==n&&(""===n||n);return t.symbol=i,t}}}}],{mixoutsTo:Ba});var zo=Ba.parse,Bo=Ba.icon,Uo=n(173),Wo=n.n(Uo);function Ho(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ho(Object(n),!0).forEach((function(e){Vo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xo(t){return Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(t)}function Vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Go(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qo(t){return function(t){if(Array.isArray(t))return Ko(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Ko(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Jo(t){return e=t,(e-=0)===e?t:(t=t.replace(/[\-_\s]+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))).substr(0,1).toLowerCase()+t.substr(1);var e}var $o=["style"];var Qo=!1;try{Qo=!0}catch(il){}function Zo(t){return t&&"object"===Xo(t)&&t.prefix&&t.iconName&&t.icon?t:zo.icon?zo.icon(t):null===t?null:t&&"object"===Xo(t)&&t.prefix&&t.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"===typeof t?{prefix:"fas",iconName:t}:void 0}function ts(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Vo({},t,e):{}}var es={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},ns=e.forwardRef((function(t,e){var n=Yo(Yo({},es),t),i=n.icon,r=n.mask,a=n.symbol,o=n.className,s=n.title,l=n.titleId,c=n.maskId,u=Zo(i),h=ts("classes",[].concat(qo(function(t){var e,n=t.beat,i=t.fade,r=t.beatFade,a=t.bounce,o=t.shake,s=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,h=t.pulse,f=t.fixedWidth,d=t.inverse,p=t.border,g=t.listItem,m=t.flip,v=t.size,y=t.rotation,b=t.pull,x=(Vo(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":f,"fa-inverse":d,"fa-border":p,"fa-li":g,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(v),"undefined"!==typeof v&&null!==v),Vo(e,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),Vo(e,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),Vo(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(x).map((function(t){return x[t]?t:null})).filter((function(t){return t}))}(n)),qo((o||"").split(" ")))),f=ts("transform","string"===typeof n.transform?zo.transform(n.transform):n.transform),d=ts("mask",Zo(r)),p=Bo(u,Yo(Yo(Yo(Yo({},h),f),d),{},{symbol:a,title:s,titleId:l,maskId:c}));if(!p)return function(){var t;!Qo&&console&&"function"===typeof console.error&&(t=console).error.apply(t,arguments)}("Could not find icon",u),null;var g=p.abstract,m={ref:e};return Object.keys(n).forEach((function(t){es.hasOwnProperty(t)||(m[t]=n[t])})),is(g[0],m)}));ns.displayName="FontAwesomeIcon",ns.propTypes={beat:Wo().bool,border:Wo().bool,beatFade:Wo().bool,bounce:Wo().bool,className:Wo().string,fade:Wo().bool,flash:Wo().bool,mask:Wo().oneOfType([Wo().object,Wo().array,Wo().string]),maskId:Wo().string,fixedWidth:Wo().bool,inverse:Wo().bool,flip:Wo().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Wo().oneOfType([Wo().object,Wo().array,Wo().string]),listItem:Wo().bool,pull:Wo().oneOf(["right","left"]),pulse:Wo().bool,rotation:Wo().oneOf([0,90,180,270]),shake:Wo().bool,size:Wo().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Wo().bool,spinPulse:Wo().bool,spinReverse:Wo().bool,symbol:Wo().oneOfType([Wo().bool,Wo().string]),title:Wo().string,titleId:Wo().string,transform:Wo().oneOfType([Wo().string,Wo().object]),swapOpacity:Wo().bool};var is=function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map((function(n){return t(e,n)})),a=Object.keys(n.attributes||{}).reduce((function(t,e){var i=n.attributes[e];switch(e){case"class":t.attrs.className=i,delete n.attributes.class;break;case"style":t.attrs.style=i.split(";").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n,i=e.indexOf(":"),r=Jo(e.slice(0,i)),a=e.slice(i+1).trim();return r.startsWith("webkit")?t[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=a:t[r]=a,t}),{});break;default:0===e.indexOf("aria-")||0===e.indexOf("data-")?t.attrs[e.toLowerCase()]=i:t.attrs[Jo(e)]=i}return t}),{attrs:{}}),o=i.style,s=void 0===o?{}:o,l=Go(i,$o);return a.attrs.style=Yo(Yo({},a.attrs.style),s),e.apply(void 0,[n.tag,Yo(Yo({},a.attrs),l)].concat(qo(r)))}.bind(null,e.createElement),rs={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"]},as={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},os=as,ss={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},ls=ss,cs={prefix:"fas",iconName:"comment",icon:[512,512,[128489,61669],"f075","M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0 0 0 0 0 .3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"]},us={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},hs={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},fs=hs,ds={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},ps=ds,gs={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},ms=gs,vs={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},ys=vs,bs={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M48 0C21.5 0 0 21.5 0 48V464c0 26.5 21.5 48 48 48h96V432c0-26.5 21.5-48 48-48s48 21.5 48 48v80h96c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48H48zM64 240c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V240zm112-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V240c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H272c-8.8 0-16-7.2-16-16V240zM80 96h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V112zM272 96h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H272c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16z"]},xs={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312V248H440c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V136c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H552v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]};const _s=ni("https://cnicyffiqvdhgyzkogtl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8"),ws=t=>{let{profile:n,searchQuery:i}=t;const[r,a]=(0,e.useState)(!1),o=t=>{if(!i)return t;return t.split(new RegExp("(".concat(i,")"),"gi")).map(((t,e)=>t.toLowerCase()===i.toLowerCase()?(0,Ot.jsx)("span",{className:xi,children:t},e):t))};return(0,Ot.jsxs)("div",{className:"".concat(mi," ").concat(r?vi:""),children:[(0,Ot.jsx)("div",{className:yi,style:{backgroundImage:"url(".concat(n.avatar_url,")")}}),(0,Ot.jsxs)("div",{className:bi,children:[(0,Ot.jsxs)("h2",{children:[n.first_name," ",n.last_name]}),(0,Ot.jsxs)("p",{children:["@",n.username]}),(0,Ot.jsx)("p",{children:n.status?"\u041e\u043d\u043b\u0430\u0439\u043d":"\u041e\u0444\u0444\u043b\u0430\u0439\u043d"}),(0,Ot.jsxs)("p",{children:["\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043f\u043e\u0438\u0441\u043a\u0443: ",(()=>{const t=["description","display_email","display_phone","work_info","education_info","social_links","status","first_name","last_name","username"];for(const e of t)if(n[e]&&n[e].toLowerCase().includes(i.toLowerCase()))return o(n[e]);return null})()||"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"]}),(0,Ot.jsx)("div",{className:_i,onClick:()=>a(!r),children:r?"\u25b2":"\u25bc"})]}),r&&(0,Ot.jsxs)("div",{className:wi,style:{backgroundImage:"url(".concat(n.cover_url,")"),backgroundColor:"rgba(0, 0, 0, 0.7)",backgroundBlendMode:"darken",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,Ot.jsxs)("p",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: ",n.description||"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"]}),(0,Ot.jsxs)("p",{children:["\u041f\u043e\u043b: ",1===n.gender?"\u041c\u0443\u0436\u0441\u043a\u043e\u0439":2===n.gender?"\u0416\u0435\u043d\u0441\u043a\u0438\u0439":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,Ot.jsxs)("p",{children:["\u0412\u043e\u0437\u0440\u0430\u0441\u0442: ",n.birthday?(t=>{const e=new Date,n=new Date(t);let i=e.getFullYear()-n.getFullYear();const r=e.getMonth()-n.getMonth();return(r<0||0===r&&e.getDate()<n.getDate())&&i--,i})(n.birthday):"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,Ot.jsxs)("p",{children:["Email: ",n.display_email||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,Ot.jsxs)("p",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",n.display_phone||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"]}),(0,Ot.jsxs)("p",{children:["\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435: ",n.education_info||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"]}),(0,Ot.jsxs)("p",{children:["\u0420\u0430\u0431\u043e\u0442\u0430: ",n.work_info||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"]}),(0,Ot.jsxs)("div",{className:Ci,children:[(0,Ot.jsxs)("button",{children:[(0,Ot.jsx)(ns,{icon:xs,className:Si})," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"]}),(0,Ot.jsxs)("button",{children:[(0,Ot.jsx)(ns,{icon:us,className:Si})," \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"]})]})]})]})},Cs=()=>{const[t,n]=(0,e.useState)(""),[i,r]=(0,e.useState)([]),[a,o]=(0,e.useState)(!1),[s,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)({gender:"",minAge:"",maxAge:""});(0,e.useEffect)((()=>{(c.gender||c.minAge||c.maxAge)&&h()}),[c]);const h=async()=>{o(!0),r([]);let e=_s.from("users_public_information").select("*").or("first_name.ilike.%".concat(t,"%,last_name.ilike.%").concat(t,"%,username.ilike.%").concat(t,"%,display_email.ilike.%").concat(t,"%,display_phone.ilike.%").concat(t,"%,description.ilike.%").concat(t,"%,work_info.ilike.%").concat(t,"%,education_info.ilike.%").concat(t,"%,social_links.ilike.%").concat(t,"%"));if(c.gender&&(e=e.eq("gender",c.gender)),c.minAge){const t=new Date;t.setFullYear(t.getFullYear()-c.minAge),e=e.gte("birthday",t.toISOString())}if(c.maxAge){const t=new Date;t.setFullYear(t.getFullYear()-c.maxAge),e=e.lte("birthday",t.toISOString())}const{data:n,error:i}=await e;i?console.error(i):r(n),o(!1)},f=t=>{const{name:e,value:n}=t.target;u((t=>({...t,[e]:n})))};return(0,Ot.jsxs)("div",{className:li,children:[(0,Ot.jsxs)("div",{className:ci,children:[(0,Ot.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u043c \u0434\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439...",value:t,onChange:t=>n(t.target.value)}),(0,Ot.jsx)("button",{onClick:h,children:(0,Ot.jsx)(ns,{icon:ys})}),(0,Ot.jsx)("button",{className:ui,onClick:()=>{l(!s)},children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"})]}),s&&(0,Ot.jsxs)("div",{className:hi,children:[(0,Ot.jsxs)("div",{className:fi,children:[(0,Ot.jsx)("label",{children:"\u041f\u043e\u043b:"}),(0,Ot.jsxs)("select",{name:"gender",value:c.gender,onChange:f,children:[(0,Ot.jsx)("option",{value:"",children:"\u0412\u0441\u0435"}),(0,Ot.jsx)("option",{value:"1",children:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"}),(0,Ot.jsx)("option",{value:"2",children:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"}),(0,Ot.jsx)("option",{value:"0",children:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})]})]}),(0,Ot.jsxs)("div",{className:fi,children:[(0,Ot.jsx)("label",{children:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442:"}),(0,Ot.jsx)("input",{type:"number",name:"minAge",placeholder:"\u041e\u0442",value:c.minAge,onChange:f}),(0,Ot.jsx)("input",{type:"number",name:"maxAge",placeholder:"\u0414\u043e",value:c.maxAge,onChange:f})]})]}),(0,Ot.jsx)("div",{className:di,children:(0,Ot.jsxs)("p",{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u0435\u0439: ",i.length]})}),a?(0,Ot.jsxs)("div",{className:pi,children:[(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{})]}):(0,Ot.jsx)("div",{className:gi,children:i.map((e=>(0,Ot.jsx)(ws,{profile:e,searchQuery:t},e.id)))})]})},Ss=()=>{return t="/login.html",window.location.href=t,null;var t},ks=()=>{return t="/registration.html",window.location.href=t,null;var t},Ts=ni("https://cnicyffiqvdhgyzkogtl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8"),Os=t=>{let{children:n}=t;const[i,r]=(0,e.useState)(null),[a,o]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{(async()=>{try{const{data:t,error:e}=await Ts.auth.getSession();if(e)throw e;r(!!t.session)}catch(t){r(!1)}finally{o(!1)}})()}),[]),a?(0,Ot.jsx)("div",{children:"Loading..."}):i?n:(s="/login.html",window.location.href=s,null);var s},js=ni("https://cnicyffiqvdhgyzkogtl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8"),Es=()=>{const t=$(),[n,i]=(0,e.useState)(null),[r,a]=(0,e.useState)(null),[o,s]=(0,e.useState)(!0);(0,e.useEffect)((()=>{(async()=>{s(!0);const{data:t,error:e}=await js.auth.getUser();if(e||!t)return a(!1),void s(!1);const{data:n,error:r}=await js.from("users_public_information").select("username, first_name, last_name, avatar_url").eq("auth_id",t.user.id).single();r?(console.log(r),a(!1)):(i(n),a(!0)),s(!1)})()}),[]);const l=[{path:"/login",icon:os,label:"\u0412\u043e\u0439\u0442\u0438"},{path:"/register",icon:xs,label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},{path:"/about",icon:fs,label:"\u041e \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0435"},{path:"/company",icon:bs,label:"\u041e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"}],c=[{path:"/",icon:ms,label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},{path:"/messenger",icon:cs,label:"\u041c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440"},{path:"/people",icon:rs,label:"\u041b\u044e\u0434\u0438"},{path:"/groups",icon:ls,label:"\u0413\u0440\u0443\u043f\u043f\u044b"},{path:"/options",icon:ps,label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}];return(0,Ot.jsx)("div",{className:"sidebar",children:(0,Ot.jsxs)("div",{className:"sidebar-content",children:[(0,Ot.jsxs)("div",{className:"logo",children:[(0,Ot.jsx)("span",{className:"network-name",children:"S"}),(0,Ot.jsx)("img",{src:"logo-fenix.png",alt:"Y Logo"}),(0,Ot.jsx)("span",{className:"network-name",children:"N"})]}),o?(0,Ot.jsxs)("div",{className:"spinner",children:[(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{}),(0,Ot.jsx)("div",{})]}):(0,Ot.jsx)(Ot.Fragment,{children:r?(0,Ot.jsxs)(Ot.Fragment,{children:[n&&(0,Ot.jsxs)(St,{to:"/".concat(n.username),className:"sidebar-button ".concat("/profile"===t.pathname?"active":""),children:[(0,Ot.jsx)("img",{src:n.avatar_url,alt:"Avatar",className:"avatar"}),(0,Ot.jsx)("span",{className:"profile-name",children:"".concat(n.first_name," ").concat(n.last_name)})]}),c.map((e=>(0,Ot.jsxs)(St,{to:e.path,className:"sidebar-button ".concat(t.pathname===e.path?"active":""),children:[(0,Ot.jsx)(ns,{icon:e.icon,className:"icon"}),(0,Ot.jsx)("span",{children:e.label})]},e.path)))]}):l.map((e=>(0,Ot.jsxs)(St,{to:e.path,className:"sidebar-button ".concat(t.pathname===e.path?"active":""),children:[(0,Ot.jsx)(ns,{icon:e.icon,className:"icon"}),(0,Ot.jsx)("span",{children:e.label})]},e.path)))})]})})};var Ps=n(406),As=n.n(Ps),Ms=function(){return Ms=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ms.apply(this,arguments)};function Ds(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}var Is=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],Ls={opacity:0,maxWidth:"100%"},Rs=e.forwardRef((function(t,n){var i=Ds(t,[]),r=i.dragMode,a=void 0===r?"crop":r,o=i.src,s=i.style,l=i.className,c=i.crossOrigin,u=i.scaleX,h=i.scaleY,f=i.enable,d=i.zoomTo,p=i.rotateTo,g=i.alt,m=void 0===g?"picture":g,v=i.ready,y=i.onInitialized,b=Ds(i,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),x={scaleY:h,scaleX:u,enable:f,zoomTo:d,rotateTo:p},_=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,e.useRef)(null);return e.useEffect((function(){t.forEach((function(t){t&&("function"==typeof t?t(i.current):t.current=i.current)}))}),[t]),i}(n,(0,e.useRef)(null));(0,e.useEffect)((function(){var t;(null===(t=_.current)||void 0===t?void 0:t.cropper)&&"number"==typeof d&&_.current.cropper.zoomTo(d)}),[i.zoomTo]),(0,e.useEffect)((function(){var t;(null===(t=_.current)||void 0===t?void 0:t.cropper)&&void 0!==o&&_.current.cropper.reset().clear().replace(o)}),[o]),(0,e.useEffect)((function(){if(null!==_.current){var t=new(As())(_.current,Ms(Ms({dragMode:a},b),{ready:function(t){null!==t.currentTarget&&function(t,e){void 0===e&&(e={});var n=e.enable,i=void 0===n||n,r=e.scaleX,a=void 0===r?1:r,o=e.scaleY,s=void 0===o?1:o,l=e.zoomTo,c=void 0===l?0:l,u=e.rotateTo;i?t.enable():t.disable(),t.scaleX(a),t.scaleY(s),void 0!==u&&t.rotateTo(u),c>0&&t.zoomTo(c)}(t.currentTarget.cropper,x),v&&v(t)}}));y&&y(t)}return function(){var t,e;null===(e=null===(t=_.current)||void 0===t?void 0:t.cropper)||void 0===e||e.destroy()}}),[_]);var w,C=(w=Ms(Ms({},b),{crossOrigin:c,src:o,alt:m}),Is.reduce((function(t,e){var n=t,i=e;return n[i],Ds(n,["symbol"==typeof i?i:i+""])}),w));return e.createElement("div",{style:s,className:l},e.createElement("img",Ms({},C,{style:Ls,ref:_})))})),Fs=n(661);const Ns=()=>{const[t,n]=(0,e.useState)(null),[i,r]=(0,e.useState)(null),[a,o]=(0,e.useState)("#000000"),[s,l]=(0,e.useState)(5),[c,u]=(0,e.useState)(null),[h,f]=(0,e.useState)("crop"),[d,p]=(0,e.useState)("none"),[g,m]=(0,e.useState)(100),v=(0,e.useRef)(null),y=(0,e.useRef)(null),b=(0,e.useRef)(null),x=(0,e.useRef)(null);(0,e.useEffect)((()=>{if(i){const t=new Fs.fabric.Canvas(b.current);x.current=t,Fs.fabric.Image.fromURL(i,(e=>{t.setWidth(e.width),t.setHeight(e.height),t.add(e),w()})),t.on("mouse:down",(t=>{t.target&&"textbox"===t.target.type?u(t.target):u(null)}))}}),[i]);const _=t=>{h!==t&&(x.current&&(x.current.isDrawingMode=!1,x.current.clear(),Fs.fabric.Image.fromURL(i,(t=>{x.current.setWidth(t.width),x.current.setHeight(t.height),x.current.add(t),w()}))),f(t))},w=()=>{x.current&&(x.current.getObjects("image").forEach((t=>{t.filters=[],"none"!==d&&t.filters.push(new Fs.fabric.Image.filters[d]),t.filters.push(new Fs.fabric.Image.filters.Contrast({contrast:g/100})),t.applyFilters()})),x.current.renderAll())};return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("input",{type:"file",ref:y,style:{display:"none"},onChange:t=>{const e=t.target.files[0],i=new FileReader;i.onload=()=>{n(i.result)},i.readAsDataURL(e)}}),(0,Ot.jsx)("button",{onClick:()=>{y.current.click()},children:"Upload Image"}),(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("button",{onClick:()=>_("crop"),children:"Crop"}),(0,Ot.jsx)("button",{onClick:()=>_("draw"),children:"Draw"}),(0,Ot.jsx)("button",{onClick:()=>_("text"),children:"Text"}),(0,Ot.jsx)("button",{onClick:()=>_("filter"),children:"Filters"})]}),"crop"===h&&t&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)(Rs,{src:t,style:{height:400,width:"100%"},initialAspectRatio:1,guides:!1,cropBoxResizable:!0,ref:v}),(0,Ot.jsx)("button",{onClick:()=>{const t=v.current.cropper.getCroppedCanvas().toDataURL();r(t)},children:"Crop Image"})]}),i&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h3",{children:"Edit Image:"}),(0,Ot.jsx)("canvas",{id:"canvas",ref:b})]}),"draw"===h&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("button",{onClick:()=>{x.current&&(x.current.isDrawingMode=!0,x.current.freeDrawingBrush.color=a,x.current.freeDrawingBrush.width=s)},children:"Start Drawing"}),(0,Ot.jsxs)("label",{children:["Brush Color:",(0,Ot.jsx)("input",{type:"color",value:a,onChange:t=>{o(t.target.value),x.current&&(x.current.freeDrawingBrush.color=t.target.value)}})]}),(0,Ot.jsxs)("label",{children:["Brush Width:",(0,Ot.jsx)("input",{type:"number",value:s,onChange:t=>{l(parseInt(t.target.value,10)),x.current&&(x.current.freeDrawingBrush.width=parseInt(t.target.value,10))}})]})]}),"text"===h&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("button",{onClick:()=>{if(x.current){const t=new Fs.fabric.Textbox("Your Text",{left:100,top:100,fill:a,editable:!0});x.current.add(t)}},children:"Add Text"}),c&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsxs)("label",{children:["Edit Text:",(0,Ot.jsx)("input",{type:"text",value:c.text,onChange:t=>{c&&(c.set("text",t.target.value),x.current.renderAll())}})]}),(0,Ot.jsxs)("label",{children:["Text Color:",(0,Ot.jsx)("input",{type:"color",value:c.fill,onChange:t=>{c&&(c.set("fill",t.target.value),x.current.renderAll())}})]})]})]}),"filter"===h&&(0,Ot.jsxs)("div",{children:[(0,Ot.jsxs)("label",{children:["Filter:",(0,Ot.jsxs)("select",{value:d,onChange:t=>{p(t.target.value),w()},children:[(0,Ot.jsx)("option",{value:"none",children:"None"}),(0,Ot.jsx)("option",{value:"Grayscale",children:"Grayscale"}),(0,Ot.jsx)("option",{value:"Invert",children:"Invert"}),(0,Ot.jsx)("option",{value:"Sepia",children:"Sepia"})]})]}),(0,Ot.jsxs)("label",{children:["Contrast:",(0,Ot.jsx)("input",{type:"range",min:"0",max:"200",value:g,onChange:t=>{m(t.target.value),w()}})]})]}),(0,Ot.jsx)("button",{onClick:()=>{if(x.current){const t=x.current.toDataURL();console.log(t),r(t)}},children:"Save"})]})},zs=()=>(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h2",{children:"\u041e\u0431\u0449\u0438\u0435 \u0438 \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0426\u0432\u0435\u0442 \u0430\u043a\u0446\u0435\u043d\u0442\u0430:"}),(0,Ot.jsx)("input",{type:"color"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u042f\u0437\u044b\u043a \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430:"}),(0,Ot.jsxs)("select",{children:[(0,Ot.jsx)("option",{value:"ru",children:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}),(0,Ot.jsx)("option",{value:"en",children:"English"})]})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0422\u0435\u043c\u0430:"}),(0,Ot.jsxs)("select",{children:[(0,Ot.jsx)("option",{value:"light",children:"\u0421\u0432\u0435\u0442\u043b\u0430\u044f"}),(0,Ot.jsx)("option",{value:"dark",children:"\u0422\u0435\u043c\u043d\u0430\u044f"})]})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0412\u0438\u0434\u0436\u0435\u0442\u044b \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u043c\u0435\u043d\u044e:"}),(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("input",{type:"checkbox",id:"widget1",name:"widget1"}),(0,Ot.jsx)("label",{htmlFor:"widget1",children:"\u0412\u0438\u0434\u0436\u0435\u0442 1"})]}),(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("input",{type:"checkbox",id:"widget2",name:"widget2"}),(0,Ot.jsx)("label",{htmlFor:"widget2",children:"\u0412\u0438\u0434\u0436\u0435\u0442 2"})]})]})]}),Bs="ProfilePreview_container__z7qqO",Us="ProfilePreview_profileBlock__MjY4R",Ws="ProfilePreview_profileHeader__fNA9P",Hs="ProfilePreview_profileCover__nvUeP",Ys="ProfilePreview_profileAvatar__P38iG",Xs="ProfilePreview_profileInfo__FO2Ka",Vs="ProfilePreview_profileNames__7iGPu",Gs="ProfilePreview_profileTags__W2GYe",qs="ProfilePreview_profileMenu__KZsYh",Ks="ProfilePreview_menuItem__SrOEU",Js="ProfilePreview_profileContent__cvCKb",$s=()=>{const[t,n]=(0,e.useState)("about"),[i,r]=(0,e.useState)(null);(0,e.useEffect)((()=>{(async()=>{const t=ni("https://cnicyffiqvdhgyzkogtl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNuaWN5ZmZpcXZkaGd5emtvZ3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDc3NDM2NzcsImV4cCI6MjAyMzMxOTY3N30.bZoapdV-TJiq42uJaOPGBfPz91ULReQ1_ahXpUHNaJ8");try{const{data:e,error:n}=await t.auth.getUser();if(n||!e)return console.log("No active session found."),void(window.location.href="/login");let i=t.from("users_public_information").select("id, username, first_name, last_name, avatar_url, cover_url, status").eq("auth_id",e.user.id).single();const{data:a,error:o}=await i;if(o)throw o;r(a)}catch(e){console.error("Error fetching user information:",e.message)}})()}),[]);return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h2",{children:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,Ot.jsx)("label",{children:"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440:"}),(0,Ot.jsx)("div",{className:"profile-preview",children:(0,Ot.jsx)("div",{className:Bs,children:i&&(0,Ot.jsxs)("div",{className:Us,children:[(0,Ot.jsxs)("div",{className:Ws,children:[(0,Ot.jsx)("div",{className:Hs,children:(0,Ot.jsx)("img",{id:"profile-cover",src:i.cover_url,alt:"Cover Photo"})}),(0,Ot.jsx)("div",{className:Ys,children:(0,Ot.jsx)("img",{id:"profile-avatar",src:i.avatar_url,alt:"User Photo"})}),(0,Ot.jsxs)("div",{className:Xs,children:[(0,Ot.jsx)("h2",{className:Vs,children:"".concat(i.first_name," ").concat(i.last_name)}),(0,Ot.jsx)("div",{className:Gs})]})]}),(0,Ot.jsxs)("div",{className:qs,children:[(0,Ot.jsx)("div",{className:Ks,children:"About"}),(0,Ot.jsx)("div",{className:Ks,children:"Events"}),(0,Ot.jsx)("div",{className:Ks,children:"Media"}),(0,Ot.jsx)("div",{className:Ks,children:"Friends"}),(0,Ot.jsx)("div",{className:Ks,children:"Groups"}),(0,Ot.jsx)("div",{className:Ks,children:"Settings"})]}),(0,Ot.jsx)("div",{className:Js})]})})}),(0,Ot.jsxs)("div",{className:"profile-submenu",children:[(0,Ot.jsx)("span",{className:"about"===t?"active":"",onClick:()=>n("about"),children:"\u041e \u0441\u0435\u0431\u0435"}),(0,Ot.jsx)("span",{className:"media"===t?"active":"",onClick:()=>n("media"),children:"\u041c\u0435\u0434\u0438\u0430"}),(0,Ot.jsx)("span",{className:"music"===t?"active":"",onClick:()=>n("music"),children:"\u041c\u0443\u0437\u044b\u043a\u0430"}),(0,Ot.jsx)("span",{className:"verification"===t?"active":"",onClick:()=>n("verification"),children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"})]}),(0,Ot.jsx)("div",{className:"profile-settings-content",children:(()=>{switch(t){case"about":return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h3",{children:"\u041e \u0441\u0435\u0431\u0435"}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0410\u0432\u0430\u0442\u0430\u0440:"}),(0,Ot.jsx)("input",{type:"file"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430:"}),(0,Ot.jsx)("input",{type:"file"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0418\u043c\u044f:"}),(0,Ot.jsx)("input",{type:"text"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"}),(0,Ot.jsx)("input",{type:"text"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"Username:"}),(0,Ot.jsx)("input",{type:"text"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0421\u0442\u0430\u0442\u0443\u0441:"}),(0,Ot.jsx)("input",{type:"text"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0422\u0435\u0433\u0438:"}),(0,Ot.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u0433 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 Enter"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u041e \u0441\u0435\u0431\u0435:"}),(0,Ot.jsx)("textarea",{placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435"})]})]});case"media":return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h3",{children:"\u041c\u0435\u0434\u0438\u0430"}),(0,Ot.jsxs)("div",{className:"media-actions",children:[(0,Ot.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e/\u0432\u0438\u0434\u0435\u043e"}),(0,Ot.jsx)("button",{children:"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c"}),(0,Ot.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e"})]}),(0,Ot.jsx)("div",{className:"media-gallery"})]});case"music":return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h3",{children:"\u041c\u0443\u0437\u044b\u043a\u0430"}),(0,Ot.jsxs)("div",{className:"music-actions",children:[(0,Ot.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0435\u043a"}),(0,Ot.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0438\u043b\u0438 \u0430\u0440\u0442\u0438\u0441\u0442\u0443"})]}),(0,Ot.jsx)("div",{className:"music-list"})]});case"verification":return(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h3",{children:"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"}),(0,Ot.jsxs)("div",{className:"verification-service",children:[(0,Ot.jsx)("img",{src:"https://cubiq.ru/wp-content/uploads/2020/09/twitchprime.jpg",className:"service-icon"}),(0,Ot.jsxs)("div",{className:"service-info",children:[(0,Ot.jsx)("p",{children:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c: user123"}),(0,Ot.jsx)("p",{children:"\u0424\u043e\u043b\u043e\u0432\u0435\u0440\u044b: 12,000"}),(0,Ot.jsx)("p",{children:"\u0422\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f:"}),(0,Ot.jsxs)("ul",{children:[(0,Ot.jsxs)("li",{children:["10,000 \u0444\u043e\u043b\u043e\u0432\u0435\u0440\u043e\u0432 ",(0,Ot.jsx)("span",{children:"\u2714"})]}),(0,Ot.jsxs)("li",{children:["\u0421\u0442\u0440\u0438\u043c\u044b \u043a\u0430\u0436\u0434\u0443\u044e \u043d\u0435\u0434\u0435\u043b\u044e ",(0,Ot.jsx)("span",{children:"\u2714"})]}),(0,Ot.jsxs)("li",{children:["\u041f\u0440\u0438\u0435\u043c\u043b\u0435\u043c\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 ",(0,Ot.jsx)("span",{children:"\u2714"})]})]}),(0,Ot.jsxs)("p",{children:["\u0412\u044b \u043c\u0435\u0434\u0438\u0439\u043d\u0430\u044f \u043b\u0438\u0447\u043d\u043e\u0441\u0442\u044c ",(0,Ot.jsx)("span",{children:"\u2714"})]})]})]}),(0,Ot.jsx)("button",{children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441"})]});default:return(0,Ot.jsx)("div",{children:"\u041e \u0441\u0435\u0431\u0435"})}})()})]})},Qs=()=>(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h2",{children:"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u0441\u0435\u0441\u0441\u0438\u0438"}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0414\u0432\u0443\u0445\u0444\u0430\u043a\u0442\u043e\u0440\u043d\u0430\u044f \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f:"}),(0,Ot.jsx)("button",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c:"}),(0,Ot.jsx)("input",{type:"password",placeholder:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),(0,Ot.jsx)("input",{type:"password",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),(0,Ot.jsx)("button",{children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0447\u0442\u0443:"}),(0,Ot.jsx)("input",{type:"email",placeholder:"\u041d\u043e\u0432\u0430\u044f \u043f\u043e\u0447\u0442\u0430"}),(0,Ot.jsx)("button",{children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0420\u0435\u0436\u0438\u043c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0437\u0430\u0449\u0438\u0442\u044b:"}),(0,Ot.jsx)("input",{type:"checkbox"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("h3",{children:"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0441\u0435\u0441\u0441\u0438\u0438"}),(0,Ot.jsxs)("div",{className:"session-list",children:[(0,Ot.jsxs)("div",{className:"session-item",children:[(0,Ot.jsx)("p",{children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: MacBook Pro"}),(0,Ot.jsx)("p",{children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f: \u041c\u043e\u0441\u043a\u0432\u0430, \u0420\u043e\u0441\u0441\u0438\u044f"}),(0,Ot.jsx)("button",{children:"\u0412\u044b\u0439\u0442\u0438"})]}),(0,Ot.jsxs)("div",{className:"session-item",children:[(0,Ot.jsx)("p",{children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: iPhone 12"}),(0,Ot.jsx)("p",{children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f: \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433, \u0420\u043e\u0441\u0441\u0438\u044f"}),(0,Ot.jsx)("button",{children:"\u0412\u044b\u0439\u0442\u0438"})]})]})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("h3",{children:"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0441\u0435\u0441\u0441\u0438\u0438"}),(0,Ot.jsxs)("div",{className:"session-list",children:[(0,Ot.jsxs)("div",{className:"session-item",children:[(0,Ot.jsx)("p",{children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: iPad Air"}),(0,Ot.jsx)("p",{children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f: \u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a, \u0420\u043e\u0441\u0441\u0438\u044f"})]}),(0,Ot.jsxs)("div",{className:"session-item",children:[(0,Ot.jsx)("p",{children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e: Windows PC"}),(0,Ot.jsx)("p",{children:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f: \u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433, \u0420\u043e\u0441\u0441\u0438\u044f"})]})]})]}),(0,Ot.jsxs)("div",{className:"danger-zone",children:[(0,Ot.jsx)("button",{className:"danger",children:"\u0411\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,Ot.jsx)("button",{className:"danger",children:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"}),(0,Ot.jsx)("p",{children:"\u041f\u0440\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043a\u0440\u043e\u043c\u0435 \u0438\u043c\u0435\u043d\u0438, \u0444\u0430\u043c\u0438\u043b\u0438\u0438 \u0438 username \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0439..."}),(0,Ot.jsx)("p",{children:"\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e \u0443\u0434\u0430\u043b\u044f\u0435\u0442\u0441\u044f."})]})]}),Zs=()=>(0,Ot.jsxs)("div",{children:[(0,Ot.jsx)("h2",{children:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c"}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442:"}),(0,Ot.jsx)("input",{type:"checkbox"})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:"}),(0,Ot.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 username"}),(0,Ot.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,Ot.jsx)("div",{className:"restricted-list",children:(0,Ot.jsxs)("div",{className:"restricted-item",children:[(0,Ot.jsx)("p",{children:"username1"}),(0,Ot.jsx)("button",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]}),(0,Ot.jsxs)("div",{className:"setting-item",children:[(0,Ot.jsx)("label",{children:"\u0427\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a:"}),(0,Ot.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 username"}),(0,Ot.jsx)("button",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),(0,Ot.jsx)("div",{className:"blacklist",children:(0,Ot.jsxs)("div",{className:"blacklist-item",children:[(0,Ot.jsx)("p",{children:"username2"}),(0,Ot.jsx)("button",{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]})]}),tl=()=>{const[t,n]=(0,e.useState)("general");return(0,Ot.jsxs)("div",{className:"settings-container",children:[(0,Ot.jsx)("div",{className:"settings-sidebar",children:(0,Ot.jsxs)("ul",{children:[(0,Ot.jsx)("li",{className:"general"===t?"active":"",onClick:()=>n("general"),children:"\u041e\u0431\u0449\u0438\u0435 \u0438 \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"}),(0,Ot.jsx)("li",{className:"profile"===t?"active":"",onClick:()=>n("profile"),children:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,Ot.jsx)("li",{className:"security"===t?"active":"",onClick:()=>n("security"),children:"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u0441\u0435\u0441\u0441\u0438\u0438"}),(0,Ot.jsx)("li",{className:"privacy"===t?"active":"",onClick:()=>n("privacy"),children:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u044c"})]})}),(0,Ot.jsx)("div",{className:"settings-content",children:(()=>{switch(t){case"general":default:return(0,Ot.jsx)(zs,{});case"profile":return(0,Ot.jsx)($s,{});case"security":return(0,Ot.jsx)(Qs,{});case"privacy":return(0,Ot.jsx)(Zs,{})}})()})]})},el=()=>{const[t,n]=(0,e.useState)("");return(0,Ot.jsx)(_t,{children:(0,Ot.jsx)(gt,{children:(0,Ot.jsxs)(Ot.Fragment,{children:[(0,Ot.jsx)(dt,{path:"/login",element:(0,Ot.jsx)(Ss,{})}),(0,Ot.jsx)(dt,{path:"/registration",element:(0,Ot.jsx)(ks,{})}),(0,Ot.jsx)(dt,{path:"/redactor",element:(0,Ot.jsx)(Ns,{})}),(0,Ot.jsx)(dt,{path:"/*",element:(0,Ot.jsxs)("div",{className:"App",children:[(0,Ot.jsx)(Es,{}),(0,Ot.jsxs)(gt,{children:[(0,Ot.jsx)(dt,{path:"/",element:(0,Ot.jsx)(Os,{children:(0,Ot.jsx)(jt,{})})}),(0,Ot.jsx)(dt,{path:"/people",element:(0,Ot.jsx)(Os,{children:(0,Ot.jsx)(Cs,{})})}),(0,Ot.jsx)(dt,{path:"/:username",element:(0,Ot.jsx)(ai,{})}),(0,Ot.jsx)(dt,{path:"/messenger",element:(0,Ot.jsx)(Os,{children:(0,Ot.jsx)(oi,{})})}),(0,Ot.jsx)(dt,{path:"/groups",element:(0,Ot.jsx)(Os,{children:(0,Ot.jsx)(si,{})})}),(0,Ot.jsx)(dt,{path:"/options",element:(0,Ot.jsx)(Os,{children:(0,Ot.jsx)(tl,{})})})]})]})})]})})})},nl=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then((e=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:a,getTTFB:o}=e;n(t),i(t),r(t),a(t),o(t)}))};r.createRoot(document.getElementById("root")).render((0,Ot.jsx)(e.StrictMode,{children:(0,Ot.jsx)(el,{})})),nl()})()})();
//# sourceMappingURL=main.313ab27a.js.map